(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2105],{22246:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn/paymentStatusDisplay",function(){return r(91906)}])},91906:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return je}});var n=r(24246),o=r(27378),i=r(55480),a=r(2137),u=r(10100),s=r(38906),c=r(86677);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}var b=r(45671),v=r(14916),S=r(49613),g=r(9078),x=r(64137),P=function(e){var t=e.verificationData,r=t.paymentDate,o=t.amount,a=t.paymentTime,u=t.receiptNumber,s=t.status,c=e.paymentStatus,l=c.currentPaymentState,d=c.paymentFetchStatus,p=e.verificationPending,f=(0,g.$)("payment").t;if(l===S.tm.PAYMENT_VERIFY&&(d===S.UK.SUCCESS||d===S.UK.FAILED)){return(0,n.jsxs)(i.kC,{flexDirection:"row",flexWrap:"wrap",p:[4,0,0],children:[(0,n.jsxs)(i.kC,{mr:[0,0,10],justifyContent:"space-between",flexDirection:["row","row","column"],mb:[1,3,3],py:1,width:["100%","100%","auto"],alignItems:["center","start","start"],children:[(0,n.jsxs)(v.xv,{variant:"overline",children:[" ",f("Purchase date")," "]}),(0,n.jsx)(v.xv,{variant:"body2",color:"onSurface.light",children:r})]}),(0,n.jsxs)(i.kC,{mr:[0,0,10],justifyContent:"space-between",flexDirection:["row","row","column"],mb:[1,3,3],py:1,width:["100%","100%","auto"],alignItems:["center","start","start"],children:[(0,n.jsxs)(v.xv,{variant:"overline",children:[" ",f("Time")," "]}),(0,n.jsx)(v.xv,{variant:"body2",color:"onSurface.light",children:a})]}),o?(0,n.jsxs)(i.kC,{mr:[0,0,10],justifyContent:"space-between",flexDirection:["row","row","column"],mb:[1,3,3],py:1,width:["100%","100%","auto"],alignItems:["center","start","start"],children:[(0,n.jsxs)(v.xv,{variant:"overline",children:[" ",f("Amount")," "]}),(0,n.jsx)(v.xv,{variant:"body2",color:"onSurface.light",children:(0,x.Z)(o)})]}):null,(0,n.jsxs)(i.kC,{mr:[0,0,10],justifyContent:"space-between",flexDirection:["row","row","column"],mb:[1,3,3],py:1,width:["100%","100%","auto"],alignItems:["center","start","start"],children:[(0,n.jsxs)(v.xv,{variant:"overline",children:[" ",f("paymentStatus")," "]}),l===S.tm.PAYMENT_VERIFY&&d===S.UK.SUCCESS?(0,n.jsx)(i.xu,{maxWidth:13,sx:{textAlign:["start","start","center"]},children:(0,n.jsx)(v.Ct,{content:f("success"),emphasis:"high"})}):"awaited"===s?(0,n.jsx)(i.xu,{maxWidth:13,sx:{textAlign:["start","start","center"]},children:(0,n.jsx)(v.Ct,{content:f("awaited"),emphasis:"high"})}):p?(0,n.jsx)(i.xu,{maxWidth:13,sx:{textAlign:["start","start","center"]},children:(0,n.jsx)(v.Ct,{content:f("pending"),emphasis:"high"})}):(0,n.jsx)(v.xv,{color:"error",variant:"body2",textAlign:"center",children:f("failure")})]}),(0,n.jsxs)(i.kC,{justifyContent:"space-between",flexDirection:["row","row","column"],mb:[1,3,3],py:1,width:["100%","100%","auto"],alignItems:["center","start","start"],children:[(0,n.jsxs)(v.xv,{variant:"overline",children:[" ",f("transaction id")," "]}),(0,n.jsxs)(v.xv,{variant:"body2",color:"onSurface.light",children:[" ",u," "]})]})]})}return(0,n.jsx)(v.xv,{variant:"body2",children:" Loading... "})},j=r(40472),I=r(32362),C=r(38212),w=r(53850),_=r(65852),T=r(95045),O=r(55643),E=function(e){var t=e.currentBundleId,r=e.currentBundleSeoTitle,o=e.currentCourseSeoTitle,i=e.currentProductType,a=e.currentCourseId,u=e.currentPaymentState,s=e.paymentFetchStatus,l=e.courseSeoTitle,d=e.returnToPost,p=(0,g.$)("payment").t;return(0,n.jsx)(v.zx,{iconRight:!0,IconComponent:_.mGl,buttonType:"solid",onClick:function(){return function(){if(O.Gj.pricing_model!==T._n.SUBSCRIPTION_TYPE)if(d){var e=w.XC.newsfeedDetails({postId:d});c.default.replace(e,void 0,{shallow:!0})}else if(o&&r){var n={courseId:a||null,bundleId:t||null,courseType:i},u={productSeo:r,subProductSeo:o};c.default.replace({pathname:w.y4.bundleCourseDashboard,query:n},w.XC.bundleCourseDashboard(u),{shallow:!0})}else o||r||l?c.default.replace({pathname:w.y4.courseDashboard,query:{courseId:a||null,bundleId:t||null,courseType:i}},w.XC.courseDashboard({productSeo:r||o||l}),{shallow:!0}):c.default.replace(w.y4.myEnrollments,void 0,{shallow:!0});else c.default.push(w.y4.store,w.XC.store())}()},colorVariant:u!==S.tm.PAYMENT_INITIATED&&u!==S.tm.PAYMENT_VERIFY||s!==S.UK.IN_PROGRESS?"primary":"disabled",text:p(d?"newsfeed:goToPost":o||r||l?"startLearning":"goToEnrollment")})},D=r(14620),R=function(e){var t=e.paymentRetryData,r=e.doVerifyPayment,o=e.courseTitle,a=e.transactionId,u=(0,g.$)("payment").t;return(0,n.jsxs)(i.kC,{children:[(0,n.jsx)(i.xu,{mr:4,children:(0,n.jsx)(v.pl,{srcDetails:{supportType:D.x1.SUPPORT_TYPE_PAYMENT,courseId:t.courseId,title:o,transactionId:a},children:(0,n.jsx)(v.zx,{colorVariant:"primary",buttonType:"text",type:"button",text:u("reportAnIssue")})})}),(0,n.jsx)(v.zx,{iconRight:!0,IconComponent:_.mGl,buttonType:"solid",onClick:function(){return r(t.purchaseData,t.courseId,t.allBundleCourseIds,t.orderSummaryData)},colorVariant:"primary",text:u("retryPayment")})]})},N=r(74566),k=r(4854);function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){L(e,t,r[t])}))}return e}function F(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return F(this,r)}}var z=S.Gj.pricing_model===T._n.SUBSCRIPTION_TYPE,X=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(u,e);var t,r,o,a=Y(u);function u(){return U(this,u),a.apply(this,arguments)}return t=u,(r=[{key:"componentDidMount",value:function(){if(this.props.currentPaymentState===S.tm.PAYMENT_VERIFY&&this.props.paymentFetchStatus===S.UK.SUCCESS&&S.Gj.order_tracking_script&&this.props.paymentVerifyData){var e=document.querySelector("head"),t=this.props.paymentVerifyData,r=t.paymentDate,n=t.amount,o=t.paymentTime,i=t.receiptNumber,a=t.courseTitle,u=S.Gj.order_tracking_script,s={productPrice:n,paymentTime:o,receiptNumber:i,courseTitle:a,paymentDate:r};if(!r||!n||!o||!i||!a)return null;Object.keys(s).forEach((function(e){var t=s[e];isNaN(Number(t))||(t=Number(t)),"string"===typeof t&&(t="'".concat(t,"'")),u=(0,k.p8)(u,"".concat(e),t)}));var c=document.createRange().createContextualFragment(u);e&&c&&e.appendChild(c)}}},{key:"render",value:function(){var e=this.props,t=e.paymentFetchStatus,r=e.currentPaymentState,o=e.t,a=e.currentCourseSeoTitle,u=e.currentBundleSeoTitle,s=e.currentCourseId,l=e.currentBundleId,d=e.currentProductType,p=e.doVerifyPayment,f=e.gatewayId,y=e.paymentId,m=e.userPaymentSuccess,h=this.props,b=h.orderSummaryData,g=h.paymentVerifyData,x=r===S.tm.PAYMENT_VERIFY&&t===S.UK.SUCCESS,_="awaited"===g.status;S.UK.SUCCESS;var T=("true"===g.userPaymentSuccess||m)&&r===S.tm.PAYMENT_VERIFY&&t===S.UK.FAILED,O={purchaseData:A({},g),courseId:0,allBundleCourseIds:[],orderSummaryData:{gatewayCredentials:{gatewayId:f},transactionId:g&&g.receiptNumber}};f===S.UW.RAZORPAY_PAYMENT_GATEWAY&&(O.purchaseData.razorpay_payment_id=y);var D=function(){return o(T?"pending":x?"paymentSuccessful":_?"paymentAwaited":"paymentFailure")},k=function(){return b&&b.courseData.courseImage?(0,n.jsx)(v.Ee,{alt:o("courseImage"),objectFit:"cover",src:b.courseData.courseImage}):g&&g.courseTitle?(0,n.jsx)(C.Yb,{title:g.courseTitle,productType:b&&b.courseData.courseType}):""},U=c.default.query.returnToPost&&c.default.query.returnToPost.toString()||"";return(0,n.jsx)(i.xu,{width:["100%","85%","55%"],minWidth:["100%","85%",23],maxWidth:26,minHeight:20,p:[3,7,7],sx:{margin:"0 auto",borderWidth:[0,1,1],borderStyle:"solid",borderColor:"border"},children:(0,n.jsxs)(i.kC,{flexDirection:"column",justifyContent:"space-between",children:[(0,n.jsxs)(i.kC,{flexDirection:"row",pb:4,children:[(0,n.jsx)(i.xu,{display:["none","block","block"],children:(0,n.jsx)(v.X6,{color:x||_?"onSurface.main":T?"accent.main":"error",textTransform:"capitalize",variant:"h1",children:D()})}),(0,n.jsx)(i.xu,{display:["block","none","none"],children:(0,n.jsx)(v.X6,{color:x||_?"onSurface.main":"error",textTransform:"capitalize",variant:"h3",children:D()})}),(0,n.jsx)(i.kC,{flexDirection:"column",justifyContent:"center",ml:[2,5,5],children:(0,n.jsx)(v.Bz,{disableHover:!0,children:x?(0,n.jsx)(I.Meg,{color:"onSecondary.dark"}):(0,n.jsx)(I.mpJ,{color:"error"})})})]}),(0,n.jsxs)(i.kC,{mt:3,flexDirection:["row"],my:3,children:[k()?(0,n.jsx)(i.xu,{height:[9,12,12],width:[16,"checkoutImgWidth","checkoutImgWidth"],minWidth:[16,"checkoutImgWidth","checkoutImgWidth"],mr:4,sx:{borderWidth:1,borderStyle:"solid",borderColor:"disabled"},children:k()}):null,g.courseTitle?(0,n.jsxs)(i.kC,{flexDirection:"column",minWidth:[16,0,0],children:[(0,n.jsx)(i.xu,{display:["none","block","block"],children:(0,n.jsx)(v.X6,{color:"onBackground.main",textTransform:"capitalize",variant:"h2",children:g.courseTitle})}),(0,n.jsx)(i.xu,{display:["block","none","none"],children:(0,n.jsx)(v.X6,{color:"onBackground.main",textTransform:"capitalize",variant:"h5",children:g.courseTitle})})]}):null]}),(0,n.jsx)(i.xu,{mb:5,mt:1,children:(0,n.jsx)(v.xv,{variant:"body2",color:"onBackground.light",sx:{textTransform:"capitalize"},children:o(T?"verificationPending":x?z?"subscriptionPaymentSuccessMessage":"paymentSuccessMessage":_?"paymentAwaitedMessage":"paymentFailureMessage")})}),(0,n.jsxs)(i.kC,{width:"100%",flexDirection:"column",justifyContent:"space-between",sx:{margin:"0 auto",borderWidth:[1,0,0],borderStyle:"solid",borderColor:"border"},children:[(0,n.jsx)(i.xu,{mt:[0,5,5],children:(0,n.jsx)(P,{verificationData:g,paymentStatus:{paymentFetchStatus:t,currentPaymentState:r},verificationPending:T})}),x||_?null:(0,n.jsxs)(i.xu,{mt:4,px:[4,0,0],mb:5,children:[(0,n.jsxs)(v.xv,{variant:"overline",color:"onBackground.main",textTransform:"capitalize",children:[" ",o("note")," "]}),(0,n.jsxs)(v.xv,{variant:"body2",color:"onSurface.light",children:[" ",o("paymentFailureNote")," "]})]}),(0,n.jsx)(i.xu,{py:[0,5,5],pb:[1,5,5],px:[4,0,0],children:(0,n.jsx)(v.iz,{})}),(0,n.jsxs)(i.kC,{flexDirection:"row",justifyContent:"space-between",px:[4,0,0],mt:[5,0,0],children:[(0,n.jsx)(v.zx,{colorVariant:"primary",text:o(z?"backToHomepage":"backToStore"),buttonType:"outline",type:"button",IconComponent:N.KYK,onClick:function(){return c.default.push(w.y4.store)}}),x?(0,n.jsx)(E,{returnToPost:U,courseSeoTitle:g.seoTitle,currentBundleId:l,currentBundleSeoTitle:u,currentCourseSeoTitle:a,currentProductType:d,currentCourseId:s,currentPaymentState:r,paymentFetchStatus:t}):(0,n.jsx)(R,{paymentRetryData:O,doVerifyPayment:p,transactionId:g&&g.receiptNumber||"",courseTitle:g&&g.courseTitle||""})]}),(0,n.jsx)(i.xu,{mt:5,children:(0,n.jsx)(j.Z,{})})]})]})})}}])&&G(t.prototype,r),o&&G(t,o),u}(o.Component),W=(0,b.Z)("payment")(X);function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){q(e,t,r[t])}))}return e}function Q(e,t){return!t||"object"!==ee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var o=H(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Q(this,r)}}var re=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(c,e);var t,r,o,s=te(c);function c(){return K(this,c),s.apply(this,arguments)}return t=c,(r=[{key:"componentDidUpdate",value:function(){window.history.pushState({},"",window.location.href)}},{key:"render",value:function(){var e=this.props,t=e.currentPaymentState,r=e.paymentFetchStatus,o=e.sharedIsUserLoggedIn,s=e.t;return o?t===S.tm.PAYMENT_VERIFY||this.props.paymentVerifyData?t!==S.tm.PAYMENT_VERIFY||r!==S.UK.SUCCESS&&r!==S.UK.FAILED||!this.props.paymentVerifyData?(0,n.jsx)(v.gb,{}):(0,n.jsxs)(i.kC,{flexDirection:"column",width:"100vw",minHeight:"100vh",bg:"surface",children:[(0,n.jsx)(a.Z,{}),(0,n.jsx)(i.xu,{my:[0,12,12],sx:{flex:1},children:(0,n.jsx)(W,$({},this.props))}),(0,n.jsx)(u.Z,{})]}):(0,n.jsxs)(i.kC,{flexDirection:"column",width:"100vw",minHeight:"100vh",bg:"surface",children:[(0,n.jsx)(a.Z,{}),(0,n.jsx)(i.xu,{my:[0,12,12],sx:{flex:1},children:(0,n.jsx)(v.HY,{iconName:"reader",message:s("noPaymentStatus")})}),(0,n.jsx)(u.Z,{})]}):(0,n.jsx)(i.kC,{height:"100vh",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(v._Y,{})})}}])&&Z(t.prototype,r),o&&Z(t,o),c}(o.Component),ne=(0,b.Z)("payment")(function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,t);var r,o,i,a=h(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).verifyPaymentSuccess=function(e){t.props.doPaymentVerifySuccess(e,t.props.currentCourseId||t.props.currentBundleId,t.props.allBundleCourseIds)},t.paymentVerifyCounter=0,t}return r=u,(o=[{key:"componentDidMount",value:function(){var e=window.location.href;!e.match(/\b(\w*errormsg\w*)\b/)&&!e.match(/\b(\w*status=false\w*)\b/)||this.paymentVerifyCounter?!e.match(/\b(\w*paidPrice\w*)\b/)&&!e.match(/\b(\w*status=true\w*)\b/)||this.paymentVerifyCounter||this.verifyPaymentSuccess(encodeURI(e)):this.props.doPaymentVerifyFailure(e),this.paymentVerifyCounter=1}},{key:"render",value:function(){var t=this.props.router.query,r=t.gatewayId,o=t.paymentId;return(0,n.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({},this.props,{gatewayId:this.props.orderSummaryData?this.props.orderSummaryData.gatewayCredentials.gatewayId:parseInt(r),paymentId:o||0}))}}])&&l(r.prototype,o),i&&l(r,i),u}(o.Component);return(0,c.withRouter)((0,s.$)("selectCurrentPaymentState","selectPaymentFetchStatus","selectPaymentVerifyData","selectPaymentVerifyError","selectCurrentCourseId","selectCurrentBundleId","selectCurrentCourseTitle","selectCurrentCourseDetails","selectCurrentBundleDetails","selectCurrentBundleSeoTitle","selectCurrentCourseSeoTitle","selectCurrentCoursePricing","selectCurrentBundleTitle","selectAllBundleCourseIds","selectOrderSummaryData","selectPurchaseData","selectOrderSummaryError","selectPaymentRedirectUrl","selectAddressesBundle","selectCountryList","selectSharedIsUserLoggedIn","selectCurrentProductType","selectUserPaymentSuccess","doPaymentVerifySuccess","doPaymentVerifyFailure","doVerifyPayment",t))}(re)),oe=r(1203),ie=r(81439),ae=r(267);function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ue(e,t,r[t])}))}return e}var ce=ae.Gj.pricing_model===T._n.SUBSCRIPTION_TYPE,le=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constructData=function(e,t){var r,n,o,i=e.orderSummaryData?null===(r=e.orderSummaryData)||void 0===r||null===(n=r.gatewayCredentials)||void 0===n?void 0:n.gatewayId:Number(t.gatewayId),a=e.currentPaymentState,u=e.paymentFetchStatus,s=e.paymentVerifyData,c=a===S.tm.PAYMENT_VERIFY&&u===S.UK.SUCCESS&&(null===e||void 0===e?void 0:e.userPaymentSuccess),l="awaited"===(null===s||void 0===s?void 0:s.status)||"awaited"===(null===t||void 0===t?void 0:t.status),d=("true"===(null===s||void 0===s?void 0:s.userPaymentSuccess)||(null===t||void 0===t?void 0:t.userPaymentSuccess))&&a===S.tm.PAYMENT_VERIFY&&u===S.UK.FAILED;return{gatewayId:i,paymentId:e.paymentId||0,isSubscriptionMode:ce,isPaymentSuccess:c,paymentErrorMessage:null===e||void 0===e||null===(o=e.paymentVerifyError)||void 0===o?void 0:o.errorMessage,paymentAwaited:l,verificationPending:d,fetchStatus:u,supportDetails:{mobileNumber:(null===ae.Gj||void 0===ae.Gj?void 0:ae.Gj.support_mobile)||(null===ae.Gj||void 0===ae.Gj?void 0:ae.Gj.SUPPORT_MOBILE)||"",email:(null===ae.Gj||void 0===ae.Gj?void 0:ae.Gj.support_email)||(null===ae.Gj||void 0===ae.Gj?void 0:ae.Gj.SUPPORT_EMAIL)||"",refundPolicy:(null===ae.Gj||void 0===ae.Gj?void 0:ae.Gj.refund_policy)||(null===ae.Gj||void 0===ae.Gj?void 0:ae.Gj.REFUND_POLICY)||""},paymentDetails:se({},t,{amount:(0,ie.Z)(Number((null===t||void 0===t?void 0:t.amount)||(null===t||void 0===t?void 0:t.paidPrice)))}),raiseTicketProps:{data:e.raiseTicketData,callbacks:e.raiseTicketCallbacks}}}},de=new le;var pe=function(e){var t=0;return(0,s.$)("selectCurrentPaymentState","selectPaymentFetchStatus","selectPaymentVerifyData","selectPaymentVerifyError","selectCurrentCourseId","selectCurrentBundleId","selectCurrentCourseTitle","selectCurrentCourseDetails","selectCurrentBundleDetails","selectCurrentBundleSeoTitle","selectCurrentCourseSeoTitle","selectCurrentCoursePricing","selectCurrentBundleTitle","selectAllBundleCourseIds","selectOrderSummaryData","selectPurchaseData","selectOrderSummaryError","selectPaymentRedirectUrl","selectAddressesBundle","selectCountryList","selectSharedIsUserLoggedIn","selectCurrentProductType","selectUserPaymentSuccess","doPaymentVerifySuccess","doPaymentVerifyFailure","doVerifyPayment",(function(r){var i=r.currentBundleId,a=r.currentCourseId,u=r.currentBundleSeoTitle,s=r.currentCourseSeoTitle,l=r.currentProductType,d=r.paymentVerifyData,p=S.Gj.pricing_model===T._n.SUBSCRIPTION_TYPE,f=(0,c.useRouter)().query,y=(null===f||void 0===f?void 0:f.courseSeoTitle)||(null===f||void 0===f?void 0:f.seo)||"",m=c.default.query.returnToPost&&c.default.query.returnToPost.toString()||"";return(0,o.useEffect)((function(){var e=window.location.href;!e.match(/\b(\w*errormsg\w*)\b/)&&!e.match(/\b(\w*status=false\w*)\b/)||t?!e.match(/\b(\w*paidPrice\w*)\b/)&&!e.match(/\b(\w*status=true\w*)\b/)||t||function(e){r.doPaymentVerifySuccess(e,r.currentCourseId||r.currentBundleId,r.allBundleCourseIds)}(encodeURI(e)):r.doPaymentVerifyFailure(e),t=1}),[]),(0,o.useEffect)((function(){!function(){if(r.currentPaymentState===S.tm.PAYMENT_VERIFY&&r.paymentFetchStatus===S.UK.SUCCESS&&S.Gj.order_tracking_script&&r.paymentVerifyData){var e=document.querySelector("head"),t=r.paymentVerifyData,n=t.paymentDate,o=t.amount,i=t.paymentTime,a=t.receiptNumber,u=t.courseTitle,s=S.Gj.order_tracking_script,c={productPrice:o,paymentTime:i,receiptNumber:a,courseTitle:u,paymentDate:n};if(!n||!o||!i||!a||!u)return;Object.keys(c).forEach((function(e){var t=c[e];isNaN(Number(t))||(t=Number(t)),"string"===typeof t&&(t="'".concat(t,"'")),s=(0,k.p8)(s,"".concat(e),t)}));var l=document.createRange().createContextualFragment(s);e&&l&&e.appendChild(l)}}()}),[]),(0,n.jsx)(e,{data:null===de||void 0===de?void 0:de.constructData(r,f),callbacks:{retryVerifyPayment:function(){r.purchaseData;var e,t,n=r.allBundleCourseIds,o={gatewayCredentials:{gatewayId:(null===r||void 0===r||null===(e=r.orderSummaryData)||void 0===e||null===(t=e.gatewayCredentials)||void 0===t?void 0:t.gatewayId)||Number(null===f||void 0===f?void 0:f.gatewayId)},transactionId:d&&d.receiptNumber};r.doVerifyPayment(d,i||a,n,o)},goToStore:function(){c.default.push(w.y4.store)},startLearning:function(){if(p)c.default.push(w.y4.store,w.XC.store());else if(m){var e=w.XC.newsfeedDetails({postId:m});c.default.replace(e,void 0,{shallow:!0})}else if(s&&u){var t={courseId:a||null,bundleId:i||null,courseType:l},r={productSeo:u||"",subProductSeo:s||""};c.default.replace({pathname:w.y4.bundleCourseDashboard,query:t},w.XC.bundleCourseDashboard(r),{shallow:!0})}else{var n=u||s||y;n?c.default.replace({pathname:w.y4.courseDashboard,query:{courseId:a||null,bundleId:i||null,courseType:l}},w.XC.courseDashboard({productSeo:n}),{shallow:!0}):c.default.replace(w.y4.myEnrollments,void 0,{shallow:!0})}}}})}))},fe=r(29418),ye=r(66441),me=r(53942),he=r(48395),be=r(21155),ve=r(21395);function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=function(){return(0,n.jsx)(ne,{})};var xe=(0,me.Z)(pe((function(e){return(0,n.jsx)(oe.Sw,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Se(e,t,r[t])}))}return e}({},e))})),he.R.FROM_POST_PAYMENT),Pe=(0,fe.Z)((0,ye.Z)((function(){return(0,n.jsx)(xe,{srcDetails:{supportType:be.kx.SUPPORT_TYPE_PAYMENT}})})));var je=function(){return(0,ve.vC)().isAppV4?(0,n.jsx)(Pe,{}):(0,n.jsx)(ge,{})}},40472:function(e,t,r){"use strict";var n=r(24246),o=(r(27378),r(55480)),i=r(14916),a=r(267),u=r(9078);t.Z=function(){var e=(0,u.$)("payment").t;return(0,n.jsx)(o.xu,{my:2,px:[4,0,0],children:(0,n.jsxs)(o.kC,{justifyContent:"space-between",flexWrap:"wrap",children:[(0,n.jsxs)(o.kC,{flexDirection:"column",children:[(a.Gj.SUPPORT_MOBILE||a.Gj.SUPPORT_EMAIL)&&(0,n.jsx)(i.xv,{variant:"overline",color:"onSurface.main",children:e("needHelp")}),(0,n.jsxs)(o.kC,{flexDirection:"row",mr:4,mb:2,children:[a.Gj.SUPPORT_MOBILE&&(0,n.jsx)(o.xu,{pr:2,mr:2,sx:a.Gj.SUPPORT_MOBILE&&a.Gj.SUPPORT_EMAIL?{borderRightWidth:1,borderRightStyle:"solid",borderRightColor:"border"}:{},children:(0,n.jsx)(i.xv,{variant:"body2",color:"onSurface.light",children:a.Gj.SUPPORT_MOBILE})}),a.Gj.SUPPORT_EMAIL&&(0,n.jsx)(i.xv,{variant:"body2",color:"secondary.dark",children:a.Gj.SUPPORT_EMAIL})]})]}),a.Gj.refund_policy?(0,n.jsx)(o.kC,{flexDirection:"column",justifyContent:"flex-end",mb:2,children:(0,n.jsx)(i.xv,{variant:"body2",children:(0,n.jsx)(o.rU,{href:a.Gj.refund_policy,color:"secondary.dark",children:e("refundPolicy")})})}):null]})})}},29418:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var n=r(35230),o=r.n(n),i=r(24246),a=r(86677),u=r(27378),s=r(38906),c=r(79471),l=r(14916),d=r(23998),p=r(53850),f=r(11959),y=r(267),m=r(95045);function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,r,n,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,o)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}function P(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?h(e):t}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return P(this,r)}}function w(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(s,t);var r,n,o,u=C(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).doUserVerifications=function(){if(t.props.userLoginStatus===d.zU.LOGGED_IN_MOBILE_VERIFICATION_PENDING){if("/learn/account/otp"===t.props.router.pathname)return;a.default.push(p.y4.otp,p.XC.otp())}else if(t.props.userLoginStatus===d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING&&t.props.emailVerificationType===d.QF.EMAIL_LINK){if("/learn/account/email-verification"===t.props.router.pathname)return;a.default.push(p.y4.emailVerification,p.XC.emailVerification())}else if(t.props.userLoginStatus===d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING&&t.props.emailVerificationType===d.QF.EMAIL_OTP){if("/learn/account/otp"===t.props.router.pathname)return;a.default.push(p.y4.otp,p.XC.otp())}else t.props.navigationCurrentScreen===f.i_.SEGMENT||t.props.navigationCurrentScreen===f.i_.SIGNIN||t.props.navigationCurrentScreen===f.i_.PROFILE_BUILDER||!y.Gj.segment_enabled||t.props.userSegmentId||t.props.userLoginStatus!==d.zU.LOGGED_IN_VERIFIED&&t.props.userLoginStatus!==d.zU.NOT_LOGGED_IN?t.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&t.props.isProfileBuilderEnabled&&!t.props.isStudentFilledProfile&&t.props.navigationCurrentScreen!==f.i_.PROFILE_BUILDER&&(void 0!==t.props.inProgressPayment?a.default.push(p.y4.profileFields,p.XC.profileFields()):a.default.replace(p.y4.profileFields,p.XC.profileFields(),{shallow:!0})):t.props.userLoginStatus===d.zU.NOT_LOGGED_IN&&y.Gj.pricing_model===m._n.SUBSCRIPTION_TYPE?a.default.push(p.y4.segment,p.XC.segment()):t.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&a.default.replace(p.y4.segment,p.XC.segment(),{shallow:!0})},t.doUserVerifications=t.doUserVerifications.bind(h(t)),t}return r=s,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,r=e.navigationCurrentScreen,n=e.doSendNavChangeEvent,o=e.doSetCurrentAccessingLesson;if(this.doUserVerifications(),n(p.ZP[t.pathname],r,(new Date).getTime(),x({},t.query),!1,!0),console.log(p.ZP[t.pathname]),t.pathname===p.y4.lessonPlayer&&!t.query.courseId){var i=c.$2,a=t.query.sectionId,u=t.query.lessonId;o({courseId:i,sectionId:a,lessonId:u,autoScrollLessonTs:(new Date).getTime()},u)}}},{key:"componentDidUpdate",value:function(e){this.props.navigationCurrentScreen===f.i_.SEGMENT||this.props.navigationCurrentScreen===f.i_.SIGNIN||this.props.navigationCurrentScreen===f.i_.PROFILE_BUILDER||!y.Gj.segment_enabled||this.props.userSegmentId||this.props.userLoginStatus!==d.zU.LOGGED_IN_VERIFIED&&this.props.userLoginStatus!==d.zU.NOT_LOGGED_IN||(this.props.userLoginStatus===d.zU.NOT_LOGGED_IN&&y.Gj.pricing_model===m._n.SUBSCRIPTION_TYPE?a.default.push(p.y4.segment,p.XC.segment()):this.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&a.default.replace(p.y4.segment,p.XC.segment(),{shallow:!0})),void 0!==this.props.inProgressPayment&&this.doUserVerifications(),void 0!==this.props.realUserLoginStatus&&(this.props.inProgressPayment||this.props.navigationCurrentScreen===f.i_.CHECKOUT||this.props.doSetRealUserLoginStatus()),this.props.isAuthTokenExpired&&e.isAuthTokenExpired!==this.props.isAuthTokenExpired&&((0,l.FN)({message:"Your login session is expired."}),this.props.doRestartAuthentication(),a.default.push(p.y4.signin))}},{key:"render",value:function(){return this.props.sharedIsSchoolLocked&&this.props.sharedIsUserLoggedIn?(0,i.jsx)(l.R7,{doSignoutUser:this.props.doSignoutUser}):(0,i.jsx)(e,x({},this.props))}}])&&v(r.prototype,n),o&&v(r,o),s}(u.Component);return t.getInitialProps=function(){var e,t=(e=o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isServer,e.abrupt("return",{isServer:r});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){b(i,n,o,a,u,"next",e)}function u(e){b(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),(0,a.withRouter)((0,s.$)("doSignoutUser","doSendNavChangeEvent","doSetCurrentAccessingLesson","doRestartAuthentication","selectSharedIsUserLoggedIn","selectIsAuthTokenExpired","selectNavigationCurrentScreen","selectSharedIsSchoolLocked","selectSharedIsUserLoggedIn","selectUserLoginStatus","selectIsProfileBuilderEnabled","selectIsStudentFilledProfile","selectEmailVerificationType","selectUserSegmentId","selectInProgressPayment","selectRealUserLoginStatus","doSetRealUserLoginStatus",t))}}},function(e){e.O(0,[5639,8270,1699,5987,6730,5356,9428,7740,7326,6441,3345,3942,7225,9774,2888,179],(function(){return t=22246,e(e.s=t);var t}));var t=e.O();_N_E=t}]);