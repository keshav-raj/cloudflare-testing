(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{82429:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn/communities/[communityTitle]/[postId]",function(){return n(1081)}])},1081:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var s=n(24246),i=n(27378),o=n(29418),r=n(28862),u=n(37805),c=n(95045),a=n(3612),l=n(83553),m=n(86677),d=n(55480),p=n(53850),f=n(28024),y=n(14916),h=n(9078),x=n(88038),S=n(55714),C=n(77986),j=n(2665),E=n(79136),b=n(50141),g=n(91894),I=n(75844);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){T(e,t,n[t])}))}return e}var P=(0,u.Z)((function(e){e.discussionPostId,e.postId;var t=e.isMember,n=(0,h.$)("community").t;return null===e.discussionData?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.kC,{py:3,justifyContent:"space-between",flexWrap:"wrap",children:[(0,s.jsx)(f.X6,{textTransform:"capitalize",variant:"h6",color:"onBackground.main",children:n("discussions")}),(0,s.jsx)(d.kC,{justifyContent:"center",flexDirection:"column",flexWrap:"wrap",my:[3,0,0],children:(0,s.jsx)(d.xu,{children:t?(0,s.jsx)(g.Z,{title:n("addComment"),iconName:b.a.add,type:E.b0.DISCUSSION_ASK,isLessonLevel:!1,allowWriteAccess:e.discussionEnrollmentType===E.ri.PURCHASED,isButton:!0,currentPostId:e.discussionPostId,currentPostTitle:e.discussionPostTitle}):null})})]}),(0,s.jsx)(I.Z,U({},e,{isCommentSection:!1,isLessonLevel:!1,setPlayerFocusState:function(){return null}}))]})})),_=n(18115),w=(0,r.Z)((0,u.Z)((function(e){var t=e.communitiesFetchStatus,n=e.currentCommunityDetails,o=e.doFetchCommunityPostDetails,r=e.currentCommunityPostId,u=e.currentCommunityPost,E=(e.discussionPostId,e.communityState),b=e.communityError,g=e.userRoleType,I=e.sharedUserId,T=e.doDeleteCommunityPost,U=(0,h.$)("community").t,w=(0,i.useState)(!!m.default.query.editMode||!1),D=w[0],O=w[1];if((0,i.useEffect)((function(){r&&n&&o(n.id,r)}),[r,n]),(0,i.useEffect)((function(){t===c.UK.SUCCESS&&E===l.RW.REMOVE_USER&&((0,f.FN)({message:U("memberRemoveMessage")}),window.location.reload()),t===c.UK.SUCCESS&&E===l.RW.BAN_USER&&((0,f.FN)({message:U("memberBannedMessage")}),window.location.reload()),t===c.UK.SUCCESS&&E===l.RW.UNBAN_USER&&((0,f.FN)({message:U("memberUnbannedMessage")}),window.location.reload()),t!==c.UK.FAILED||E!==l.RW.REMOVE_USER&&E!==l.RW.BAN_USER||(console.log("communityError ",b),(0,f.FN)({message:b.errorMessage})),t===c.UK.SUCCESS&&E===l.RW.UPDATE_POST&&((0,f.FN)({message:U("postUpdatedSuccess")}),O(!1)),t===c.UK.SUCCESS&&E===l.RW.DELETE_POST&&((0,f.FN)({message:U("postDeleteSuccess")}),m.default.push({pathname:p.y4.communityDashboard,query:{communityTitle:n.slug}},p.XC.communityDashboard({communityTitle:n.slug})))}),[t,E]),!u&&t!==c.UK.FAILED||t===c.UK.IN_PROGRESS)return(0,s.jsx)(f.gb,{});if(t===c.UK.FAILED)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.wp,{}),(0,s.jsx)(y.jj,{errorCode:b.errorCode,errorText:b.errorMessage}),(0,s.jsx)(S.$_,{})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(x.default,{children:[(0,s.jsx)("meta",{name:"description",content:n.shortDescription||""}),(0,s.jsx)("title",{children:n.title})]}),(0,s.jsx)(S.wp,{}),(0,s.jsx)(f.W2,{children:(0,s.jsx)(d.xu,{sx:{minHeight:"80vh",my:10},children:(0,s.jsxs)(d.xu,{sx:{maxWidth:744},children:[(0,s.jsx)(d.xu,{sx:{ml:1,mb:6},children:(0,s.jsx)(C.ck,{data:[{title:U("common:home"),onClick:function(){return m.default.push(p.y4.home)}},{title:U("community"),onClick:function(){return m.default.push(p.y4.communities)}},{title:n.title,onClick:function(){return m.default.push({pathname:p.y4.communityDashboard,query:{communityTitle:n.slug}},p.XC.communityDashboard({communityTitle:n.slug}))}},{title:u.title}]})}),D?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(_.Z,{isEditMode:!0,postTypeId:u.postTypeId,currentTab:Object.keys(l.SV).reduce((function(e){if(u.postTypeId===l.SV[e])return e})),currentTitle:u.title,currentContent:u.publishedContent,postId:u.id,onCancel:function(){return O(!1)}})}):(0,s.jsx)(j.Z,{onDeletePost:function(){T({communityId:n.id,postId:u.id})},sharedUserId:I,postAuthorId:u.user&&u.user.id,onClickEdit:function(){return O(!0)},postTypeId:u.postTypeId,noImage:u.postTypeId!==l.SV.ARTICLE,heading:u.title,description:u.publishedContent,title:u.user.name,image:u.featuredImage,logo:u.user.profilePhoto,postCount:u.totalDiscussions,memberCount:0,width:"auto",handleClick:function(){return null},memberId:u.user.id,isShowMenu:g===a.xZ.ROOT_ADMIN||g===a.xZ.SCHOOL_ADMIN,userStatus:u.user.status,descriptionLineClamp:"none",isPinned:u.isPinned,id:u.id}),(0,s.jsx)(d.xu,{mb:8}),(0,s.jsx)(P,{isMember:n.isMember,postId:r})]})})}),(0,s.jsx)(S.$_,{})]})}))),D=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(w,{})})},O=(0,o.Z)((function(){return(0,s.jsx)(D,{})}))}},function(e){e.O(0,[1362,4794,9671,8270,1699,597,6730,7326,9587,2006,7986,8319,2665,8115,9774,2888,179],(function(){return t=82429,e(e.s=t);var t}));var t=e.O();_N_E=t}]);