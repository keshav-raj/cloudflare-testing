"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5457],{18120:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(24246),i=n(27378),o=n(55480),a=n(86677),s=n(14916),u=n(71117),c=n(96627),l=n(267),d=n(23998),f=n(2113),m=n(9078),p=n(53850),h=n(43894);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(e){var t=function(t){xe(!1);var n=t.mail,r=t.name,i=t.id,o=t.accessToken,a=t.loginType;te(n,r,i,o,a,e.segmentId,e.segmentPath)},n=function(e){xe(!1),ge(z("".concat(e)))},g=(0,a.useRouter)(),S=(0,i.useState)(),x=S[0],j=S[1],I=(0,i.useState)(""),E=I[0],P=I[1],C=(0,i.useState)(),v=C[0],b=C[1],_=(0,i.useState)(),w=_[0],O=_[1],N=(0,i.useState)(),G=N[0],L=N[1],R=(0,i.useState)(!1),A=R[0],U=R[1],k=(0,i.useState)(!1),M=k[0],T=k[1],D=(0,i.useState)(!1),B=D[0],F=D[1],q=(0,i.useRef)({}),V=window&&window.location.origin&&!window.location.origin.includes("learnyst.com")&&!window.location.origin.includes("localhost:"),$=function(e,t,n){q.current.reset(),j(e),P(t),b(n),T(!0),q.current.execute()},X=function(e,t,n,r,i){q.current.reset(),j(e),P(t),b(n),r&&(O(r),L(i),U(!0)),T(!1),q.current.execute()},z=(0,m.$)(["account","invite"]).t,Y=p.y4.store,H=p.y4.forgotPassword,W=p.y4.otp,K=(p.y4.profileBuilder,p.y4.emailVerification),Q=p.y4.profileFields,Z=e.authErrorMessage,J=e.doSigninUser,ee=e.doSignupUser,te=e.doSocialSignin,ne=e.userLoginStatus,re=e.isSignup,ie=(e.doRequestConfirmationEmail,e.doCheckEmailConfirmationStatus,e.authApiStatus),oe=e.supportedSignupTypes,ae=e.isProfileBuilderEnabled,se=e.isStudentFilledProfile,ue=e.authState,ce=(e.doSignoutUser,e.isUserLoggedIn,e.sharedUserEmail,e.postSigninRoute),le=e.withInviteCode,de=e.emailVerificationType,fe=e.isEmailVerified,me=e.inProgressPayment,pe=(e.doSetPostSigninRoute,e.doSetInProgressPayment),he=(e.segmentId,e.segmentPath,y(i.useState(),2)),ge=(he[0],he[1]),ye=y(i.useState(!1),2),Se=ye[0],xe=ye[1],je=a.default.query,Ie=je.code,Ee=je.source||"link",Pe=y(i.useState(Ie),2),Ce=Pe[0],ve=Pe[1];return(0,i.useEffect)((function(){var t=g.query;if(t&&t.signInToPay){pe();var n=parseInt(t.signInToPay.toString()),r=parseInt(t.priceId.toString());console.log("query ",t,n,r),e.postSigninRoute||e.doSetPostSigninRoute({href:{pathname:p.y4.checkout,query:{courseId:n,priceId:r}},as:p.XC.checkout({courseId:n,priceId:r})})}}),[]),(0,i.useEffect)((function(){if(re&&l.Gj.signup_tracking_script&&l.Gj.signup_tracking_script.baseScript){var e=document.querySelector("head"),t=document.createRange().createContextualFragment(l.Gj.signup_tracking_script.baseScript);e&&e.appendChild(t)}}),[]),(0,i.useEffect)((function(){ue===d.fD.SIGNING_UP&&re&&ie===d.mP.SUCCESS&&(l.Gj.signup_tracking_script&&l.Gj.signup_tracking_script.eventScript&&new Function(l.Gj.signup_tracking_script.eventScript)())})),(0,i.useEffect)((function(){ne===d.zU.SIGNUP_TO_PAY_INPROGRESS?ce&&me?a.default.replace(ce.href,ce.as):a.default.replace(Y,p.XC.store()):ne===d.zU.LOGGED_IN_VERIFIED?ae&&!se?a.default.replace(Q,p.XC.profileFields()):ce?a.default.replace(ce.href,ce.as,{shallow:!0}):a.default.replace(Y,p.XC.store(),{shallow:!0}):ne!==d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING||de!==d.QF.EMAIL_LINK||fe?ne!==d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING||de!==d.QF.EMAIL_OTP||fe?ne===d.zU.LOGGED_IN_MOBILE_VERIFICATION_PENDING&&a.default.replace(W,p.XC.otp(),{shallow:!0}):a.default.replace(W,p.XC.otp(),{shallow:!0}):a.default.replace(K,p.XC.emailVerification(),{shallow:!0})})),(0,i.useEffect)((function(){window.addEventListener("message",(function(e){"MM:3PCunsupported"===e.data?F(!0):"MM:3PCsupported"===e.data&&F(!1)}),!1)}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.J9,{initialValues:{email:"",userName:"",password:"",newPassword:"",referralCode:Ce},validateOnChange:!1,validateOnBlur:!1,validationSchema:re?l.Gj.authentication_types===d.$B.EMAIL?(0,h.object)({email:(0,h.string)().email(z("invalidEmail")).required(z("emailRequired")),newPassword:(0,h.string)().trim().required(z("passwordRequired")).min(d.fX.MIN_PASSWORD_LENGTH,z("minimumCharacters"))}):(0,h.object)({userName:(0,h.string)().required(z("userNameRequired")).min(d.we.MIN_USERNAME_LENGTH,z("minimumUserNameCharacters")).max(d.we.MAX_USERNAME_LENGTH,z("maximumUserNameCharacters")).matches(/^[a-zA-Z0-9\-\/]+$/,z("alphaNumericAllowed")),newPassword:(0,h.string)().trim().required(z("passwordRequired")).min(d.fX.MIN_PASSWORD_LENGTH,z("minimumCharacters"))}):l.Gj.authentication_types===d.$B.EMAIL?(0,h.object)({email:(0,h.string)().email(z("invalidEmail")).required(z("emailRequired")),password:(0,h.string)().trim().required(z("passwordRequired"))}):(0,h.object)({userName:(0,h.string)().required(z("userNameRequired")),password:(0,h.string)().trim().required(z("passwordRequired"))}),onSubmit:function(e,t){t.setSubmitting;if(re){if(le)return void(l.Gj.authentication_types===d.$B.EMAIL&&Ee?X(e.email,e.newPassword,null,e.referralCode,Ee):l.Gj.authentication_types===d.$B.USER_NAME&&Ee&&X("".concat(e.userName,"@username.com"),e.newPassword,e.userName,e.referralCode,Ee));l.Gj.authentication_types===d.$B.EMAIL?X(e.email,e.newPassword,null):l.Gj.authentication_types===d.$B.USER_NAME&&X("".concat(e.userName,"@username.com"),e.newPassword,e.userName)}else l.Gj.authentication_types===d.$B.EMAIL?$(e.email,e.password,null):l.Gj.authentication_types===d.$B.USER_NAME&&$(null,e.password,e.userName)},children:function(e){var i=e.values,a=e.handleChange,m=e.handleBlur,p=e.handleSubmit,h=e.errors,g=e.touched;return(0,r.jsx)(r.Fragment,{children:ne===d.zU.NOT_LOGGED_IN&&(0,r.jsx)(c.l0,{onSubmit:p,noValidate:!0,children:(0,r.jsx)(f.or,{children:(0,r.jsxs)(o.kC,{flexDirection:"column",sx:{minWidth:[18,19,19],maxWidth:[18,19,19]},justifyContent:"center",mb:[2],children:[oe&d._4.EMAIL_LOGIN?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.xu,{mt:[4],children:(0,r.jsx)(s.nv,{autoFocus:!0,label:l.Gj.authentication_types===d.$B.EMAIL?z("email"):z("userName"),name:l.Gj.authentication_types===d.$B.EMAIL?"email":"userName",type:l.Gj.authentication_types===d.$B.EMAIL?"email":"text",required:!0,placeholder:l.Gj.authentication_types===d.$B.EMAIL?z("emailPlaceholder"):z("userNamePlaceholder"),onChange:a,value:l.Gj.authentication_types===d.$B.EMAIL?i.email:i.userName,onBlur:m,error:l.Gj.authentication_types===d.$B.EMAIL?h.email:h.userName,touched:l.Gj.authentication_types===d.$B.EMAIL?g.email:g.userName})}),(0,r.jsxs)(o.xu,{mt:[4],children:[(0,r.jsx)(s.nv,{label:z("password"),name:re?"newPassword":"password",type:"password",required:!0,placeholder:z("passwordPlaceholder"),onChange:a,value:re?i.newPassword:i.password,onBlur:m,error:re?h.newPassword:h.password,touched:re?g.newPassword:g.password}),le&&(0,r.jsx)(r.Fragment,{children:Ce?(0,r.jsxs)(o.kC,{py:3,sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(o.kC,{children:[(0,r.jsx)(s.xv,{variant:"body1",children:z("invite:referralCodeApplied")}),(0,r.jsx)(o.xu,{ml:1}),(0,r.jsx)(s.xv,{variant:"body1",color:"primary.main",children:Ce})]}),(0,r.jsx)(o.xu,{onClick:function(){return ve("")},children:(0,r.jsx)(s.xv,{variant:"caption2",children:z("remove")})})]}):(0,r.jsx)(o.xu,{mt:4,children:(0,r.jsx)(s.nv,{label:z("invite:referralCode"),name:"referralCode",type:"text",required:!0,placeholder:z("referralCodePlaceholder"),onChange:a,value:i.referralCode})})}),ie===d.mP.FAILED&&(0,r.jsx)(o.xu,{my:2,children:(0,r.jsx)(s.xv,{color:"error",variant:"body2",children:Z})})]}),(0,r.jsx)(o.xu,{mt:[4],height:[6],children:(0,r.jsx)(s.zx,{text:z(re?"account:signUpButton":"signIn"),buttonType:"solid",colorVariant:ie===d.mP.INPROGRESS?"disabled":"primary",type:"submit",buttonSizeVariant:"large",height:"100%",width:"100%",disabled:ie===d.mP.INPROGRESS,isLoading:ue===d.fD.SIGNING_IN&&ie===d.mP.INPROGRESS})}),re&&(0,r.jsx)(o.kC,{py:[1],sx:{alignItems:"center",justifyContent:"center"},flexDirection:"row",children:(l.Gj.TERMS_CONDITION||l.Gj.PRIVACY_POLICY)&&(0,r.jsxs)(s.xv,{color:"onSurface.light",variant:"body2",sx:{wordWrap:"break-word"},children:[z("acceptTerms")," ","",(0,r.jsxs)(o.kC,{flexDirection:"row",justifyContent:"center",children:[l.Gj.TERMS_CONDITION&&(0,r.jsx)(s.rU,{variant:"secondary",isOpenNewPage:!0,href:l.Gj.TERMS_CONDITION,children:(0,r.jsx)(s.xv,{variant:"body2",textDecorationLine:"underline",children:z("terms")})}),l.Gj.TERMS_CONDITION&&l.Gj.PRIVACY_POLICY&&(0,r.jsxs)(s.xv,{color:"onSurface.light",variant:"body2",children:["\xa0",z(" & "),"\xa0"]}),l.Gj.PRIVACY_POLICY&&(0,r.jsx)(s.rU,{variant:"secondary",isOpenNewPage:!0,href:l.Gj.PRIVACY_POLICY,children:(0,r.jsx)(s.xv,{variant:"body2",textDecorationLine:"underline",children:z("privacyPolicy")})})]})]})}),!re&&(0,r.jsx)(o.xu,{mt:[1],alignSelf:"center",children:(0,r.jsx)(s.rU,{variant:"normal",href:H,children:(0,r.jsx)(s.xv,{textDecorationLine:"underline",variant:"body2",children:z("forgotPassword")})})})]}):null,!(l.Gj.authentication_types===d.$B.USER_NAME)&&(0,r.jsx)(r.Fragment,{children:oe&d._4.GOOGLE_LOGIN||oe&d._4.FACEBOOK_LOGIN||oe&d._4.APPLE_LOGIN?(0,r.jsx)(o.xu,{my:[2],alignSelf:"center",children:(0,r.jsx)(s.xv,{variant:"body1",children:z("or")})}):null}),!(l.Gj.authentication_types===d.$B.USER_NAME)&&(0,r.jsxs)(o.kC,{flexDirection:["column","column","column"],justifyContent:"center",children:[oe&d._4.GOOGLE_LOGIN?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.xu,{onClick:function(){xe(!0)},children:(0,r.jsx)(u.NK,{type:"light",onSuccess:t,onFailure:n,disabled:Se})}),B&&(0,r.jsx)(o.xu,{mt:2,children:(0,r.jsx)(s.xv,{color:"error",variant:"body2",children:z("cookiesBlockedMessage")})})]}):null,oe&d._4.FACEBOOK_LOGIN?(0,r.jsx)(o.kC,{flexDirection:"row",mt:[4],sx:{borderRadius:[1]},children:(0,r.jsx)(o.xu,{width:"100%",onClick:function(){xe(!0)},children:(0,r.jsx)(u.Fx,{onSuccess:t,onFailure:n,disabled:Se})})}):null,(0,r.jsx)(o.kC,{flexDirection:"row",mt:[4],sx:{borderRadius:[1]},children:oe&d._4.APPLE_LOGIN?(0,r.jsx)(o.xu,{width:"100%",children:(0,r.jsx)(u.XL,{type:"light",onSuccess:t,onFailure:n})}):null})]})]})})})})}}),(0,r.jsx)(u.Iy,{recaptchaRef:q,onChangeRecaptcha:function(t){t&&(M?J(x,E,v,t,V,e.inProgressPayment,e.segmentId,e.segmentPath):A?ee(x,E,v,w,G,t,V):ee(x,E,v,null,null,t,V,e.segmentId,e.segmentPath,e.inProgressPayment))}}),(0,r.jsx)("iframe",{title:"Third-Party Cookies",src:"https://mindmup.github.io/3rdpartycookiecheck/start.html",style:{display:"none"}})]})},x=n(38906);function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function C(e,t){return!t||"object"!==b(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}var b=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}var w=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(s,t);var n,i,o,a=_(s);function s(){return j(this,s),a.apply(this,arguments)}return n=s,i=[{key:"render",value:function(){return(0,r.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}({},this.props))}}],i&&I(n.prototype,i),o&&I(n,o),s}(i.Component);return(0,x.$)("selectSupportedSignupTypes","selectUserLoginStatus","selectAuthApiStatus","selectAuthState","selectIsProfileBuilderEnabled","selectIsStudentFilledProfile","selectUserLoginType","selectIsOnline","selectAuthApiStatus","selectAuthErrorMessage","selectSharedIsUserLoggedIn","selectNavigationPrevScreen","selectSharedUserEmail","selectPostSigninRoute","selectEmailVerificationType","selectIsEmailVerified","doSocialSignin","doRestartAuthentication","doClearAuthData","doSignupUser","doSigninUser","doSignoutUser","doRequestConfirmationEmail","doCheckEmailConfirmationStatus","selectInProgressPayment","doSetInProgressPayment","doSetPostSigninRoute","selectUserSegmentId","selectCurrentSegment","selectCurrentSegmentPath","selectRealUserLoginStatus","selectUserLanguageId","selectLanguageFetchStatus",t)}((function(e){var t=e.doSigninUser,n=e.doSignupUser,i=e.doSocialSignin,u=e.authErrorMessage,c=e.userLoginStatus,f=e.isSignup,h=e.doRequestConfirmationEmail,g=e.doCheckEmailConfirmationStatus,y=e.authApiStatus,x=e.supportedSignupTypes,j=e.isProfileBuilderEnabled,I=e.isStudentFilledProfile,E=e.isUserLoggedIn,P=e.authState,C=(e.doRestartAuthentication,e.doSignoutUser),v=e.sharedUserEmail,b=e.postSigninRoute,_=e.withInviteCode,w=e.emailVerificationType,O=e.isEmailVerified,N=e.inProgressPayment,G=e.doSetPostSigninRoute,L=e.doSetInProgressPayment,R=e.currentSegment,A=e.currentSegmentPath,U=e.realUserLoginStatus,k=e.userLanguageId,M=e.languageFetchStatus,T=e.sharedIsUserLoggedIn,D=(0,a.useRouter)().query,B=(0,m.$)("account").t;if(P===d.fD.FETCHING_CONFIG_DATA){if(y===d.mP.INPROGRESS)return(0,r.jsx)(s.gb,{});if(y===d.mP.FAILED)return(0,r.jsx)(s.jj,{errorCode:666})}return k&&T&&(M===d.mP.FAILED&&a.default.back(),M===d.mP.INPROGRESS)?(0,r.jsx)(s.gb,{}):y!==d.mP.INPROGRESS||P!==d.fD.SIGNING_UP&&P!==d.fD.SIGNING_IN?(0,r.jsx)(o.xu,{backgroundColor:"surface",children:(0,r.jsx)(o.kC,{flexDirection:["row"],children:(0,r.jsxs)(o.kC,{width:["100%","100%","100%"],minHeight:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[D&&!D.signInToPay&&(0,r.jsx)(o.kC,{bg:"surface",pt:[2],pr:[1],sx:{position:"absolute",right:[1],top:[1]},children:(0,r.jsx)(o.xu,{mr:[4],children:(0,r.jsx)(s.zx,{buttonType:"text",colorVariant:"secondary",text:B("explore"),onClick:function(){a.default.push(p.y4.store,p.XC.store())}})})}),(0,r.jsxs)(o.kC,{flexDirection:"column",sx:{minWidth:[18,19,19],maxWidth:[18,19,19]},justifyContent:"center",mb:2,children:[l.Gj.SCHOOL_LOGO?(0,r.jsx)(o.kC,{maxWidth:20,height:[12],mt:[12,4,4],alignSelf:"center",children:(0,r.jsx)(s.Ee,{alt:"logo",src:l.Gj.SCHOOL_LOGO,objectFit:"contain"})}):(0,r.jsx)(o.kC,{alignSelf:"center",children:(0,r.jsx)(s.X6,{textAlign:"center",variant:"h3",color:"onSurface.light",children:l.Gj.NAME})}),(0,r.jsx)(o.kC,{justifyContent:"center",mt:[5],children:(0,r.jsx)(s.X6,{variant:"h2",children:f?B("createAccount"):c===d.zU.NOT_LOGGED_IN?B("welcomeBack"):null})}),(0,r.jsxs)(o.kC,{justifyContent:"center",mt:1,children:[(0,r.jsx)(s.xv,{variant:"body1",color:"onSurface.light",children:f?B("accountExists"):c===d.zU.NOT_LOGGED_IN?B("noAccount"):null}),(0,r.jsx)(o.xu,{mr:1}),(0,r.jsx)(s.rU,{variant:"primary",onClick:function(){D&&D.signInToPay?f?a.default.replace({pathname:p.y4.signin,query:D},{shallow:!0}):a.default.replace({pathname:p.y4.signup,query:D},{shallow:!0}):f?a.default.push(p.y4.signin,p.XC.signin()):a.default.push(p.y4.signup,p.XC.signup())},textTransform:"capitalize",isTextLink:!0,children:(0,r.jsx)(s.xv,{variant:"body2",textDecorationLine:"underline",color:"primary.main",children:B(f?"signIn":"account:signUpButton")})})]})]}),(0,r.jsx)(S,{doSetPostSigninRoute:G,doSetInProgressPayment:L,inProgressPayment:N,doSigninUser:t,doSignupUser:n,doSocialSignin:i,authErrorMessage:u,userLoginStatus:c,isSignup:f,doRequestConfirmationEmail:h,doCheckEmailConfirmationStatus:g,authApiStatus:y,supportedSignupTypes:x,isProfileBuilderEnabled:j,isStudentFilledProfile:I,isUserLoggedIn:E,authState:P,doSignoutUser:C,sharedUserEmail:v,postSigninRoute:b,withInviteCode:_,emailVerificationType:w,isEmailVerified:O,segmentId:R,segmentPath:A,realUserLoginStatus:U})]})})}):(0,r.jsx)(s.gb,{})}))},96664:function(e,t,n){n.d(t,{UK:function(){return d}});var r=n(27378);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,a={status:"not-requested",loading:!1,result:void 0,error:void 0},s={status:"loading",loading:!0,result:void 0,error:void 0},u=function(){},c={initialState:function(e){return e&&e.executeOnMount?s:a},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return s},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:u,onError:u},l=function(e,t,n){!t&&(t=[]);var a=function(e){return i({},c,{},e)}(n),s=(0,r.useState)(null),u=s[0],l=s[1],d=function(e){var t=(0,r.useState)((function(){return e.initialState(e)})),n=t[0],o=t[1],a=(0,r.useCallback)((function(){return o(e.initialState(e))}),[o,e]),s=(0,r.useCallback)((function(){return o(e.setLoading(n))}),[n,o]),u=(0,r.useCallback)((function(t){return o(e.setResult(t,n))}),[n,o]),c=(0,r.useCallback)((function(t){return o(e.setError(t,n))}),[n,o]),l=(0,r.useCallback)((function(e){return o(i({},n,{},e))}),[n,o]);return{value:n,set:o,merge:l,reset:a,setLoading:s,setResult:u,setError:c}}(a),f=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),function(){return e.current}}(),m=function(){var e=(0,r.useRef)(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),p=function(e){return f()&&m.is(e)},h=function(e){var t=(0,r.useRef)(e);return o((function(){t.current=e})),(0,r.useCallback)((function(){return t.current}),[t])}((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=function(){try{return Promise.resolve(e.apply(void 0,n))}catch(t){return Promise.reject(t)}}();return l(n),m.set(i),d.setLoading(),i.then((function(e){p(i)&&d.setResult(e),a.onSuccess(e,{isCurrent:function(){return m.is(i)}})}),(function(e){p(i)&&d.setError(e),a.onError(e,{isCurrent:function(){return m.is(i)}})})),i})),g=(0,r.useCallback)((function(){return h().apply(void 0,arguments)}),[h]),y=!f();return(0,r.useEffect)((function(){var e=function(){return h().apply(void 0,t)};y&&a.executeOnMount&&e(),!y&&a.executeOnUpdate&&e()}),t),i({},d.value,{set:d.set,merge:d.merge,reset:d.reset,execute:g,currentPromise:m.get(),currentParams:u})};var d=function(e,t){return l(e,[],i({},t,{executeOnMount:!1,executeOnUpdate:!1}))}}}]);