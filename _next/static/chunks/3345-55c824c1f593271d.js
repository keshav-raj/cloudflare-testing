"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3345],{56419:function(e,t,o){o.d(t,{v:function(){return u},P:function(){return d}});var n=o(24246),r=o(27378),i=o(45356),l=o(27247),s=o(9078),a=o(72022),c=o(27953);var u=function(e){var t,o=e.data,r=e.callbacks,u=o.tickets,d=(0,s.$)("support").t,p=r.goToStore,v=r.goToRaiseTicketPage,x=r.goToAccount,h=[{title:d("home"),onClick:function(){p()}},{title:d("account"),onClick:function(){x()}},{title:d("supports.heading")}];return(0,n.jsxs)(a.xu,{children:[(0,n.jsx)(a.xu,{pb:8,children:(0,n.jsx)(i.Oo,{data:h})}),(0,n.jsxs)(a.kC,{sx:{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",rowGap:1},children:[(0,n.jsxs)(a.kC,{sx:{alignItems:"center",columnGap:2},children:[(0,n.jsx)(i.xv,{category:["h5","h3","h3"],children:d("supportTickets")}),(0,n.jsx)(l.Z,{variant:"subtle",badgeColor:"basic",badgeShape:"roundedEdges",text:"".concat(u.length)})]}),(0,n.jsx)(i.zx,{onClick:function(){v()},size:"small",children:(0,n.jsxs)(a.kC,{sx:{alignItems:"center",columnGap:2},children:[(0,n.jsx)(i.tv,{icon:c.q.plus,size:20,color:"control"}),(0,n.jsx)(i.xv,{buttonFont:"small",status:"control",children:null===(t=d("raiseATicket"))||void 0===t?void 0:t.toLocaleUpperCase()})]})})]})]})};var d=function(e){var t=e.ticketStatus,o=(0,s.$)("support").t,l=(0,r.useMemo)((function(){var e;return null===(e=o("ticketStatus.".concat(t)))||void 0===e?void 0:e.toLocaleUpperCase()}),[t]),c=(0,r.useMemo)((function(){switch(t){case 1:return"accent";case 2:return"success";case 3:return"accent";case 4:return"success";case 5:return"basic";case 13:return"secondary";default:return"basic"}}),[t]);return(0,n.jsx)(a.xu,{children:(0,n.jsx)(i.Vp,{onSelect:function(){},tagStatus:c,borderRadius:4,disableHover:!0,title:l})})}},73345:function(e,t,o){o.d(t,{Z6:function(){return p},JT:function(){return y},rz:function(){return T},ti:function(){return S}});var n=o(24246),r=o(27378),i=o(96664),l=o(72022),s=o(45356),a=o(9078),c=o(21155);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(e){var t,o,u,p,v,x=e.data,h=e.callbacks,f=e.onModalCloseRequest,m=e.showRaiseTicket,b=h.onRaiseTicket,y=h.onSelectSupportType,T=h.onSelectSupportSubType,j=h.onSubmitTicket,g=(h.cleanUpAdapterState,h.goBack,h.goToSupport),S=x.supportTypes,C=x.subSupportTypes,k=x.supportErrorMessage,I=(x.submitTicketStatus,x.isTicketFormFailed,x.isTicketFormLoading,x.isPostPayment,(0,r.useState)(!1)),E=I[0],A=I[1],w=(0,r.useState)(""),D=w[0],P=w[1],R=(0,r.useState)([]),L=R[0],N=R[1],M=(0,a.$)("support").t,F=(0,i.UK)(j),G=(0,r.useRef)(null);(0,r.useEffect)((function(){(f?m&&0===(null===S||void 0===S?void 0:S.length):0===(null===S||void 0===S?void 0:S.length))&&b&&b()}),[m]),(0,r.useEffect)((function(){S&&(null===S||void 0===S?void 0:S.length)>0&&N(d(S))}),[S]),(0,r.useEffect)((function(){var e;-1===(null===x||void 0===x?void 0:x.selectedSubSupportIdx)&&(null===(e=G.current)||void 0===e||e.clearValue())}),[x.selectedSubSupportIdx]);var U=function(){f?f():g()};(0,r.useEffect)((function(){"success"===F.status&&((0,s.FN)({message:M("submitTicketSuccess")}),U())}),[F.status]);var B=(0,r.useMemo)((function(){return null===L||void 0===L?void 0:L.map((function(e,t){return{label:e.supportName,value:t}}))}),[L]),_=null===C||void 0===C?void 0:C.map((function(e,t){return{label:null===e||void 0===e?void 0:e.subTypeName,value:t}})),H=k||(null===(t=F.error)||void 0===t?void 0:t.message);null===(o=F.error)||void 0===o||o.validationType;return c.Bf.SUPPORT,c.Bf.SUB_SUPPORT,c.Bf.DESCRIPTION,c.Bf.AGREEMENT_CHECK,(0,n.jsxs)(l.kC,{my:2,sx:{flexDirection:"column",maxWidth:20,rowGap:4,flex:1,width:"100%"},children:[(0,n.jsx)(l.xu,{mb:2,children:(0,n.jsx)(s.xv,{category:["h5","h3","h3"],children:M("raiseATicket")})}),!e.data.srcDetails&&(0,n.jsx)(s.Ph,{onChange:function(e){y(null===e||void 0===e?void 0:e.value)},label:M("subject"),placeholder:M("selectSubject"),options:B,required:!0}),(0,n.jsx)(s.Ph,{onChange:function(e){T(null===e||void 0===e?void 0:e.value)},label:M("category"),placeholder:M("selectCategoryHere"),setInputRef:function(e){return G=e},inputValue:(null===x||void 0===x?void 0:x.selectedSubSupportIdx)>=0?null===_||void 0===_?void 0:_[null===x||void 0===x?void 0:x.selectedSubSupportIdx]:null,options:_,required:!0}),(0,n.jsx)(s.nv,{type:"textArea",onChange:function(e){P(e)},label:M("description"),name:"description",placeholderText:M("description"),numberOfLines:3,required:!0}),(0,n.jsxs)(l.kC,{sx:{flexDirection:"column",rowGap:4},children:[(0,n.jsx)(s.xv,{category:"s2",children:M("explainIssue")}),(0,n.jsx)(s.XZ,{onChange:function(){A((function(e){return!e}))},text:(0,n.jsxs)(s.xv,{category:"c2",children:[M("iHaveTried")," ",(0,n.jsx)(s.rU,{href:"https://d39xk34vhow4of.cloudfront.net/support/learners-troubleshoot.html",openInNewPage:!0,textProps:{category:"c2"},children:null===(u=M("helpDocument"))||void 0===u?void 0:u.toLocaleUpperCase()})," ",M("failedToResolve")]})}),!!H&&(0,n.jsx)(s.xv,{status:"error",children:H})]}),(0,n.jsxs)(l.kC,{mt:6,sx:{columnGap:2,alignItems:"center"},children:[(0,n.jsx)(s.zx,{onClick:function(){F.execute(E,D,(function(){}),M,"")},disabled:F.loading,children:null===(p=M("raiseATicket"))||void 0===p?void 0:p.toLocaleUpperCase()}),(0,n.jsx)(s.zx,{type:"ghost",variant:"basic",onClick:function(){return U()},children:null===(v=M("cancel"))||void 0===v?void 0:v.toLocaleUpperCase()})]})]})},v=o(38423),x=o(37740),h=o(27693),f=o.n(h),m=o(56419),b=o(27953);var y=function(e){var t=e.data,o=e.callbacks,r=(t.isUserLoggedIn,t.raiseTicketData,t.supportApiStatus),i=(t.supportErrorMessage,t.supportState),u=t.tickets,d=o.goToSupportTicket,p=o.fetchTickets,h=(0,a.$)(["support","common"]).t;return 0!==u.length||i!==c.yj.VIEWING_TICKETS||r!==c.iF.IN_PROGRESS&&r!==c.iF.IDLE?0===u.length&&i===c.yj.VIEWING_TICKETS&&r===c.iF.FAILED?(0,n.jsx)(v.qz,{title:h("common:crashError"),onRetry:function(){p&&p()}}):0===u.length?(0,n.jsx)(v.T9,{title:h("emptySupport"),illustrationSource:b.K.enthusiastic}):(0,n.jsx)(l.xu,{pt:4,children:(0,n.jsx)(x.F,{itemData:u,variant:"scannableList",renderItem:function(e){var t=[];if((null===e||void 0===e?void 0:e.ticketId)&&t.push(null===e||void 0===e?void 0:e.ticketId),null===e||void 0===e?void 0:e.updatedAt){var o=f()(null===e||void 0===e?void 0:e.updatedAt).format("MMM DD, YYYY"),r=f()(null===e||void 0===e?void 0:e.updatedAt).format("h:mm A"),i="".concat(o," (").concat(r,")");t.push(i)}return t=t.join(" \u2022 "),(0,n.jsx)(l.xu,{children:(0,n.jsx)(v.cS,{showBody:!0,bodyDescription:e.ticketDiscription,onHandleCard:function(){e.id&&d(e.id||0)},variant:"titleCard",headerTitle:t||"",showHeader:!0,hideHeaderThumbnail:!0,bodyDescriptionNoOfLines:3,headerTitleTextProps:{textCustomColor:"text-basic-color-2"},bodyDescriptionTextProps:{textCustomColor:"text-basic-color-2"},showActionbar:!0,showAction1:!0,allocateSpaceForEmptyLines:!0,HeaderMetaComponent:function(){return(0,n.jsx)(m.P,{ticketStatus:e.ticketStatus})},action1:{text:"".concat(e.replyCount," ").concat(1===e.replyCount?h("reply"):h("replies")),textProps:{textCustomColor:"text-basic-color-2"}},bodyTitle:e.title})})}})}):(0,n.jsx)(l.xu,{sx:{height:18},children:(0,n.jsx)(s.aN,{})})},T=function(e){var t=e.callbacks,o=e.data,r=(0,a.$)(["support","common"]).t,i=t.goToStore,c=t.goToSupport,u=[{title:r("common:home").toLocaleUpperCase(),onClick:function(){i()}},{title:r("support"),onClick:function(){c()}},{title:r("raiseATicket")}],d=o.currentTicketDetails,p=(o.supportErrorMessage,o.supportState,o.supportApiStatus,t.fetchCurrentTicketDetils,t.goBack,t.replyToTicket,null===d||void 0===d?void 0:d.ticketDetails),x=[];if((null===p||void 0===p?void 0:p.id)&&x.push(null===p||void 0===p?void 0:p.id),null===p||void 0===p?void 0:p.updatedAt){var h=f()(null===p||void 0===p?void 0:p.updatedAt).format("MMM DD, YYYY"),b=f()(null===p||void 0===p?void 0:p.updatedAt).format("h:mm A"),y="".concat(h," (").concat(b,")");x.push(y)}return x=x.join(" \u2022 "),(0,n.jsxs)(l.xu,{sx:{width:"100%"},children:[(0,n.jsx)(s.Oo,{data:u}),(0,n.jsxs)(l.kC,{sx:{columnGap:4,alignItems:"center"},my:8,children:[(0,n.jsx)(s.xv,{category:["h5","h3","h3"],children:(null===p||void 0===p?void 0:p.title)||""}),(0,n.jsx)(m.P,{ticketStatus:(null===p||void 0===p?void 0:p.status)||1})]}),(0,n.jsx)(v.cS,{variant:"titleCard",showBody:!0,showHeader:!0,bodyDescription:(null===p||void 0===p?void 0:p.description)||"",hideHeaderThumbnail:!0,headerTitle:x})]})},j=o(87815),g=o.n(j);f().extend(g());var S=function(e){var t,o=e.callbacks,i=e.data,u=i.currentTicketDetails,d=i.supportErrorMessage,p=i.supportState,h=i.supportApiStatus,m=(o.fetchCurrentTicketDetils,o.goBack,o.replyToTicket),b=(0,a.$)(["support","common"]).t,y=(0,r.useRef)(null),T=(0,r.useState)(""),j=T[0],g=T[1],S=p===c.yj.REPLYING_TICKET&&h===c.iF.IN_PROGRESS,C=p===c.yj.REPLYING_TICKET&&h===c.iF.SUCCESS,k=p===c.yj.REPLYING_TICKET&&h===c.iF.FAILED,I=null===u||void 0===u?void 0:u.ticketReplies;return(0,r.useEffect)((function(){k&&(0,s.FN)({message:d})}),[k]),(0,r.useEffect)((function(){C&&(null===y||void 0===y?void 0:y.current)&&(g(""),y.current.value="")}),[C]),(0,n.jsxs)(l.xu,{sx:{width:"100%"},children:[(0,n.jsxs)(l.kC,{sx:{rowGap:2,flexDirection:"column"},children:[(0,n.jsx)(s.nv,{label:b("reply"),setInputRef:function(e){y=e},onChange:function(e){g(e)},name:"reply",type:"textArea",placeholderText:b("postAReply"),numberOfLines:4}),(0,n.jsx)(s.zx,{onClick:function(){j&&m(j)},sx:{width:"fit-content"},disabled:!j||S,children:null===(t=b("reply"))||void 0===t?void 0:t.toLocaleUpperCase()})]}),(0,n.jsx)(l.xu,{mt:8,children:(0,n.jsx)(x.F,{variant:"list",itemData:I,removeGutter:!0,ListHeaderComponent:function(){return(null===I||void 0===I?void 0:I.length)?(0,n.jsx)(l.xu,{mb:2,children:(0,n.jsx)(s.xv,{category:"h6",children:b("replyCount",{replyCount:null===I||void 0===I?void 0:I.length})})}):null},renderItem:function(e,t){var o,r=e.roleId&&e.roleId!==c.xZ.STUDENT,i=t+1===(null===I||void 0===I?void 0:I.length);return(0,n.jsx)(l.xu,{sx:{borderBottomWidth:i?0:1,borderBottomStyle:"solid",borderBottomColor:"border-basic-color-4"},children:(0,n.jsx)(v.cS,{variant:"titleCardWithoutBorder",showBody:!0,showHeader:!0,headerTitle:(0,n.jsxs)(s.xv,{children:[(0,n.jsx)(s.xv,{category:"p1",sx:{display:"inline"},children:e.replierName}),(0,n.jsxs)(s.xv,{category:"c2",textCustomColor:"text-hint-color",sx:{display:"inline"},children:["\xa0\u2022\xa0",null===(o=f()(null===e||void 0===e?void 0:e.updatedAt))||void 0===o?void 0:o.fromNow()]})]}),headerThumbnailLabel:e.replierName,headerImage:null===e||void 0===e?void 0:e.replierPhoto,headerThumbnailProps:{status:r?"faculty":"none"},bodyDescription:null===e||void 0===e?void 0:e.replyMessage})})}})})]})}}}]);