"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6773,1264],{29418:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(35230),o=r.n(n),s=r(24246),i=r(86677),a=r(27378),l=r(38906),c=r(79471),u=r(14916),d=r(23998),h=r(53850),p=r(11959),f=r(267),y=r(95045);function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,r,n,o,s,i){try{var a=e[s](i),l=a.value}catch(c){return void r(c)}a.done?t(l):Promise.resolve(l).then(n,o)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){x(e,t,r[t])}))}return e}function C(e,t){return!t||"object"!==T(t)&&"function"!==typeof t?v(e):t}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}var T=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return C(this,r)}}function w(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(l,t);var r,n,o,a=I(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).doUserVerifications=function(){if(t.props.userLoginStatus===d.zU.LOGGED_IN_MOBILE_VERIFICATION_PENDING){if("/learn/account/otp"===t.props.router.pathname)return;i.default.push(h.y4.otp,h.XC.otp())}else if(t.props.userLoginStatus===d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING&&t.props.emailVerificationType===d.QF.EMAIL_LINK){if("/learn/account/email-verification"===t.props.router.pathname)return;i.default.push(h.y4.emailVerification,h.XC.emailVerification())}else if(t.props.userLoginStatus===d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING&&t.props.emailVerificationType===d.QF.EMAIL_OTP){if("/learn/account/otp"===t.props.router.pathname)return;i.default.push(h.y4.otp,h.XC.otp())}else t.props.navigationCurrentScreen===p.i_.SEGMENT||t.props.navigationCurrentScreen===p.i_.SIGNIN||t.props.navigationCurrentScreen===p.i_.PROFILE_BUILDER||!f.Gj.segment_enabled||t.props.userSegmentId||t.props.userLoginStatus!==d.zU.LOGGED_IN_VERIFIED&&t.props.userLoginStatus!==d.zU.NOT_LOGGED_IN?t.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&t.props.isProfileBuilderEnabled&&!t.props.isStudentFilledProfile&&t.props.navigationCurrentScreen!==p.i_.PROFILE_BUILDER&&(void 0!==t.props.inProgressPayment?i.default.push(h.y4.profileFields,h.XC.profileFields()):i.default.replace(h.y4.profileFields,h.XC.profileFields(),{shallow:!0})):t.props.userLoginStatus===d.zU.NOT_LOGGED_IN&&f.Gj.pricing_model===y._n.SUBSCRIPTION_TYPE?i.default.push(h.y4.segment,h.XC.segment()):t.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&i.default.replace(h.y4.segment,h.XC.segment(),{shallow:!0})},t.doUserVerifications=t.doUserVerifications.bind(v(t)),t}return r=l,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,r=e.navigationCurrentScreen,n=e.doSendNavChangeEvent,o=e.doSetCurrentAccessingLesson;if(this.doUserVerifications(),n(h.ZP[t.pathname],r,(new Date).getTime(),g({},t.query),!1,!0),console.log(h.ZP[t.pathname]),t.pathname===h.y4.lessonPlayer&&!t.query.courseId){var s=c.$2,i=t.query.sectionId,a=t.query.lessonId;o({courseId:s,sectionId:i,lessonId:a,autoScrollLessonTs:(new Date).getTime()},a)}}},{key:"componentDidUpdate",value:function(e){this.props.navigationCurrentScreen===p.i_.SEGMENT||this.props.navigationCurrentScreen===p.i_.SIGNIN||this.props.navigationCurrentScreen===p.i_.PROFILE_BUILDER||!f.Gj.segment_enabled||this.props.userSegmentId||this.props.userLoginStatus!==d.zU.LOGGED_IN_VERIFIED&&this.props.userLoginStatus!==d.zU.NOT_LOGGED_IN||(this.props.userLoginStatus===d.zU.NOT_LOGGED_IN&&f.Gj.pricing_model===y._n.SUBSCRIPTION_TYPE?i.default.push(h.y4.segment,h.XC.segment()):this.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&i.default.replace(h.y4.segment,h.XC.segment(),{shallow:!0})),void 0!==this.props.inProgressPayment&&this.doUserVerifications(),void 0!==this.props.realUserLoginStatus&&(this.props.inProgressPayment||this.props.navigationCurrentScreen===p.i_.CHECKOUT||this.props.doSetRealUserLoginStatus()),this.props.isAuthTokenExpired&&e.isAuthTokenExpired!==this.props.isAuthTokenExpired&&((0,u.FN)({message:"Your login session is expired."}),this.props.doRestartAuthentication(),i.default.push(h.y4.signin))}},{key:"render",value:function(){return this.props.sharedIsSchoolLocked&&this.props.sharedIsUserLoggedIn?(0,s.jsx)(u.R7,{doSignoutUser:this.props.doSignoutUser}):(0,s.jsx)(e,g({},this.props))}}])&&S(r.prototype,n),o&&S(r,o),l}(a.Component);return t.getInitialProps=function(){var e,t=(e=o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isServer,e.abrupt("return",{isServer:r});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){m(s,n,o,i,a,"next",e)}function a(e){m(s,n,o,i,a,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),(0,i.withRouter)((0,l.$)("doSignoutUser","doSendNavChangeEvent","doSetCurrentAccessingLesson","doRestartAuthentication","selectSharedIsUserLoggedIn","selectIsAuthTokenExpired","selectNavigationCurrentScreen","selectSharedIsSchoolLocked","selectSharedIsUserLoggedIn","selectUserLoginStatus","selectIsProfileBuilderEnabled","selectIsStudentFilledProfile","selectEmailVerificationType","selectUserSegmentId","selectInProgressPayment","selectRealUserLoginStatus","doSetRealUserLoginStatus",t))}},18318:function(e,t,r){r.d(t,{Z:function(){return rs}});var n=r(24246),o=r(27378),s=r(2113),i=r(55480),a=r(86677),l=r(53850),c=r(14916),u=r(96225),d=r(10100),h=r(45671),p=r(38906),f=r(57842),y=r(79136);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function b(e,t){return!t||"object"!==C(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var C=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function T(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,t);var r,o,s,i=j(a);function a(){return v(this,a),i.apply(this,arguments)}return r=a,o=[{key:"render",value:function(){var t=this.props,r=t.currentProductType,o=t.currentCourseCompletionStats,s=t.courseCompletionData,i=t.currentProductDetails,a=0;return r===y.VQ.COURSE&&o&&(a=(0,f.vy)(s,i.courseId,i.lessons.lessonIds.length)),(0,n.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}({},this.props,{courseProgress:a}))}}],o&&m(r.prototype,o),s&&m(r,s),a}(o.Component);return(0,p.$)("selectCurrentCourseCompletionStats","selectCourseCompletionData","selectCurrentProductDetails","selectCurrentLessonDetails","selectCurrentProductType","selectCurrentCoursePricing","doClearCourseData","doSetPostSigninRoute","selectCurrentLessonDescriptions",t)}var I=r(32730),w=r(92036),k=r(67458),D=r(74566);function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function R(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}var _=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}var U=r(95045);function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function G(e,t){return!t||"object"!==z(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e,t){return W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W(e,t)}var z=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var o=N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return G(this,r)}}var V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(a,e);var t,r,o,s=H(a);function a(){return B(this,a),s.apply(this,arguments)}return t=a,(r=[{key:"componentDidMount",value:function(){var e=this.props.attachmentLessonId,t=this.props.resourceLessonId||e,r=this.props.currentCourseDetails&&this.props.currentCourseDetails.resourceCourseId||this.props.currentCourseId;this.props.doFetchAttachmentForLesson({action:U.UX.ATTACHMENT_CONTENT,course_id:r,lesson_id:t,token:this.props.currentProductDetails.signedUrlAuthToken})}},{key:"componentWillUnmount",value:function(){this.props.doResetAttachmentBundle()}},{key:"render",value:function(){var e=this,t=this.props.t;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.xu,{py:6,px:4,width:["100vw","100vw","80vw"],bg:"surface",sx:{borderStyle:"solid",borderWidth:0,borderColor:"border",boxShadow:"default"},children:[(0,n.jsxs)(i.kC,{justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,n.jsx)(c.X6,{variant:"h2",children:t("product:downloadAttachments")}),(0,n.jsx)(i.xu,{color:"onSurface.light",onClick:function(){return e.props.setModalIsOpen(!1)},sx:{cursor:"pointer",fontSize:4,px:1},children:(0,n.jsx)(D.FU5,{})})]}),(0,n.jsx)(c.xv,{variant:"caption2",color:"onSurface.light",children:(0,n.jsxs)(i.kC,{children:[this.props.lessonTitle,(0,n.jsx)(i.xu,{ml:1})," - ",this.props.attachmentUrls&&this.props.attachmentUrls.length,(0,n.jsx)(i.xu,{ml:1}),t("attachment",{count:this.props.attachmentUrls&&this.props.attachmentUrls.length})]})}),(0,n.jsx)(c.iz,{}),(0,n.jsx)(i.xu,{mb:1}),(0,n.jsx)(i.xu,{maxHeight:"60vh",overflowY:"scroll",children:this.props.attachmentUrls&&this.props.attachmentUrls.map((function(t){return(0,n.jsxs)(i.kC,{py:3,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:[(0,n.jsx)(c.xv,{variant:"body2",color:"onSurface.light",children:t.src.replace("lyst([sS]*)$","")}),e.props.attachmentData.fetchStatus===y.UK.SUCCESS&&e.props.attachmentData.contentSignedUrl?(0,n.jsx)(n.Fragment,{children:e.props.isAttachmentDisabled?null:(0,n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:e.props.attachmentData.contentSignedUrl.replace("*",t.src),children:(0,n.jsx)(c.zx,{colorVariant:"primary",buttonType:"text",text:"download",IconComponent:D.YZd})})}):null]},"".concat(t.src_id))}))})]})})}}])&&M(t.prototype,r),o&&M(t,o),a}(o.Component),Q=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(a,t);var r,o,s,i=F(a);function a(){return E(this,a),i.apply(this,arguments)}return r=a,o=[{key:"render",value:function(){return(0,n.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){L(e,t,r[t])}))}return e}({},this.props))}}],o&&P(r.prototype,o),s&&P(r,s),a}(o.Component);return(0,p.$)("selectAttachmentData","selectCurrentProductDetails","selectCurrentCourseId","selectCurrentCourseDetails","doResetAttachmentBundle","doFetchAttachmentForLesson",t)}((0,h.Z)(["common","product"])(V)),q=r(5725),Z=r(62533),X=r(96904),Y=r.n(X);Y().apps.length||Y().initializeApp({apiKey:"AIzaSyDoaBroo0Hxbi98XHgJHF_iCGSOGNORXlI",authDomain:"learnyst.firebaseapp.com",databaseURL:"https://learnyst.firebaseio.com",projectId:"firebase-learnyst",storageBucket:"firebase-learnyst.appspot.com",messagingSenderId:"667287752609",appId:"1:667287752609:web:d186438f714900add405e0"});var $=Y(),K=Y().firestore(),J=r(62664),ee=r(61320),te=r.n(ee),re=r(58323),ne=r(60808),oe=function(e){var t=e.item,r=e.currentUserId,o=e.isScrolling,s=(e.cache,e.rowIndex,e.listRef,t.userName),a=t.userId,l=t.type,u=t.timestamp,d=t.message,h=t.profilePhoto;return o?(0,n.jsxs)(i.kC,{className:"placeHolder-Chat",p:[2],justifyContent:"flex-end",children:[(0,n.jsxs)(i.kC,{p:[2],mr:[2],sx:{minWidth:"150px",maxWidth:"80%",flexDirection:"column",borderWidth:1,borderRadius:3,borderStyle:"solid",borderColor:"#eee"},children:[(0,n.jsxs)(i.kC,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(i.xu,{sx:{bg:"surface",width:"60%",height:"15px"}}),(0,n.jsx)(i.xu,{sx:{bg:"surface",width:"60%",height:"15px"}})]}),(0,n.jsx)(i.xu,{sx:{bg:"surface",maxWidth:"100%",height:"15px",my:[1]}}),(0,n.jsx)(i.xu,{sx:{bg:"surface",maxWidth:"100%",height:"15px",my:[1]}}),(0,n.jsx)(i.xu,{sx:{bg:"surface",maxWidth:"100%",height:"15px",my:[1]}})]}),(0,n.jsx)(i.xu,{sx:{bg:"surface",height:[5],width:[5],borderRadius:"50%"}})]}):l===ne.V8.START?(0,n.jsx)(i.kC,{p:2,mx:"auto",justifyContent:"center",children:(0,n.jsx)(c.X6,{variant:"h6",children:d})}):a===r&&l===ne.V8.MESSAGE?(0,n.jsxs)(i.kC,{className:"chat-me",p:[2],justifyContent:"flex-end",children:[(0,n.jsxs)(i.kC,{p:[2],mr:[2],sx:{minWidth:"150px",maxWidth:"80%",flexDirection:"column",borderWidth:1,borderRadius:3,borderStyle:"solid",borderColor:"#eee"},children:[(0,n.jsxs)(i.kC,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(c.X6,{variant:"h6",color:"onSurface.main",children:"You"}),(0,n.jsx)(c.xv,{variant:"caption2",color:"onSurface.main",children:te()(u).format("hh:mm A")})]}),(0,n.jsx)(i.xu,{children:(0,n.jsx)(c.xv,{variant:"body2",color:"onSurface.light",children:d})})]}),(0,n.jsx)(re.Z,{size:"xsmall",name:s,src:h})]}):l===ne.V8.JOIN?(0,n.jsxs)(i.kC,{sx:{alignItems:"center",justifyContent:"center"},mx:"auto",my:[2],children:[(0,n.jsx)(re.Z,{size:"xsmall",name:s,src:h}),(0,n.jsxs)(i.kC,{px:[2],alignItems:"center",children:[(0,n.jsx)(c.X6,{variant:"h6",color:"onSurface.main",children:a===r?"You":"".concat(s," ")}),(0,n.jsx)(i.xu,{px:[2],children:(0,n.jsx)(c.xv,{variant:"body2",color:"onSurface.light",children:"joined"})})]})]}):l===ne.V8.LEFT?(0,n.jsxs)(i.kC,{sx:{alignItems:"center",justifyContent:"center"},my:2,children:[(0,n.jsx)(re.Z,{size:"xsmall",name:s,src:h}),(0,n.jsxs)(i.kC,{px:[2],alignItems:"center",children:[(0,n.jsx)(c.X6,{variant:"h6",color:"onSurface.main",children:a===r?"You":"".concat(s," ")}),(0,n.jsx)(i.xu,{px:[2],children:(0,n.jsx)(c.xv,{variant:"body2",color:"onSurface.light",children:"left"})})]})]}):(0,n.jsxs)(i.kC,{className:"chat-user",p:[2],children:[(0,n.jsx)(re.Z,{size:"xsmall",name:s,src:h}),(0,n.jsxs)(i.kC,{p:[2],ml:[2],sx:{minWidth:"150px",maxWidth:"80%",flexDirection:"column",borderWidth:1,borderRadius:3,borderStyle:"solid",borderColor:"#eee"},children:[(0,n.jsxs)(i.kC,{sx:{justifyContent:"space-between"},children:[(0,n.jsx)(c.X6,{variant:"h6",color:"onSurface.main",children:s}),(0,n.jsx)(c.xv,{variant:"caption2",color:"onSurface.main",children:te()(u).format("hh:mm A")})]}),(0,n.jsx)(i.xu,{children:(0,n.jsx)(c.xv,{variant:"body2",color:"onSurface.light",children:d})})]})]})};function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ae(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e,t){return le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},le(e,t)}var ce=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ie(e);if(t){var o=ie(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ae(this,r)}}var de=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(i,e);var t,r,o,s=ue(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=s.call(this,e)).rowRenderer=function(e){var r=e.index,o=e.style,s=e.key,i=e.parent,a=e.isScrolling;return(0,n.jsx)(J.Z8,{cache:t.props.cache,parent:i,columnIndex:0,rowIndex:r,children:(0,n.jsx)(q.xu,{style:o,children:(0,n.jsx)(oe,{item:t.props.list[r],currentUserId:t.props.userId,isScrolling:a,cache:t.props.cache,rowIndex:r})})},s)},t.scrollToBottom=function(){t.setState({scrollToIndex:t.props.list.length-1})},t.timer=null,t.state={scrollHeight:0,clientHeight:0,scrollToIndex:void 0},t}return t=i,(r=[{key:"componentDidUpdate",value:function(e){var t;if(e.list.length!==this.props.list.length||(null===e||void 0===e?void 0:e.isRefreshing)===(null===(t=this.props)||void 0===t?void 0:t.isRefreshing)){var r=this;setTimeout((function(){r.scrollToBottom()}),400)}}},{key:"render",value:function(){var e=this;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(J._K,{children:function(t){var r=t.height,o=t.isScrolling,s=e;return(0,n.jsx)(J.qj,{disableHeight:!0,children:function(e){var t,i=e.width,a=s;return(0,n.jsx)(J.aV,{autoHeight:s.state.scrollHeight<=s.state.clientHeight-60,className:"ChatList",width:i,onScroll:function(e){var t=e.clientHeight,r=e.scrollHeight,n=(e.scrollTop,a);a.timer&&(clearTimeout(a.timer),a.timer=null),a.timer=setTimeout((function(){o||n.setState({clientHeight:t,scrollHeight:r})}),500)},height:r-60,rowHeight:null===(t=s.props.cache)||void 0===t?void 0:t.rowHeight,isScrolling:o,rowRenderer:s.rowRenderer,rowCount:s.props.list.length,scrollToIndex:s.state.scrollToIndex})}})}})})}}])&&se(t.prototype,r),o&&se(t,o),i}(o.Component),he=de,pe=r(11959),fe=r(267);function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}function me(e,t){return!t||"object"!==xe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e,t){return Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se(e,t)}var xe=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ve(e);if(t){var o=ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return me(this,r)}}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}function je(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e,t){return Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Te(e,t)}var Ie=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function we(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ce(e);if(t){var o=Ce(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}var ke=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,r,s,i=we(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).onKeyboardPress=function(e){"Enter"===e.key&&t.state.inputValue.length<=200&&(t.props.onSendMessage(t.state.inputValue),t.setState({inputValue:""}))},t.inputRef=o.createRef(),t.state={inputValue:""},t}return t=a,(r=[{key:"render",value:function(){var e=this;return(0,n.jsxs)(q.kC,{sx:{borderStyle:"solid",borderWidth:[1],borderColor:"color-basic-default-border",borderRadius:"2px",bg:"color-basic-100",height:"36px","&:focus-within":{borderStyle:"solid",borderColor:"color-basic-focus-border"}},children:[(0,n.jsx)(q.II,{ref:this.inputRef,placeholder:this.props.t("typeYourMessage"),value:this.state.inputValue,onChange:function(t){e.setState({inputValue:t.target.value})},onFocus:function(){e.props.setPlayerFocusState(!0)},onBlur:function(){e.props.setPlayerFocusState(!1)},onKeyPress:this.onKeyboardPress,sx:{p:[4],width:"100%",color:"color-basic-focus-border",border:"none",outline:"none","::placeholder":{color:"#CCCCCC"},"::-ms-reveal":{display:"none"}}}),(0,n.jsx)(q.xu,{p:[2],children:(0,n.jsxs)(Z.xv,{category:"c2",style:{color:this.state.inputValue.length>200?"color-danger-500":"color-basic-1100"},children:[this.state.inputValue.length,"/",200]})})]})}}])&&ge(t.prototype,r),s&&ge(t,s),a}(o.Component),De=(0,h.Z)("player")(ke),Ee=r(55643),Pe=r(18349);function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Re(e,t,r[t])}))}return e}function Fe(e,t){return!t||"object"!==Me(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ue(e,t){return Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ue(e,t)}function Be(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Me=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ae(e);if(t){var o=Ae(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Fe(this,r)}}var Ge=new J.t1({fixedWidth:!0,defaultHeight:100}),We=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(a,e);var t,r,s,i=Ne(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).getUserSessionRef=function(){return K.collection(ne.Af.CHATS).doc(t.chatId).collection(ne.Af.ROOMS).doc(t.roomId).collection(ne.Af.USER_SESSIONS).doc("".concat(t.userData.userId))},t.getMessageRef=function(){return K.collection(ne.Af.CHATS).doc(t.chatId).collection(ne.Af.ROOMS).doc(t.roomId).collection(ne.Af.NODE_MESSAGES)},t.userAuth=function(e){$.auth().signInWithCustomToken(e).then((function(){console.log("liveChatRoom userAuth : props,state",t.state,t.props)})).catch((function(e){console.log("error in chat auth verify",e)}))},t.onMessagesListUpdate=function(){t.removeListener&&t.removeListener(),t.setState({isLoading:!0}),t.removeListener=t.messageRef.orderBy("timestamp").onSnapshot((function(e){e.docChanges().forEach((function(e){if(console.log("onMessagesListUpdate :change,props,state ",e,t.props,t.state),e.type===ne._G.DOC_ADDED){var r=e.doc.data(),n=(null===r||void 0===r?void 0:r.type)===ne.V8.JOIN||(null===r||void 0===r?void 0:r.type)===ne.V8.LEFT;Ee.Gj.hide_chat_user_presence&&n||t.setState({listMessage:Be(t.state.listMessage).concat([e.doc.data()])})}})),t.setState({isLoading:!1})}),(function(e){console.log(e.toString())}))},t.onChangeUserSessionId=function(){t.userSessionsListener&&t.userSessionsListener(),t.userSessionsListener=t.userSessionRef.onSnapshot((function(e){e.data()&&(console.log("livechatroom onChangeUserSessionId :doc ",e.data()),e.data().sessionId!==t.sessionId&&t.isUserSet&&t.props.doSetAutTokenExpired())}),(function(e){console.log("error in get userSession",e)}))},t.setUserSessionId=function(){t.userSessionRef.set({sessionId:t.sessionId}).then((function(){console.log("user session set"),t.isUserSet=!0})).catch((function(e){console.log("set firebase user session error",e.toString())}))},t.updateUserSessionId=function(){t.userSessionRef.update({sessionId:t.sessionId}).then((function(){console.log("user session set"),t.isUserSet=!0})).catch((function(e){console.log("update firebase user session error",e.toString())}))},t.checkAndSetUserSessionId=function(){t.userSessionRef.get().then((function(e){e.exists?t.updateUserSessionId():t.setUserSessionId()})).catch((function(e){console.log("Error getting useSessions:",e)}))},t.onSendMessage=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne.V8.MESSAGE;if(""!==e.trim()){var n=Date.now(),o=_e({},t.userData,{timestamp:n,message:e.trim(),type:r});t.messageRef.doc().set(o).then((function(){console.log("Message sent")})).catch((function(e){console.log(e.toString())}))}},t.refreshChatData=function(){console.log("liveChatRoom refreshChatData"),(null===Ge||void 0===Ge?void 0:Ge.clearAll)&&(Ge.clearAll(),console.log("refresh layout")),t.setState({listMessage:[]}),t.isGettingRefreshed=!0,setTimeout((function(){var e,r;null===(r=(e=t).onMessagesListUpdate)||void 0===r||r.call(e)}),0)},t.state={isLoading:!0,listMessage:[]},t.messagesEnd=o.createRef(),t.chatId=null,t.roomId=null,t.sessionId=null,t.removeListener=null,t.isUserSet=!1,t.userSessionsListener=null,t.isGettingRefreshed=!1,t.userData=e.userData,t}return t=a,(r=[{key:"componentDidMount",value:function(){console.log("LiveChatRoom component did mountprops,state: ",this.props,this.state),this.chatId=this.props.chatId,this.roomId=this.props.roomId;var e=this.props.userData;if(this.userData=e,this.sessionId=localStorage.getItem("sessionId"),!this.sessionId){var t=(new Date).getTime();this.sessionId="".concat(t,"_").concat(this.props.chatId),localStorage.setItem("sessionId",this.sessionId)}this.userSessionRef=this.getUserSessionRef(),this.messageRef=this.getMessageRef(),this.userAuth(e.token),this.onChangeUserSessionId(),this.onMessagesListUpdate()}},{key:"componentDidUpdate",value:function(e,t){console.log("LiveChatRoom props,state: ",this.props,this.state),console.log("livechat update :",this.isGettingRefreshed),t.isLoading===this.state.isLoading||this.state.isLoading||(Ee.Gj.hide_chat_user_presence||this.isGettingRefreshed||this.onSendMessage("user joined",ne.V8.JOIN),this.isGettingRefreshed=!1,this.checkAndSetUserSessionId())}},{key:"componentWillUnmount",value:function(){console.log("livechat unmount: ",this.isGettingRefreshed),Ee.Gj.hide_chat_user_presence||this.isGettingRefreshed||this.onSendMessage("user left",ne.V8.LEFT),this.removeListener&&this.removeListener()}},{key:"render",value:function(){return(0,n.jsx)(q.xu,{sx:{bg:"color-basic-100",height:"100%"},children:this.state.isLoading?(0,n.jsx)(q.kC,{sx:{height:"100%",alignItems:"center",justifyContent:"center"},children:this.props.t("loading")}):(0,n.jsxs)(q.kC,{sx:{height:"100%",flexDirection:"column",justifyContent:"flex-end"},children:[(0,n.jsxs)(q.kC,{sx:{width:["100%","100%","25%"],px:4,py:3,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"disabled",backgroundColor:"background-basic-color-1",zIndex:9999,position:["relative","relative","absolute"],top:0,alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(q.xu,{children:[(0,n.jsx)(Z.xv,{category:"h5",children:"Live Chat"}),(0,n.jsx)(Z.xv,{category:"label",children:" Incase of inconvenience, Please Refresh."})]}),(0,n.jsx)(q.xu,{children:(0,n.jsx)(c.Bz,{onClick:this.refreshChatData,color:"onLightSurface",children:(0,n.jsx)(Pe.zHJ,{})})})]}),(0,n.jsx)(q.kC,{className:"chat-list",sx:{overflow:"scroll"},children:(0,n.jsx)(he,{list:this.state.listMessage,userId:this.userData.userId,cache:Ge,isRefreshing:this.isGettingRefreshed})}),(0,n.jsx)(q.xu,{className:"chatInput",sx:{width:"100%",bg:"background-basic-color-2",px:4,py:3},children:this.props.liveStatus!==ne.yi.COMPLETED?(0,n.jsx)(De,{onSendMessage:this.onSendMessage,setPlayerFocusState:this.props.setPlayerFocusState}):(0,n.jsx)(q.kC,{sx:{alignItems:"center"},p:[2],children:(0,n.jsx)(Z.xv,{category:"p1",children:this.props.t("liveSessionEnded")})})})]})})}}])&&Oe(t.prototype,r),s&&Oe(t,s),a}(o.Component),ze=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(l,t);var r,o,s,a=be(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).getListHistory=function(){console.log("livechatAdapter getListHistory firebaseCollection chat id, room id",ne.Af,t.chatId,t.roomId),t.removeListener&&t.removeListener(),t.removeListener=K.collection(ne.Af.CHATS).doc(t.chatId).collection(ne.Af.ROOMS).doc(t.roomId).onSnapshot((function(e){if(e.data){var r=e.data();console.log("livechatAdapter getListHistory data doc",r,e),t.setState({liveStatus:null===r||void 0===r?void 0:r.liveClassStatus,liveChatStatus:(null===r||void 0===r?void 0:r.liveChatStatus)||y.yJ.ENABLED})}else t.setState({liveStatus:ne.yi.NOT_STARTED})}),(function(e){console.log("error in get liveClassStatus",e)}))},t.fetchChatToken=function(){console.log("LiveChatAdapter fetchChatToken: props state",t.props,t.state),t.setState({liveDataQueryState:"inprogress"}),(0,pe.JF)(y.Y9.CHAT_TOKEN_URL,"get",{lesson_id:t.props.currentLessonId},null,"json",t.props.sharedAuthToken,null,2e4).then((function(e){var r=e.response;console.log("LiveChatAdapter fetchChatToken: response",r),t.setState({liveDataQueryState:"success",liveData:r}),t.props.updateLiveStatus({liveStatus:t.state.liveStatus})})).catch((function(e){var r=e.error;t.setState({liveDataQueryState:"failed"}),console.log("Error in fetching chatToken",r)}))},t.removeListener=null,t.chatId=null,t.roomId=null,t.state={liveDataQueryState:"idle",liveData:null,liveStatus:ne.yi.IDLE,liveChatStatus:y.yJ.ENABLED},t}return r=l,(o=[{key:"componentDidMount",value:function(){console.log("LiveChatAdapter component did mount props: ",this.props),this.chatId=te()(this.props.currentLessonDetails.liveLessonDetails.endTime).utc().format("YYYYMMDD").toString(),this.roomId="".concat(fe.Gj.SCHOOL_ID,"_").concat(this.props.currentLessonId),this.getListHistory()}},{key:"componentDidUpdate",value:function(e,t){t.liveStatus!==this.state.liveStatus&&(this.state.liveStatus===ne.yi.STARTED&&this.fetchChatToken(),this.state.liveStatus!==ne.yi.COMPLETED&&this.state.liveStatus!==ne.yi.STREAMING&&this.state.liveStatus!==ne.yi.INTERRUPTED||"idle"!==this.state.liveDataQueryState||this.fetchChatToken(),this.props.updateLiveStatus({liveStatus:this.state.liveStatus}))}},{key:"componentWillUnmount",value:function(){this.removeListener&&(this.removeListener(),this.removeListener=null)}},{key:"render",value:function(){console.log("LiveChatAdapter Render props: ",this.props,this.state);var t=this.props.t;if("failed"===this.state.liveDataQueryState){var r=this;return(0,n.jsx)(i.kC,{alignItems:"center",justifyContent:"center",width:"100%",height:"100%",children:(0,n.jsx)(c.zx,{onClick:function(){return r.fetchChatToken()},text:t("retry"),colorVariant:"secondary"})})}if(this.state.liveStatus===ne.yi.NOT_STARTED)return(0,n.jsx)(i.kC,{alignItems:"center",justifyContent:"center",width:"100%",height:"100%",children:(0,n.jsx)(c.xv,{variant:"caption1",children:t("chatNotStarted")})});if(this.state.liveStatus===ne.yi.TERMINATED)return(0,n.jsx)(i.kC,{alignItems:"center",justifyContent:"center",width:"100%",height:"100%",children:(0,n.jsx)(c.xv,{variant:"caption1",children:t("chatSessionTerminated")})});if(this.state.liveChatStatus===y.yJ.DISABLED)return(0,n.jsx)(i.kC,{alignItems:"center",justifyContent:"center",width:"100%",height:"100%",children:(0,n.jsx)(c.xv,{variant:"caption1",color:"disabledText",children:t("chatIsDisabled")})});if("success"===this.state.liveDataQueryState){var o={userId:this.props.sharedUserId,userName:this.props.sharedUserName,profilePhoto:this.props.sharedUserProfilePhoto,token:this.state.liveData.live_chat_token};return(0,n.jsx)(e,{userData:o,chatId:this.chatId,roomId:this.roomId,liveStatus:this.state.liveStatus,doSetAutTokenExpired:this.props.doSetAutTokenExpired,setPlayerFocusState:this.props.setPlayerFocusState})}return(0,n.jsx)(i.kC,{alignItems:"center",justifyContent:"center",width:"100%",height:"100%",children:(0,n.jsx)(c.xv,{variant:"caption1",children:t("loading")})})}}])&&ye(r.prototype,o),s&&ye(r,s),l}(o.Component);return(0,h.Z)("player")((0,p.$)("selectSharedAuthToken","selectSharedUserId","selectSharedUserProfilePhoto","selectSharedUserName","selectCurrentLessonId","selectCurrentCourseId","selectCurrentLessonDetails","doSetAutTokenExpired",t))}((0,h.Z)("player")(We)),He=r(88268),Ve=r(32362);function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function Xe(e,t){return!t||"object"!==$e(t)&&"function"!==typeof t?Qe(e):t}function Ye(e,t){return Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ye(e,t)}var $e=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Xe(this,r)}}var Je=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(p,e);var t,r,s,h=Ke(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=h.call(this,e)).setPlayerFocusState=function(e){t.setState({isPlayerOutOfFocus:e||!1})},t.toogleLivePlayerMode=function(e){e||t.setState({liveStatus:ne.yi.IDLE,liveServerName:null}),t.setState({isLivePlayerMode:e}),(0,He.s2)()||t.setState({isSemiFullScreen:e})},t.toogleLiveChatDisplay=function(){console.log("courseDashboard toggleLiveChatDisplay state",t.state),t.setState({showLiveChat:!t.state.showLiveChat})},t.updateLiveStatus=function(e){console.log("courseDashboard updateLiveStatus data, state",e,t.state),t.setState({liveStatus:e.liveStatus})},t.switchToBookmarkTab=function(e){t.setState({enableBookmarkTab:e})},t.toggleSearch=function(){t.setState({isSearchShown:!t.state.isSearchShown})},t.state={isFullScreen:!1,isSemiFullScreen:!1,isPlayerOutOfFocus:!1,attachmentModalState:!1,attachmentUrls:{},attachmentLessonId:0,attachmentLessonTitle:"",isAttachmentDisabled:!1,isLivePlayerMode:!1,liveStatus:ne.yi.IDLE,liveServerName:null,enableBookmarkTab:!1,showLiveChat:!0,isSearchShown:!1,resourceLessonId:0},t.playerRef=o.createRef(),t.setPLayerSemiFullScreenState=t.setPLayerSemiFullScreenState.bind(Qe(t)),t.handleFullscreenChange=t.handleFullscreenChange.bind(Qe(t)),t.setAttachmentModalState=t.setAttachmentModalState.bind(Qe(t)),t}return t=p,(r=[{key:"componentDidMount",value:function(){window.addEventListener("fullscreenchange",this.handleFullscreenChange,!0),(0,pe._y)()}},{key:"componentDidUpdate",value:function(e,t){console.log("courseDashboard props:",this.props),console.log("courseDashboard state:",this.state),a.default.query.search&&!t.isSearchShown&&this.setState({isSearchShown:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("fullscreenchange",this.handleFullscreenChange,!0),(0,pe.ET)()}},{key:"getAspectRatio",value:function(){return this.state.isFullScreen&&!this.state.isLivePlayerMode?window.screen.width/window.screen.height:16/9}},{key:"setPLayerSemiFullScreenState",value:function(e){this.state.isSemiFullScreen!==e&&this.setState({isSemiFullScreen:e||!1})}},{key:"handleFullscreenChange",value:function(){document.fullscreenElement?(this.setState({isFullScreen:!0}),console.log("handleFullscreenChange Element: ".concat(document.fullscreenElement.id," entered full-screen mode."))):(this.setState({isFullScreen:!1}),console.log("handleFullscreenChange Leaving full-screen mode."))}},{key:"setAttachmentModalState",value:function(e,t,r,n,o,s){this.setState({attachmentModalState:e,attachmentUrls:t,attachmentLessonId:r,attachmentLessonTitle:n,isAttachmentDisabled:o,resourceLessonId:s})}},{key:"render",value:function(){var e=this,t=this.props,r=t.currentProductDetails,o=t.courseProgress,s=t.currentProductType,h=t.userEnrollmentState,p=t.sharedIsUserLoggedIn,f=t.currentCoursePricing,v=t.t,m=(t.currentReviewData,t.showEnrollButton),S=t.isCurrentProductFromBundlde,x=t.courseCompletionData,b=t.currentBundleId,g=t.isCourseExpired,C=t.isCoursePrivate,j=t.isSellIndividualEnabled,T=t.isCourseFree,D=t.isBundleFree,E=t.currentCourseSeoTitle,P=t.currentBundleSeoTitle,L=t.currentLessonDetails,O=t.currentLessonDescriptions,R=0,A=0;r.courseType===y.VQ.TEST_SERIES&&(R=(0,w.Op)(this.props.currentCourseSections),A=(0,w.T3)(this.props.currentCourseMockTests));var _=this.state,F=_.isSemiFullScreen,U=_.isLivePlayerMode,B=_.isSearchShown,M=this.getAspectRatio(),N=256;r.courseType===y.VQ.COURSE&&(N=180);var G=!!new URLSearchParams(window.location.search).get("embedPlayer"),W=a.default.query.embedHeader||"";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.Global,{styles:function(){return{"html, #syllabus-list div":{scrollBehavior:"smooth"}}}}),(0,n.jsxs)(i.kC,{id:"lesson-player",as:"main",height:"100vh",width:"100%",sx:{overflow:"hidden",position:"sticky",top:0},children:[(0,n.jsxs)(i.xu,{as:"section",width:["100%","100%",this.state.showLiveChat?"70%":"100%"],height:["100vh","100%"],sx:{display:["flex","initial"],overflowY:["hidden","scroll"],position:"static",flexGrow:1,flexDirection:"column"},children:[(0,n.jsxs)(i.xu,{sx:{flexGrow:1,height:G?"97%":"auto"},children:[(0,n.jsx)(i.xu,{id:"player-header",sx:{boxShadow:"default"},children:(0,n.jsx)(I.Mi,{title:W||r.courseTitle,progress:o,courseId:r.courseId,sharedIsUserLoggedIn:p,enrollmentState:r.enrollmentState,isReviewsEnabled:r.isReviewsEnabled,currentReviewData:this.props.currentReviewData,setPlayerFocusState:this.setPlayerFocusState,currentBundleSeoTitle:P,hasProgress:!0})}),(0,n.jsx)(c.oM,{ratio:M,isSemiFullScreen:F,children:r.courseType===y.VQ.TEST_SERIES?(0,n.jsx)(I.qZ,{}):(0,n.jsx)(I.yc,{isEmbedPlayer:G,forwardedRef:this.playerRef,sharedIsUserLoggedIn:p,setPLayerSemiFullScreenState:this.setPLayerSemiFullScreenState,isSemiFullScreen:this.state.isSemiFullScreen,isPlayerOutOfFocus:this.state.isPlayerOutOfFocus,courseType:r.courseType,userEnrollmentState:h,toogleLivePlayerMode:this.toogleLivePlayerMode,toogleLiveChatDisplay:this.toogleLiveChatDisplay,showLiveChat:this.state.showLiveChat,liveServerData:{liveStatus:this.state.liveStatus},switchToBookmarkTab:this.switchToBookmarkTab})})]}),!(F||U)&&(0,n.jsxs)(i.xu,{mb:1,height:G?"0%":["100%","auto"],sx:{overflow:["scroll","hidden"],overflowX:"hidden"},children:[(0,n.jsx)(I.Y9,{currentLessonDescriptions:O,currentProductDetails:r,currentLessonDetails:L,getCurrentPosition:function(){return e.playerRef.current&&e.playerRef.current.getCurrentPosition?e.playerRef.current.getCurrentPosition():{currentSlide:0,currentVideoTime:0,key:void 0}},sharedIsUserLoggedIn:p,currentCoursePricing:f,about:r.courseShortDescription,aboutProduct:r.courseDescription,productType:s,userEnrollmentState:h,isCertificateEnabled:r.isCertificateEnabled,isReviewsEnabled:r.isReviewsEnabled,courseRating:r.courseRating,courseSeoTitle:r.courseSeoTitle,courseId:r.courseId,isShowAuthorsEnabled:r.isShowAuthorsEnabled,showEnrollButton:m,isCurrentProductFromBundlde:S,setPlayerFocusState:this.setPlayerFocusState,currentBundleId:b,courseStatus:r.courseStatus,isCourseExpired:g,isCoursePrivate:C,isSellIndividualEnabled:j,isCourseFree:T,isBundleFree:D,isDiscussionEnabled:r.isDiscussionEnabled,isBookmarkEnabled:!(!r.isNotesEnabled||!Boolean(Number(fe.Gj.bookmarks))),doSetPostSigninRoute:this.props.doSetPostSigninRoute,setAttachmentModalState:this.setAttachmentModalState,lessonCount:r.lessons.lessonIds.length,testCount:r.mockTests.mockTestIds.length,testSeriesAvgScore:A,testSeriesCompletion:R,courseCompletionData:x,courseProgress:o,gotoViewAnalytics:function(){a.default.push(l.y4.testSeriesAnalytics,l.XC.testSeriesAnalytics({productSeo:P||E,subProductSeo:P?E:null}))},enableBookmarkTab:this.state.enableBookmarkTab,switchToBookmarkTab:this.switchToBookmarkTab,isFaqEnabled:r.isFaqEnabled}),!F&&(0,n.jsx)(i.xu,{height:"max-content",sx:{display:["none","none","block"]},children:(0,n.jsx)(d.Z,{})})]}),(0,He.s2)()&&U&&(0,n.jsx)(i.xu,{sx:{display:["block","block","none"],overflow:"hidden"},height:["100%","auto"],children:(0,n.jsx)(ze,{updateLiveStatus:this.updateLiveStatus,setPlayerFocusState:this.setPlayerFocusState})})]}),U?(0,n.jsx)(i.kC,{as:"section",bg:"background",height:"100%",width:["0%","0%",this.state.showLiveChat?"25%":"0%"],minWidth:[0,0,this.state.showLiveChat?"syllabusMinW":0],flexDirection:"column",sx:{overflow:"hidden",display:["none","none","initial"],borderLeftWidth:1,borderLeftColor:"border",borderLeftStyle:"solid"},children:(0,n.jsx)(ze,{updateLiveStatus:this.updateLiveStatus,setPlayerFocusState:this.setPlayerFocusState})}):(0,n.jsxs)(i.kC,{as:"section",bg:"background",height:"100%",width:G?"0%":["0%","0%","30%"],minWidth:G?"0%":[0,0,"syllabusMinW"],flexDirection:"column",sx:{overflow:"hidden",display:["none","none","initial"],borderLeftWidth:1,borderLeftColor:"border",borderLeftStyle:"solid"},children:[(0,n.jsx)(i.xu,{pt:1,pl:2,mb:2,minWidth:"syllabusMinW",sx:{borderColor:"transparent",borderTopWidth:1,borderBottomWidth:1,borderStyle:"solid"},children:(0,n.jsxs)(i.kC,{sx:{justifyContent:"space-between",alignItems:"center"},children:[!B&&(0,n.jsx)(c.X6,{variant:"h2",textTransform:"capitalize",children:r.courseType===y.VQ.TEST_SERIES?v("test_plural"):v("product:syllabus")}),B&&(0,n.jsx)(c.X6,{variant:"h4",textTransform:"capitalize",children:r.courseType===y.VQ.TEST_SERIES?v("searchTestSeries"):v("searchSyllabus")}),!B&&(0,n.jsx)(i.kC,{pr:3,sx:{fontSize:"iconDefault",alignItems:"center",cursor:"pointer"},children:(0,n.jsx)(Ve.FKI,{onClick:function(){e.toggleSearch()}})}),B&&(0,n.jsx)(c.zx,{colorVariant:"primary",buttonType:"text",text:v("close"),onClick:function(){e.toggleSearch()}})]})}),p&&!B&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.iz,{}),(0,n.jsxs)(i.xu,{width:"100%",p:4,children:[r.courseType===y.VQ.TEST_SERIES&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.kC,{mb:6,alignItems:"center",justifyContent:"space-between",children:R?(0,n.jsxs)(n.Fragment,{children:[A&&"NaN"!==A?(0,n.jsxs)(i.xu,{alignSelf:"flex-end",children:[(0,n.jsx)(c.xv,{variant:"overline",children:v("product:yourAvgScore")}),(0,n.jsx)(c.X6,{variant:"h2",children:A})]}):null,(0,n.jsx)(c.zx,{disabled:R<=0,colorVariant:R<=0?"disabled":"secondary",text:v("product:viewAnalytics"),onClick:function(){R>0&&a.default.push(l.y4.testSeriesAnalytics,l.XC.testSeriesAnalytics({productSeo:P||E,subProductSeo:P?E:null}))}})]}):null})}),(0,n.jsxs)(i.kC,{alignItems:"center",children:[(0,n.jsx)(i.xu,{width:"100%",mr:2,children:(0,n.jsx)(c.ko,{progress:r.courseType===y.VQ.COURSE?o:R})}),(0,n.jsx)(c.X6,{variant:"h6",children:"".concat(r.courseType===y.VQ.COURSE?o:R,"%")})]}),(0,n.jsx)(c.xv,{variant:"caption2",children:x&&Array.isArray(x[r.courseId])&&(0,n.jsxs)(n.Fragment,{children:[r.courseType===y.VQ.COURSE&&(0,n.jsxs)(i.kC,{children:[x[r.courseId].length,(0,n.jsx)(i.xu,{ml:1}),v("product:outOf",{count:r.lessons.lessonIds.length}),(0,n.jsx)(i.xu,{ml:1}),v("completed")]}),r.courseType===y.VQ.TEST_SERIES&&(0,n.jsxs)(i.kC,{children:[x[r.courseId].length,(0,n.jsx)(i.xu,{ml:1}),v("product:outOf",{count:r.mockTests.mockTestIds.length}),(0,n.jsx)(i.xu,{ml:1}),v("completed")]})]})})]})]}),(0,n.jsx)(i.xu,{pb:p?N:94,bg:"background",height:"100%",width:"100%",minWidth:"syllabusMinW",sx:{overflow:"hidden",zIndex:3},children:(0,n.jsx)(u.Z,{fixHeight:!0,inPlayer:!0,setPlayerFocusState:this.setPlayerFocusState,signedUrlAuthToken:r.signedUrlAuthToken,setAttachmentModalState:this.setAttachmentModalState,isSearchShown:B})})]}),(0,n.jsx)(c.u_,{ariaHideApp:!1,isOpen:this.state.attachmentModalState,onRequestClose:function(){e.setAttachmentModalState(!1)},children:(0,n.jsx)(Q,{modalIsOpen:this.state.attachmentModalState,setModalIsOpen:this.setAttachmentModalState,attachmentUrls:this.state.attachmentUrls,attachmentLessonId:this.state.attachmentLessonId,lessonTitle:this.state.attachmentLessonTitle,isAttachmentDisabled:this.state.isAttachmentDisabled,resourceLessonId:this.state.resourceLessonId})})]})]})}}])&&qe(t.prototype,r),s&&qe(t,s),p}(o.Component),et=(0,h.Z)(["common","product"])(T(Je)),tt=r(62304),rt=r(71117),nt=r(38212),ot=r(2137),st=r(9078),it=r(38386);function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){lt(e,t,r[t])}))}return e}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dt=T((function(e){var t=e.currentProductDetails,r=(e.courseCompletionData,e.userEnrollmentState),s=(e.productType,e.isCourseExpired),u=e.isCoursePrivate,h=e.isSellIndividualEnabled,p=e.isBundleFree,f=e.isEnrolling,v=e.allBundleCourseIds,m=e.doEnrollToCourse,S=e.currentCoursePricing,x=e.sharedIsUserLoggedIn,b=e.doSetPostSigninRoute,g=e.currentReviewData,C=(0,st.$)(["common","product"]).t,j=ut(o.useState(!1),2),T=j[0],I=j[1],w=ut(o.useState(5),2),k=w[0],D=w[1],E=S&&S.selctedVariablePrice?S.selctedVariablePrice.priceId:0,P=f||s||u||!h,L=(r!==y.ri.PURCHASED||new Date(t.studentExpiryDate)<new Date)&&fe.Gj.pricing_model!==U._n.SUBSCRIPTION_TYPE;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ot.Z,{}),(0,n.jsx)(c.W2,{children:(0,n.jsxs)(i.xu,{as:"main",minHeight:"80vh",px:[0,0,10],children:[(0,n.jsx)(i.kC,{as:"section",pt:[6,8],pb:2,justifyContent:"flex-start",bg:"surface",children:(0,n.jsx)(i.xu,{p:3,mx:"auto",width:"100%",children:(0,n.jsxs)(i.kC,{sx:{alignItems:"flex-start",justifyContent:"space-between",flexWrap:["wrap","wrap","initial"]},children:[(0,n.jsx)(i.xu,{children:(0,n.jsx)(nt.uF,{type:t.courseType,title:t.courseTitle,shortDesc:t.courseShortDescription,rating:t.courseRating,isReviewsEnabled:t.isReviewsEnabled,isCourseExpired:s})}),g&&t.isReviewsEnabled&&x&&r===y.ri.PURCHASED?(0,n.jsx)(i.xu,{sx:{minWidth:"max-content",mt:[2,2,0]},children:(0,n.jsx)(c.zx,{onClick:function(){return I(!T)},disabled:g.isCurrentUserReviewed,buttonType:"outline",buttonSizeVariant:"small",colorVariant:g.isCurrentUserReviewed?"disabled":"primary",text:C("product:addReview")})}):null]})})}),S&&S.courseEndDate?(0,n.jsx)(i.xu,{px:3,py:1,children:(0,n.jsxs)(c.xv,{variant:"body2",color:"secondary.main",children:[C("common:expiresOn",{context:s?"past":""})," ",te()(S.courseEndDate).format("ll")]})}):null,L?(0,n.jsx)(i.xu,{px:3,children:(0,n.jsx)(c.zx,{onClick:function(){return p?void(f||(x?m(t.courseId,v):(b({href:{pathname:a.default.pathname,query:a.default.query},as:a.default.asPath}),a.default.push({pathname:l.y4.signup})))):void(x?a.default.push({pathname:l.y4.checkout,query:{priceId:E}},l.XC.checkout({courseId:t.courseId,priceId:E})):(b({href:{pathname:a.default.pathname,query:a.default.query},as:a.default.asPath}),a.default.push({pathname:l.y4.signup})))},colorVariant:P?"disabled":"primary",disabled:P,text:C(p?"product:enrollForFree":"buyBundle")})}):null,(0,n.jsx)(i.kC,{as:"section",mt:8,mx:"auto",px:[2,3,0],justifyContent:"center",children:(0,n.jsxs)(i.kC,{width:"100%",flexDirection:"column",py:3,children:[(0,n.jsx)(i.xu,{as:"section",pl:3,children:(0,n.jsx)(nt.m7,ct({},t.bundleCourses,{allBundleCoursesIds:t.bundleCourses.allBundleCoursesIds,bundleId:t.courseId,bundleSeo:t.courseSeoTitle,isUserLoggedIn:!0,userEnrollmentState:r}))}),t.courseDescription&&(0,n.jsx)(i.xu,{as:"section",p:3,my:8,maxWidth:["100%","100%","80%"],sx:{"&:empty":{display:"none"}},children:(0,n.jsx)(nt.zW,{about:t.courseDescription,productType:t.courseType})}),t.isShowAuthorsEnabled&&(0,n.jsx)(i.xu,{as:"section",p:3,my:8,maxWidth:["100%","100%","70%"],sx:{"&:empty":{display:"none"}},children:(0,n.jsx)(rt.S3,{})}),(0,n.jsxs)(i.xu,{as:"section",maxWidth:["100%","100%","70%"],sx:{"&:empty":{display:"none"}},children:[t.isReviewsEnabled&&(0,n.jsx)(rt.JH,{courseSeoTitle:t.courseSeoTitle,courseId:t.courseId}),t.isFaqEnabled&&(0,n.jsx)(it.Z,{})]})]})})]})}),(0,n.jsx)(d.Z,{}),g&&t.isReviewsEnabled&&x&&r===y.ri.PURCHASED?(0,n.jsx)(c.u_,{ariaHideApp:!1,isOpen:T,onRequestClose:function(){return I(!T)},children:(0,n.jsx)(nt.t,{isModalOpen:T,setIsModalOpen:I,ratingValue:k,setRatingValue:D,currentProductId:t.courseId})}):null]})})),ht=r(45994),pt=r(89627);function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vt=T((function(e){var t=e.currentProductDetails,r=e.currentCourseMockTests,s=e.doClearCourseData,u=e.currentCourseId,h=e.userEnrollmentState,p=e.isCurrentProductFromBundlde,f=e.isCourseExpired,v=e.currentBundleId,m=e.isCourseFree,S=e.isCoursePrivate,x=e.isSellIndividualEnabled,b=e.isEnrolling,g=e.doEnrollToCourse,C=e.allBundleCourseIds,j=(e.currentLessonId,e.sharedIsUserLoggedIn),T=e.doSetPostSigninRoute,w=e.currentCoursePricing,k=e.currentCourseSeoTitle,E=e.currentBundleSeoTitle,P=e.currentReviewData,L=(0,st.$)(["product","common"]).t,O=yt(o.useState(!1),2),R=O[0],A=O[1],_=yt(o.useState(5),2),F=_[0],B=_[1],M=r.mockTestDetails,N=w&&w.selctedVariablePrice?w.selctedVariablePrice.priceId:0,G=w&&w.courseEndDate&&te()(w.courseEndDate).set({hour:23,minute:59,second:59}),W=!!te()(new Date).isAfter(G),z=function(){if(fe.Gj.pricing_model!==U._n.SUBSCRIPTION_TYPE)return m?void(b||(j?g(t.courseId,C):(T({href:{pathname:a.default.pathname,query:a.default.query},as:a.default.asPath}),a.default.push({pathname:l.y4.signup})))):void(j?a.default.push({pathname:l.y4.checkout,query:{courseId:u,priceId:N}},l.XC.checkout({courseId:u,priceId:N})):(T({href:{pathname:a.default.pathname,query:a.default.query},as:a.default.asPath}),a.default.push({pathname:l.y4.signup})));a.default.push(l.y4.subscriptions)},H=M[Object.keys(M)[0]],V=H.scheduleStartDate,Q=Object.keys(M)[0],q=s||null,Z=function(e){a.default.push({pathname:l.y4.testResult,query:{id:Q,retakeCount:e}},l.XC.testResult({id:Q,retakeCount:e}))},X=!0;H&&H.resultScheduleTime&&(X=!(new Date(H.resultScheduleTime)>new Date));var Y=!1;h===y.ri.PURCHASED||m||(Y=!0);var $=b||f||S||!x;fe.Gj.pricing_model===U._n.SUBSCRIPTION_TYPE&&($=!1);return H?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ot.Z,{}),(0,n.jsx)(c.W2,{children:(0,n.jsxs)(i.xu,{as:"main",minHeight:"80vh",px:[0,0,10],children:[(0,n.jsx)(i.kC,{as:"section",pb:2,justifyContent:"flex-start",bg:"surface",children:(0,n.jsx)(i.kC,{p:3,width:"100%",justifyContent:"space-between",children:(0,n.jsxs)(i.xu,{p:3,mx:"auto",width:"100%",maxWidth:"dashboardsMaxW",children:[(0,n.jsxs)(i.kC,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,n.jsx)(i.xu,{children:(0,n.jsx)(nt.uF,{type:t.courseType,title:t.courseTitle,shortDesc:t.courseShortDescription,isCurrentProductFromBundlde:p,rating:t.courseRating,isReviewsEnabled:t.isReviewsEnabled,isCourseExpired:f})}),P&&t.isReviewsEnabled&&j&&h===y.ri.PURCHASED?(0,n.jsx)(i.xu,{sx:{minWidth:"max-content",mt:[2,2,0]},children:(0,n.jsx)(c.zx,{onClick:function(){return A(!R)},disabled:P.isCurrentUserReviewed,buttonType:"outline",buttonSizeVariant:"small",colorVariant:P.isCurrentUserReviewed?"disabled":"primary",text:L("product:addReview"),width:"100%"})}):null]}),(0,n.jsx)(i.xu,{my:11}),(0,n.jsxs)(i.kC,{alignItems:"center",justifyContent:"space-between",mx:[2,0,0],flexWrap:"wrap",children:[(0,n.jsx)(i.xu,{mb:[4,4,0],width:["100%","auto"],children:(0,n.jsx)(I.G1,{totalMarks:H.totalMarks,totalMinutes:H.mockTestDuration,totalQuestions:H.totalQuestions,expiresOn:t.studentCourseExpiryDate,isCourseExpired:W,isComingSoon:H.mockTestStatus===y.mL.COMINGSOON})}),(0,n.jsx)(i.xu,{width:["100%","auto"],children:(0,n.jsx)(I.i3,{mockTest:H,currentCourseId:u,currentCourseMockTests:r,mockTestId:Number(Q),clearCourseData:q,userEnrollmentState:h,disableInMocktest:Y})})]})]})})}),new Date(V)>new Date&&(0,n.jsxs)(i.xu,{as:"section",maxWidth:"countdownMaxW",mx:"auto",children:[(0,n.jsxs)(i.kC,{ml:4,children:[(0,n.jsx)(Ve.W2T,{}),(0,n.jsx)(i.xu,{ml:1}),(0,n.jsx)(c.xv,{variant:"overline",children:L("product:mockTestIsScheduled")})]}),(0,n.jsx)(c.IT,{onTimerOver:function(){s&&s(u)},time:V,bg:"onSurface.main",color:"surface"})]}),(0,n.jsx)(i.kC,{as:"section",mt:8,mx:"auto",px:[2,3,0],justifyContent:"center",maxWidth:"dashboardsMaxW",children:(0,n.jsxs)(i.kC,{width:"100%",flexDirection:"column",py:3,children:[(fe.Gj.pricing_model===U._n.SUBSCRIPTION_TYPE?h===y.ri.PURCHASED||m:!(h!==y.ri.PURCHASED||new Date(t.studentCourseExpiryDate)<new Date)||p)?null:(0,n.jsx)(i.xu,{ml:2,width:"100%",children:(0,n.jsx)(c.zx,{onClick:function(){return z()},colorVariant:$?"disabled":"primary",disabled:$,text:fe.Gj.pricing_model===U._n.SUBSCRIPTION_TYPE?L("subscription:goPremium"):L(m?"enrollForFree":"common:buyNow")})}),H.currentRetakeCount?(0,n.jsxs)(i.xu,{p:3,bg:"surface",children:[(H.latestSubmittedStatus===y.OZ.SUBMITTED||H.latestSubmittedStatus===y.OZ.SUBMITTED_AFTER_TIMEUP)&&H.currentRetakeCount>1&&X&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.xu,{children:[(0,n.jsx)(c.X6,{variant:"h2",children:L("latestAttempt")}),(0,n.jsx)(i.xu,{my:6,children:H.secondAttemptIsUnderEvaluation||H.secondAttemptIsUnderRevaluation?(0,n.jsx)(c.X6,{variant:"h6",textTransform:"capitalize",children:H.secondAttemptIsUnderRevaluation?L("product:underRevaluation"):L("product:underEvaluation")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.xv,{variant:"overline",children:L("score")}),(0,n.jsx)(i.xu,{my:2}),(0,n.jsxs)(i.kC,{alignItems:"flex-end",justifyContent:"space-between",children:[(0,n.jsxs)(i.kC,{alignItems:"center",children:[(0,n.jsx)(c.X6,{color:"primary.light",variant:"h1",children:H.latestAttemptScore}),(0,n.jsx)(i.xu,{mx:2}),(0,n.jsx)(c.X6,{color:"onSurface.light",variant:"h2",children:L("outOf",{count:H.totalMarks})})]}),(0,n.jsx)(c.zx,{buttonType:"text",IconComponent:D.hdK,iconRight:!0,text:L("product:viewResult"),colorVariant:"primary",onClick:function(){Z(pt.Xm.LATEST)}})]})]})})]}),(0,n.jsx)(i.xu,{my:7})]}),(H.firstSubmittedStatus===y.OZ.SUBMITTED||H.firstSubmittedStatus===y.OZ.SUBMITTED_AFTER_TIMEUP)&&X&&(0,n.jsxs)(i.xu,{my:4,children:[(0,n.jsx)(c.X6,{variant:"h2",children:L("firstAttempt")}),(0,n.jsx)(i.xu,{my:6,children:H.firstAttemptIsUnderEvaluation||H.firstAttemptIsUnderRevaluation?(0,n.jsx)(c.X6,{variant:"h6",textTransform:"capitalize",children:H.firstAttemptIsUnderRevaluation?L("product:underRevaluation"):L("product:underEvaluation")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.xv,{variant:"overline",children:L("score")}),(0,n.jsx)(i.xu,{my:2}),(0,n.jsxs)(i.kC,{alignItems:"flex-end",justifyContent:"space-between",children:[(0,n.jsxs)(i.kC,{alignItems:"center",children:[(0,n.jsx)(c.X6,{color:"secondary.dark",variant:"h1",children:H.firstAttemptScore}),(0,n.jsx)(i.xu,{mx:2}),(0,n.jsx)(c.X6,{color:"onSurface.light",variant:"h2",children:L("outOf",{count:H.totalMarks})})]}),(0,n.jsx)(c.zx,{buttonType:"text",IconComponent:D.hdK,iconRight:!0,text:L("product:viewResult"),colorVariant:"primary",onClick:function(){Z(pt.Xm.FIRST)}})]})]})})]})]}):null,H&&(H.latestSubmittedStatus===y.OZ.SUBMITTED||H.latestSubmittedStatus===y.OZ.SUBMITTED_AFTER_TIMEUP)&&H.resultScheduleTime&&!X&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.xv,{variant:"body1",textAlign:"center",children:[L("product:scheduledResult")," ",te()(H.resultScheduleTime).format("lll")]})}),(0,n.jsx)(i.xu,{mx:2,children:(0,n.jsx)(c.iz,{})}),(0,n.jsxs)(i.xu,{pt:10,children:[t.isDiscussionEnabled?(0,n.jsx)(I.H7,{courseId:u,bundleId:v,courseSeoTitle:k,bundleSeoTitle:E}):null,t.isNotesEnabled&&fe.Gj.bookmarks?(0,n.jsx)(i.xu,{pt:7,children:(0,n.jsx)(I.qT,{courseId:u,productSeo:t.courseSeoTitle})}):null]}),(0,n.jsx)(i.xu,{as:"section",p:3,my:8,maxWidth:["100%","100%","80%"],sx:{"&:empty":{display:"none"}},children:t.courseDescription&&(0,n.jsx)(ht.Z,{about:t.courseDescription,productType:t.courseType})}),(0,n.jsx)(i.xu,{as:"section",p:3,my:8,maxWidth:["100%","100%","70%"],sx:{"&:empty":{display:"none"}},children:t.isShowAuthorsEnabled&&(0,n.jsx)(rt.S3,{})}),(0,n.jsxs)(i.xu,{as:"section",p:3,my:8,maxWidth:["100%","100%","70%"],sx:{"&:empty":{display:"none"}},children:[t.isReviewsEnabled&&(0,n.jsx)(rt.JH,{courseSeoTitle:t.courseSeoTitle,courseId:t.courseId}),t.isFaqEnabled?(0,n.jsx)(it.Z,{}):null]})]})})]})}),(0,n.jsx)(d.Z,{}),P&&t.isReviewsEnabled&&j&&h===y.ri.PURCHASED?(0,n.jsx)(c.u_,{ariaHideApp:!1,isOpen:R,onRequestClose:function(){return A(!R)},children:(0,n.jsx)(nt.t,{isModalOpen:R,setIsModalOpen:A,ratingValue:F,setRatingValue:B,currentProductId:u})}):null]}):null})),mt=r(3258),St=r(23295),xt=r(98782),bt=r.n(xt),gt=r(8853),Ct=r(16455),jt=r(71656),Tt=r(83461),It=r(23679),wt=r.n(It),kt=function(e){var t=e.lessonId,r=e.sectionId,o=e.courseId,s=e.title,i=e.doSetCurrentLesson,c=e.inPlayer,u=e.currentLesson,d=e.courseSeoTitle,h=e.handleScroll,p=e.index,f=e.currentBundleId,v=e.currentBundleSeoTitle,m=e.currentTestSeriesLessonId,S=e.currentLessonPlayerQuizState,x=e.doClearCourseData,b=e.currentProductType,g=(0,Tt.B7)().theme;return(0,n.jsxs)(q.kC,{pl:2,onClick:function(){return function(){i({courseId:o,sectionId:r,lessonId:t},t);var e={lessonId:t,sectionId:r,productSeo:v||d,subProductSeo:v?d:null,template:1,disableLessonChange:!0};if(h(t,p),b===y.VQ.TEST_SERIES&&(e.testSeries=1),c)return a.default.replace({pathname:l.y4.lessonPlayer,query:{bundleId:f,courseId:o,courseType:b===y.VQ.TEST_SERIES?y.VQ.TEST_SERIES:y.VQ.COURSE,sectionId:r,lessonId:t,template:1,disableLessonChange:!0}},l.XC.lessonPlayer(e),{shallow:!0}),void(S!==pt.eo.IDLE&&x(o));a.default.push({pathname:l.y4.lessonPlayer,query:{bundleId:f,courseId:o,courseType:b===y.VQ.TEST_SERIES?y.VQ.TEST_SERIES:y.VQ.COURSE,sectionId:r,lessonId:t,template:1}},l.XC.lessonPlayer(e))}()},bg:!c||u!==t&&m!==t?"background-basic-color-2":wt()(g.rawColors["color-primary-500"],.2),sx:{borderRadius:4,boxSizing:"border-box",width:"100%",height:"90%",justifyContent:"space-between",alignItems:"center",py:2,":hover":{bg:wt()(g.rawColors["color-primary-300"],.2)},":active":{bg:wt()(g.rawColors["color-primary-300"],.2)}},children:[(0,n.jsx)(q.xu,{sx:{width:"auto"}}),(0,n.jsx)(q.xu,{sx:{width:"inherit"},children:(0,n.jsx)(q.kC,{sx:{cursor:"pointer",alignItems:"center","& div":{fontWeight:!c||u!==t&&m!==t?"regular":"semiBold"}},children:(0,n.jsx)(Z.xv,{noOfLines:1,category:"s2",children:s})})}),(0,n.jsx)(q.xu,{sx:{width:"auto"}})]},t)};function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Et(e,t,r[t])}))}return e}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||Rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e){return function(e){if(Array.isArray(e))return Dt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){if(e){if("string"===typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dt(e,t):void 0}}var At=(0,gt.Z)((function(e){var t=(0,st.$)("product").t,r=e.currentCourseId,s=e.setPlayerFocusState,i=e.isSearchShown,c={section:0,lesson:1,tag:2},u=e.currentCourseLessons,d=e.data.filter((function(e){return e.type===c.lesson})),h={};d.map((function(e){if(u.lessonDetails[e.id])return h[u.lessonDetails[e.id].lessonTag||"general"]=[],{tag:u.lessonDetails[e.id].lessonTag||"general",lessonId:e.id}})).map((function(e){Object.keys(h).length&&h[null===e||void 0===e?void 0:e.tag]&&(h[e.tag]=Ot(h[e.tag]).concat([e.lessonId]))}));var p=[];Object.keys(h).forEach((function(e){var t,r=d.filter((function(t){return h[e].includes(t.id)}));(t=p).push.apply(t,[{type:c.tag,title:e}].concat(Ot(r)))})),d=p;var f=new URLSearchParams(window.location.search).get("search"),v=Lt(o.useState(f||""),2),m=v[0],S=v[1],x=Lt(o.useState([]),2),b=x[0],g=x[1],C=Lt(o.useState([]),2),j=C[0],T=C[1],I=Lt(o.useState(!1),2),w=I[0],k=I[1];(0,o.useEffect)((function(){0===j.length&&f&&_(!1)}),[]),(0,o.useEffect)((function(){i||0===j.length||F()}),[i]);var D=o.useRef(null),E=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";D&&D.current&&D.current.scrollToItem(t,r)},P=function(){d&&d.forEach((function(t,r){(e.currentLessonId===t.id||e.currentTestSeriesLessonId===t.id)&&E(t.id,r)}))};(0,o.useEffect)((function(){!e.inPlayer&&e.currentSectionHtmlId&&document.getElementById(e.currentSectionHtmlId).scrollIntoView();P()}),[e.currentSectionHtmlId,e.currentLessonId,e.currentTestSeriesLessonId]),document&&document.readyState&&P(),(0,o.useEffect)((function(){if(D&&D.current&&e.inPlayer){var t=0;d.forEach((function(r,n){r.id===e.currentSelectedSectionId&&(t=n>0?n-1:n)})),D.current.resetAfterIndex(t,!0)}}),[e.currentSelectedSectionId]);var L=function(t){return(null===d||void 0===d?void 0:d.length)&&d[t].type===c.tag?Ct.R5.conceptLessonHeight:d[t]&&d[t].id===e.currentSelectedSectionId&&e.inPlayer?Ct.R5.sectionExpandedHeight:Ct.R5.itemHeight},O=function(t){var o=t.index,s=t.style;if(d[o]&&d[o].type===c.tag)return(0,n.jsx)(q.kC,{sx:Pt({},s,{my:2,mt:4}),children:(0,n.jsx)(Z.xv,{category:"h6",textTransform:"capitalize",children:"".concat(d[o].title)})});if(d[o]&&d[o].type===c.lesson||j[o].type===c.lesson){var i=0===b.length?d[o].id:j[o].id,a=e.currentCourseLessons.lessonDetails[i];a&&e.currentCourseMockTests&&e.currentCourseMockTests.mockTestDetails[a.mockTestId]&&e.currentCourseMockTests.mockTestDetails[a.mockTestId].mockTestStatus;return e.currentCourseCompletionStats&&e.currentCourseCompletionStats.includes(i),(0,n.jsx)(q.xu,{sx:Pt({},s,{py:0}),children:a&&(0,n.jsx)(kt,{index:o,title:a.lessonTitle,courseId:r,sectionId:a.sectionId,currentLesson:e.currentLessonId,lessonId:a.id,inPlayer:e.inPlayer,doSetCurrentLesson:e.doSetCurrentAccessingLesson,courseSeoTitle:e.currentCourseSeoTitle,handleScroll:E,currentBundleId:e.currentBundleId,currentBundleSeoTitle:e.currentBundleSeoTitle,currentTestSeriesLessonId:e.currentTestSeriesLessonId,currentLessonPlayerQuizState:e.currentLessonPlayerQuizState,doClearCourseData:e.doClearCourseData,currentProductType:e.currentProductType})})}return null},R={shouldSort:!0,tokenize:!0,threshold:.4,location:0,distance:10,maxPatternLength:32,minMatchCharLength:3,keys:["lessonTitle"]},A=function(t,n,o){var s={lessonId:e.currentLessonId,sectionId:e.currentCourseSectionId,productSeo:e.currentBundleSeoTitle?e.currentBundleSeoTitle:e.currentCourseSeoTitle,subProductSeo:e.currentBundleSeoTitle?e.currentCourseSeoTitle:null,search:o?"":m},i={bundleId:e.currentBundleId,courseId:r,sectionId:e.currentCourseSectionId,lessonId:e.currentLessonId,courseType:e.currentProductType,search:o?"":m};a.default.replace({pathname:t,query:i},n(s),{shallow:!0})},_=function(t){e.inPlayer||m&&e.userEnrollmentState===y.ri.PURCHASED||e.inPlayer&&e.userEnrollmentState===y.ri.NOT_ENROLLED?A(l.y4.lessonPlayer,l.XC.lessonPlayer,t):m&&e.userEnrollmentState===y.ri.NOT_ENROLLED&&(e.currentBundleSeoTitle?A(l.y4.bundleCourseSales,l.XC.bundleCourseSales,t):A(l.y4.courseSales,l.XC.courseSales,t));var r=Object.values(e.currentCourseLessons.lessonDetails),n=new(bt())(r,R).search(m);if(!t)if(m&&0===n.length)k(!0),g(n);else{g(n);var o=[];n.filter((function(t,r){return e.currentCourseLessons.lessonIds.find((function(e,r){if(e===t.id){var n={type:1,id:t.id,dataId:r,parentId:t.sectionId};o.push(n)}}))})),T(o),k(!1)}},F=function(){g([]),T([]),S(""),_(!0),k(!1)},U=e.data.filter((function(e){return e.type===c.section})).map((function(t){var r=e.currentCourseSections.sectionDetails[t.id];return{value:t.id,label:null===r||void 0===r?void 0:r.sectionTitle}}));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.xu,{mt:2}),(0,n.jsx)(Z.xv,{category:"h4",children:t("result:selectSection")}),(0,n.jsx)(q.xu,{mt:2}),(0,n.jsx)(q.xu,{mx:0,children:(0,n.jsx)(Z.Ph,{onChange:function(t){return r=null===t||void 0===t?void 0:t.value,n=0,o="0",void(r!==e.currentSelectedSectionId&&(e.selectSection(r,n,o),e.inPlayer&&E(r,n,"auto")));var r,n,o},options:U,defaultValue:e.currentCourseSections.sectionDetails[e.currentSelectedSectionId]?{value:e.currentCourseSections.sectionDetails[e.currentSelectedSectionId].id,label:e.currentCourseSections.sectionDetails[e.currentSelectedSectionId].sectionTitle}:{value:"",label:""}})}),(0,n.jsx)(q.xu,{pt:4}),i&&(0,n.jsx)(q.kC,{px:e.inPlayer?1:0,children:(0,n.jsx)(q.xu,{mx:e.inPlayer?1:4,sx:{width:"100%"},children:(0,n.jsx)(Z.nv,{onFocus:function(){s&&s(!0)},onBlur:function(){s&&s(!1)},name:"search",type:"text",placeholderText:t("searchHere"),onChange:function(e){return S(e.target.value)},value:m,onKeyDown:function(e){return"Enter"===e.key&&_(!1)},icon:m?jt.q.closeCircle:void 0,iconPosition:"follow",onClickIcon:F})})}),(0,n.jsx)(q.xu,{id:"syllabus-list",sx:{borderRadius:"syllabus",overflow:"hidden",minWidth:18,height:e.inPlayer?"105%":"auto"},children:w?(0,n.jsxs)(q.xu,{mt:7,sx:{textAlign:"center"},children:[(0,n.jsx)(Z.xv,{category:"h5",textTransform:"capitalize",children:t("noResultsFound")}),(0,n.jsx)(q.xu,{my:1}),(0,n.jsx)(Z.xv,{category:"p1",children:t("tryAgain")})]}):e.fixHeight?(0,n.jsx)(St.Z,{children:function(e){var t=e.height,r=e.width;return(0,n.jsx)(mt.S_,{ref:D,itemSize:L,itemCount:0===b.length?d.length:j.length,height:t,width:r,itemData:0===b.length?d:j,children:O})}}):(0,n.jsx)(St.Z,{disableHeight:!0,children:function(e){var t=e.width;return(0,n.jsx)(mt.S_,{ref:D,itemSize:L,itemCount:0===b.length?d.length:j.length,height:0===b.length?Ct.R5.itemHeight*d.length:Ct.R5.itemHeight*j.length,width:t,itemData:0===b.length?d:j,children:O})}})})]})})),_t=r(79892),Ft=r.n(_t),Ut=function(e){var t=e.setAttachmentModalState;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ft(),{id:"b6704e8c05eea684",children:".sticky-tabs{position:-webkit-sticky;\nposition:-moz-sticky;\nposition:-o-sticky;\nposition:-ms-sticky;\nposition:-webkit-sticky;\nposition:sticky}"}),(0,n.jsx)(i.xu,{px:2,py:2,bg:"surface",children:(0,n.jsx)(i.xu,{bg:"surface",height:"100%",width:"100%",sx:{overflow:"auto"},display:["auto","auto","none"],children:(0,n.jsx)(At,{inPlayer:!0,fixHeight:!1,setAttachmentModalState:t})})})]})};function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Gt(e,t){return!t||"object"!==zt(t)&&"function"!==typeof t?Bt(e):t}function Wt(e,t){return Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wt(e,t)}var zt=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Nt(e);if(t){var o=Nt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Gt(this,r)}}var Vt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(u,e);var t,r,s,l=Ht(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).setPlayerFocusState=function(e){t.setState({isPlayerOutOfFocus:e||!1})},t.toogleLivePlayerMode=function(e){e||t.setState({liveStatus:ne.yi.IDLE,liveServerName:null}),t.setState({isLivePlayerMode:e}),(0,He.s2)()||t.setState({isSemiFullScreen:e})},t.toogleLiveChatDisplay=function(){t.setState({showLiveChat:!t.state.showLiveChat})},t.updateLiveStatus=function(e){t.setState({liveStatus:e.liveStatus})},t.switchToBookmarkTab=function(e){t.setState({enableBookmarkTab:e})},t.toggleSearch=function(){t.setState({isSearchShown:!t.state.isSearchShown})},t.state={isFullScreen:!1,isSemiFullScreen:!1,isPlayerOutOfFocus:!1,attachmentModalState:!1,attachmentUrls:{},attachmentLessonId:0,attachmentLessonTitle:"",isAttachmentDisabled:!1,isLivePlayerMode:!1,liveStatus:ne.yi.IDLE,liveServerName:null,enableBookmarkTab:!1,showLiveChat:!0,isSearchShown:!1,resourceLessonId:0},t.playerRef=o.createRef(),t.setPLayerSemiFullScreenState=t.setPLayerSemiFullScreenState.bind(Bt(t)),t.handleFullscreenChange=t.handleFullscreenChange.bind(Bt(t)),t.setAttachmentModalState=t.setAttachmentModalState.bind(Bt(t)),t}return t=u,(r=[{key:"componentDidMount",value:function(){window.addEventListener("fullscreenchange",this.handleFullscreenChange,!0),(0,pe._y)()}},{key:"componentDidUpdate",value:function(e,t){a.default.query.search&&!t.isSearchShown&&this.setState({isSearchShown:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("fullscreenchange",this.handleFullscreenChange,!0),(0,pe.ET)()}},{key:"getAspectRatio",value:function(){return this.state.isFullScreen&&!this.state.isLivePlayerMode?window.screen.width/window.screen.height:16/9}},{key:"setPLayerSemiFullScreenState",value:function(e){this.state.isSemiFullScreen!==e&&this.setState({isSemiFullScreen:e||!1})}},{key:"handleFullscreenChange",value:function(){document.fullscreenElement?(this.setState({isFullScreen:!0}),console.log("handleFullscreenChange Element: ".concat(document.fullscreenElement.id," entered full-screen mode."))):(this.setState({isFullScreen:!1}),console.log("handleFullscreenChange Leaving full-screen mode."))}},{key:"setAttachmentModalState",value:function(e,t,r,n,o,s){this.setState({attachmentModalState:e,attachmentUrls:t,attachmentLessonId:r,attachmentLessonTitle:n,isAttachmentDisabled:o,resourceLessonId:s})}},{key:"render",value:function(){var e=this.props,t=e.currentProductDetails,r=e.courseProgress,o=e.userEnrollmentState,s=e.sharedIsUserLoggedIn,l=e.currentBundleSeoTitle;t.courseType===y.VQ.TEST_SERIES&&((0,w.Op)(this.props.currentCourseSections),(0,w.T3)(this.props.currentCourseMockTests));var u=this.state,h=u.isSemiFullScreen,p=u.isLivePlayerMode,f=u.isSearchShown,v=this.getAspectRatio(),m=256;t.courseType===y.VQ.COURSE&&(m=180);var S=!!new URLSearchParams(window.location.search).get("embedPlayer"),x=a.default.query.embedHeader||"";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.Global,{styles:function(){return{"html, #syllabus-list div":{scrollBehavior:"smooth"}}}}),(0,n.jsxs)(i.kC,{id:"lesson-player",as:"main",height:"100vh",width:"100%",sx:{overflow:"hidden",position:"sticky",top:0},children:[(0,n.jsxs)(i.xu,{as:"section",width:["100%","100%",this.state.showLiveChat?"70%":"100%"],height:["100vh","100%"],sx:{display:["flex","initial"],overflowY:["hidden","scroll"],position:"static",flexGrow:1,flexDirection:"column"},children:[(0,n.jsxs)(i.xu,{children:[(0,n.jsx)(i.xu,{id:"player-header",sx:{boxShadow:"default"},children:(0,n.jsx)(I.Mi,{title:x||t.courseTitle,progress:r,courseId:t.courseId,sharedIsUserLoggedIn:s,enrollmentState:t.enrollmentState,isReviewsEnabled:t.isReviewsEnabled,currentReviewData:this.props.currentReviewData,setPlayerFocusState:this.setPlayerFocusState,currentBundleSeoTitle:l,hasProgress:!0})}),(0,n.jsx)(i.xu,{sx:{display:["block","block","none"]},children:(0,n.jsx)(c.oM,{ratio:v,isSemiFullScreen:h,children:(0,n.jsx)(i.xu,{sx:{height:["100%","100%","100vh"]},children:t.courseType===y.VQ.TEST_SERIES?(0,n.jsx)(I.qZ,{}):(0,n.jsx)(I.yc,{isEmbedPlayer:S,forwardedRef:this.playerRef,sharedIsUserLoggedIn:s,setPLayerSemiFullScreenState:this.setPLayerSemiFullScreenState,isSemiFullScreen:this.state.isSemiFullScreen,isPlayerOutOfFocus:this.state.isPlayerOutOfFocus,courseType:t.courseType,userEnrollmentState:o,toogleLivePlayerMode:this.toogleLivePlayerMode,toogleLiveChatDisplay:this.toogleLiveChatDisplay,showLiveChat:this.state.showLiveChat,liveServerData:{liveStatus:this.state.liveStatus},switchToBookmarkTab:this.switchToBookmarkTab})})})}),(0,n.jsx)(i.xu,{sx:{display:["none","none","block"]},children:(0,n.jsx)(i.xu,{sx:{height:["100%","100%","100vh"]},children:t.courseType===y.VQ.TEST_SERIES?(0,n.jsx)(I.qZ,{}):(0,n.jsx)(I.yc,{isEmbedPlayer:S,forwardedRef:this.playerRef,sharedIsUserLoggedIn:s,setPLayerSemiFullScreenState:this.setPLayerSemiFullScreenState,isSemiFullScreen:this.state.isSemiFullScreen,isPlayerOutOfFocus:this.state.isPlayerOutOfFocus,courseType:t.courseType,userEnrollmentState:o,toogleLivePlayerMode:this.toogleLivePlayerMode,toogleLiveChatDisplay:this.toogleLiveChatDisplay,showLiveChat:this.state.showLiveChat,liveServerData:{liveStatus:this.state.liveStatus},switchToBookmarkTab:this.switchToBookmarkTab})})})]}),(0,n.jsxs)(i.xu,{mb:1,height:["min-content","auto"],sx:{overflow:["auto","hidden"],overflowX:"hidden",display:["block","block","none"]},children:[(0,n.jsx)(Ut,{setAttachmentModalState:this.setAttachmentModalState}),!h&&(0,n.jsx)(i.xu,{height:"max-content",sx:{display:["none","none","block"]},children:(0,n.jsx)(d.Z,{})})]}),(0,He.s2)()&&p&&(0,n.jsx)(i.xu,{sx:{display:["block","block","none"],overflow:"hidden"},height:["100%","auto"],children:(0,n.jsx)(ze,{updateLiveStatus:this.updateLiveStatus,setPlayerFocusState:this.setPlayerFocusState})})]}),p?(0,n.jsx)(i.kC,{as:"section",bg:"surface",height:"100%",width:["0%","0%",this.state.showLiveChat?"25%":"0%"],minWidth:[0,0,this.state.showLiveChat?"syllabusMinW":0],flexDirection:"column",sx:{overflow:"hidden",display:["none","none","initial"],borderLeftWidth:1,borderLeftColor:"border",borderLeftStyle:"solid"},children:(0,n.jsx)(ze,{updateLiveStatus:this.updateLiveStatus,setPlayerFocusState:this.setPlayerFocusState})}):(0,n.jsx)(i.kC,{as:"section",bg:"surface",height:"100%",width:S?"0%":["0%","0%","30%"],minWidth:S?"0%":[0,0,"syllabusMinW"],flexDirection:"column",sx:{overflow:"hidden",display:["none","none","initial"],borderLeftWidth:1,borderLeftColor:"border",borderLeftStyle:"solid"},children:(0,n.jsx)(i.xu,{pb:s?m:94,height:"100%",width:"100%",minWidth:"syllabusMinW",sx:{overflow:"hidden",zIndex:3},px:3,children:(0,n.jsx)(At,{fixHeight:!0,inPlayer:!0,setPlayerFocusState:this.setPlayerFocusState,signedUrlAuthToken:t.signedUrlAuthToken,setAttachmentModalState:this.setAttachmentModalState,isSearchShown:f})})})]})]})}}])&&Mt(t.prototype,r),s&&Mt(t,s),u}(o.Component),Qt=(0,h.Z)(["common","product"])(T(Vt)),qt=r(70282),Zt=r(81080),Xt=r(26350),Yt=r(75814),$t=r(71751),Kt=r(21155),Jt=r(58914),er=r(73001),tr=r(1550),rr=r(54344),nr=r(19731),or=function(){};var sr=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constructData=function(e){var t,r,n,o=e.userEnrollmentState===y.ri.PURCHASED;return{title:null===e||void 0===e||null===(t=e.route)||void 0===t||null===(r=t.params)||void 0===r?void 0:r.title,courseId:null===e||void 0===e?void 0:e.currentCourseId,certificateAccessData:{isCoursePurchased:o,userSelectedDownloadDir:null===e||void 0===e?void 0:e.userSelectedDownloadDir,sharedIsUserLoggedIn:null===e||void 0===e?void 0:e.sharedIsUserLoggedIn,userEnrollmentState:null===e||void 0===e?void 0:e.userEnrollmentState},customerConfig:fe.Gj,courseCertificate:null===e||void 0===e?void 0:e.currentCourseCertificate,certificateFetchStatus:null===e||void 0===e||null===(n=e.currentCourseCertificate)||void 0===n?void 0:n.fetchStatus}}},ir=r(4854);function ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lr(e){return lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lr(e)}function cr(e,t){return!t||"object"!==dr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e,t){return ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ur(e,t)}var dr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function hr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=lr(e);if(t){var o=lr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return cr(this,r)}}function pr(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}(c,t);var r,o,s,i=hr(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).onMountCertificateCard=function(){var e=t.props,r=e.currentCourseCertificate,n=e.currentCourseId,o=r.certificateUrl,s=(0,ir.w2)(o);(0,pe.By)(pe.e$.STORAGE_TYPE_CERTIFICATES,s,n).then((function(e){e&&(t.setState({downloadState:pe.LQ.DOWNLOADED,certificateFilePath:e}),console.log("certificate is already downloaded"))})).catch((function(e){t.setState({downloadState:pe.LQ.NOT_DOWNLOADED}),console.log("checkAndUpdateFilePath: ",e)}))},t.onLoadGetCertificateMessage=function(e){var t={heading:fe.oc.t("Certificate"),message:fe.oc.t("this_course_has_certificate")};return 0===e.certificateTests.length?t={heading:fe.oc.t("No_tests_added"),message:fe.oc.t("No_tests")}:e.isCompleted?e.isElegible?e.certificateUrl&&(t={heading:fe.oc.t("EXCELLENCE_CERTIFICATE"),message:fe.oc.t("You_have_earned_a_certificate_in_this_course_congratulations_keep_it_up")}):t={heading:fe.oc.t("Pass_all_the_tests"),message:fe.oc.t("All_test_must_be_passed_to_download_the_certificate")}:t={heading:fe.oc.t("Complete_all_the_tests"),message:fe.oc.t("All_test_must_be_complete_to_download_the_certificate")},t},t.progressCallback=function(e){t.setState({downloadState:pe.LQ.IN_PROGRESS,downloadProgressPercentage:"".concat(Math.floor(100*e),"%")})},t.successCallback=function(e){t.setState({downloadState:pe.LQ.DOWNLOADED,downloadId:0,certificateFilePath:e})},t.failureCallback=function(){t.setState({downloadState:pe.LQ.FAILED})},t.onCertificateDownloadClicked=function(e,r,n){t.state.downloadState===pe.LQ.NOT_DOWNLOADED||t.state.downloadState===pe.LQ.FAILED?((0,pe.aG)(e.certificateUrl,r,pe.e$.STORAGE_TYPE_CERTIFICATES,n,t.progressCallback,t.successCallback,t.failureCallback).then((function(e){t.setState({downloadId:e})})),t.setState({downloadState:pe.LQ.IN_QUEUE})):t.state.downloadState===pe.LQ.DOWNLOADED&&(0,pe.KP)(t.state.certificateFilePath)},t.onDownloadActionButtonText=function(){return t.state.downloadState===pe.LQ.IN_PROGRESS?"".concat(fe.oc.t("Downloading")," ").concat(t.state.downloadProgressPercentage):t.state.downloadState===pe.LQ.DOWNLOADED?fe.oc.t("View_certificate"):t.state.downloadState===pe.LQ.FAILED?fe.oc.t("Download_failed"):t.state.downloadState===pe.LQ.IN_QUEUE?fe.oc.t("Download_in_queue"):t.state.downloadState===pe.LQ.NOT_DOWNLOADED?fe.oc.t("download"):fe.oc.t("Loading")},t.onLoadGetIsDownloadActionIsInProgress=function(){return t.state.downloadState===pe.LQ.UNKNOWN||t.state.downloadState===pe.LQ.IN_QUEUE||t.state.downloadState===pe.LQ.IN_PROGRESS},t.goToTestPlayer=function(e){!function(e){a.default.replace({pathname:l.y4.testPlayer,query:{id:e.quiz_id}},l.XC.testPlayer({id:e.quiz_id}),{shallow:!0})}(e)},t.onHandleBuy=function(e,t){t?a.default.push(l.y4.subscriptions):function(e){a.default.push(l.y4.checkout,l.XC.checkout({courseId:e,priceId:0}))}(e)},t.certificateUtils=new sr,t.state={downloadState:pe.LQ.UNKNOWN,downloadProgressPercentage:0,downloadId:0,certificateFilePath:null},t}return r=c,(o=[{key:"render",value:function(){var t,r={goBack:or,goToTestPlayer:this.goToTestPlayer,openQuizPlayer:ir.Px,clearCourseData:null===(t=this.props)||void 0===t?void 0:t.doClearCourseData,certificateCallbacks:{onLoadGetCertificateMessage:this.onLoadGetCertificateMessage,onDownloadActionButtonText:this.onDownloadActionButtonText,onCertificateDownloadClicked:this.onCertificateDownloadClicked,onLoadGetIsDownloadActionIsInProgress:this.onLoadGetIsDownloadActionIsInProgress,onMountCertificateCard:this.onMountCertificateCard,onHandleBuy:this.onHandleBuy}};return(0,n.jsx)(e,{data:this.certificateUtils.constructData(this.props),callbacks:r})}}])&&ar(r.prototype,o),s&&ar(r,s),c}(o.Component);return(0,p.$)("selectCurrentCourseCertificate","selectCurrentCertificateFetchStatus","selectCurrentCourseId","selectUserSelectedDownloadDir","selectUserEnrollmentState","selectSharedIsUserLoggedIn","doClearCourseData",t)}var fr=function(e){var t=e.isModalOpen,r=e.setModal,o=e.userEnrollmentState,s=e.sharedIsUserLoggedIn,i=e.courseId,a=e.allowWriteAccess,l=e.customerConfig,c=e.onHandleBuy,u=void 0===c?function(){return!1}:c,d=(0,st.$)("discussion").t,h=l.pricing_model===Kt._n.SUBSCRIPTION_TYPE;return(0,n.jsx)(Z.u_,{isOpen:s&&t&&o!==Kt.T_.PURCHASED&&!a,overlayStyle:{zIndex:999},contentStyle:{marginBottom:2,padding:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.3)"},children:(0,n.jsx)(q.xu,{px:7,py:5,sx:{borderWidth:[1],borderColor:"color-primary-500",width:["100vw",21,21],height:["100%",17,17]},children:(0,n.jsxs)(q.kC,{sx:{justifyContent:"center",flexDirection:"column",height:"100%"},children:[(0,n.jsxs)(q.kC,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,n.jsx)(Z.xv,{textTransform:"capitalize",alignment:"center",category:"p1",children:d(h?"subscription:subscribeMessage":"buyToProceed")}),(0,n.jsx)(Z.Bz,{animateScaleValue:1.1,size:"h6",onClick:function(){r(!1)},children:(0,n.jsx)(Z.tv,{icon:jt.q.close,fontSize:"h4"})})]}),(0,n.jsx)(q.xu,{sx:{width:"100%",height:3}}),(0,n.jsx)(Z.zx,{type:"filled",variant:"primary",onClick:function(){u(i,h)},children:h?d("subscription:goPremium").toUpperCase():d("buy").toUpperCase()})]})})})};function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mr=function(e){var t,r=e.data,s=r.certificateFetchStatus,i=r.certificateAccessData,a=r.courseCertificate,l=r.courseId,c=r.customerConfig,u=null===e||void 0===e?void 0:e.callbacks,d=u.goToTestPlayer,h=u.openQuizPlayer,p=u.clearCourseData,f=u.certificateCallbacks,y=i.sharedIsUserLoggedIn,v=i.userEnrollmentState,m=(0,Tt.B7)().theme,S=(0,st.$)(["common","product"]).t,x=vr(o.useState(!1),2),b=x[0],g=x[1],C=(null===a||void 0===a?void 0:a.certificateUrl)&&(null===a||void 0===a?void 0:a.isCompleted)&&(null===a||void 0===a?void 0:a.isElegible);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(fr,{isModalOpen:b,setModal:g,userEnrollmentState:v,sharedIsUserLoggedIn:y,courseId:l,allowWriteAccess:v===Kt.T_.PURCHASED,customerConfig:c,onHandleBuy:f.onHandleBuy}),s===Kt.iF.SUCCESS&&a&&(null===a||void 0===a?void 0:a.certificateTests.length)?(0,n.jsxs)(q.xu,{mx:[0,3,3],mt:3,children:[(0,n.jsxs)(q.xu,{mb:4,children:[(0,n.jsx)(Z.xv,{textTransform:"capitalize",category:"h3",children:S("product:earnCertificate")}),(0,n.jsx)(Z.xv,{category:"p1",children:S("product:certificateSubHeading")})]}),(0,n.jsx)(q.xu,{children:(0,n.jsxs)(q.kC,{py:2,sx:{alignItems:"center",justifyContent:["center","flex-start"],flexWrap:["wrap","nowrap"]},children:[(0,n.jsx)(q.xu,{sx:{backgroundImage:"url('https://lyst-lib.s3.ap-south-1.amazonaws.com/illustrations/Certificate2.svg')",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"bottom",borderRadius:7,display:"flex",justifyContent:"center",backgroundColor:"background-basic-color-3",width:m.styles.certificateCardWidth,height:m.styles.certificateCardHeight},children:(0,n.jsx)(q.xu,{sx:{position:"relative",top:"10%"},children:(0,n.jsx)(Z.Ee,{src:null===c||void 0===c?void 0:c.SCHOOL_LOGO,alt:null===c||void 0===c?void 0:c.NAME,height:(null===m||void 0===m?void 0:m.sizes[7])||0,width:"100%",objectFit:"contain"})})}),(0,n.jsxs)(q.xu,{mt:[2,0],ml:[0,4],children:[(0,n.jsx)(Z.xv,{category:"p1",children:S("product:certificateSubHeading1")}),(0,n.jsx)(q.xu,{m:["auto",0],py:3,sx:{cursor:C?"pointer":"not-allowed",textDecoration:"none","& a":{color:C?"color-basic-1100":"color-basic-500"},maxWidth:"max-content"},children:(0,n.jsx)(Z.xv,{category:"p2",sx:{color:C?"color-basic-1100":"color-basic-500"},children:(null===a||void 0===a?void 0:a.certificateUrl)?(0,n.jsx)(Z.rU,{href:null===a||void 0===a?void 0:a.certificateUrl,openInNewPage:!0,children:S("product:downloadCertificate")}):S("product:downloadCertificate")})})]})]})}),(0,n.jsxs)(q.xu,{style:{overflowX:"scroll"},children:[(0,n.jsx)(q.xu,{my:4,mt:6,children:(0,n.jsx)(Z.xv,{category:"h6",textTransform:"capitalize",children:"".concat(S("product:certificateTest")," ").concat((null===a||void 0===a||null===(t=a.certificateTests)||void 0===t?void 0:t.length)?"(".concat(null===a||void 0===a?void 0:a.certificateTests.length,")"):"")})}),(0,n.jsxs)(q.xu,{mt:2,as:"table",sx:{width:"100%",borderSpacing:0,"& th,td":{px:[2,3],py:[3,5]}},children:[(0,n.jsx)(q.xu,{mb:4,as:"thead",bg:"background-basic-color-3",children:(0,n.jsxs)(q.xu,{as:"tr",children:[(0,n.jsx)(q.xu,{as:"th",children:(0,n.jsx)(Z.xv,{category:"label",children:"#"})}),(0,n.jsx)(q.xu,{as:"th",sx:{minWidth:[13,18,20]},children:(0,n.jsx)(Z.xv,{category:"label",textTransform:"uppercase",alignment:"left",children:S("product:quizTitle")})}),(0,n.jsx)(q.xu,{as:"th",children:(0,n.jsx)(Z.xv,{category:"label",alignment:"center",textTransform:"uppercase",children:S("product:qualifyingMarks")})}),(0,n.jsx)(q.xu,{as:"th",children:(0,n.jsx)(Z.xv,{category:"label",alignment:"center",textTransform:"uppercase",children:S("product:obtainedMarks")})}),(0,n.jsx)(q.xu,{as:"th",children:(0,n.jsx)(Z.xv,{category:"label",alignment:"center",textTransform:"uppercase",children:S("product:results")})})]})}),(0,n.jsx)(q.xu,{mt:2}),(0,n.jsx)(q.xu,{as:"tbody",mt:2,sx:{"& tr td:first-of-type":{borderLeftWidth:1,borderLeftColor:"border-basic-color-3",borderLeftStyle:"solid"},"& tr td:last-of-type":{borderRightWidth:1,borderRightColor:"border-basic-color-3",borderRightStyle:"solid"},"& tr:first-of-type td":{borderTopWidth:1,borderTopColor:"border-basic-color-3",borderTopStyle:"solid"}},children:null===a||void 0===a?void 0:a.certificateTests.map((function(e,t){return(0,n.jsx)(o.Fragment,{children:(0,n.jsxs)(q.xu,{as:"tr",sx:{"& td":{borderBottomWidth:1,borderBottomColor:"border-basic-color-3",borderBottomStyle:"solid",textAlign:"center"}},children:[(0,n.jsx)(q.xu,{as:"td",children:(0,n.jsx)(Z.xv,{category:"p1",children:t+1})}),(0,n.jsx)(q.xu,{as:"td",onClick:function(){var t,r;if(y&&y){if(v!==Kt.T_.PURCHASED&&v!==Kt.T_.INVALID)return void g(!0);e.my_marks||(t=e.quiz_id,r=e.course_id,t&&((null===c||void 0===c?void 0:c.open_test_in_new_window)?h(t,p,r):d({quiz_id:t})))}},sx:{cursor:"pointer"},children:(0,n.jsx)(Z.xv,{category:"p1",alignment:"left",children:e.quiz_title})}),(0,n.jsx)(q.xu,{as:"td",children:(0,n.jsx)(Z.xv,{category:"p1",alignment:"center",children:e.pass_marks})}),(0,n.jsx)(q.xu,{as:"td",children:(0,n.jsx)(Z.xv,{category:"p1",alignment:"center",sx:{color:e.my_marks?"color-basic-1100":"color-basic-500"},children:e.my_marks?e.my_marks:"NA"})}),(0,n.jsx)(q.xu,{as:"td",children:(0,n.jsx)(Z.xv,{textTransform:"capitalize",category:"p1",alignment:"center",sx:{color:e.my_marks?"color-basic-1100":"color-basic-500"},children:e.my_marks?(0,n.jsx)(n.Fragment,{children:e.my_marks>=e.pass_marks?S("product:pass"):S("product:fail")}):"NA"})})]})},"".concat(e.quiz_id))}))})]})]})]}):null]})};function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function br(e){return br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},br(e)}function gr(e,t){return!t||"object"!==jr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cr(e,t){return Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Cr(e,t)}var jr=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Tr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=br(e);if(t){var o=br(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return gr(this,r)}}var Ir=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(i,e);var t,r,o,s=Tr(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s.call(this,e)}return t=i,r=[{key:"render",value:function(){return(0,n.jsx)(mr,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){xr(e,t,r[t])}))}return e}({},this.props))}}],r&&Sr(t.prototype,r),o&&Sr(t,o),i}(o.Component),wr=Ir,kr=r(49060);function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Er(e,t,r[t])}))}return e}function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Dr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Or=function(e){var t=e.getCurrentPosition,r=e.setPlayerFocusState,o=(0,rr.Z)(nr.Z);return(0,n.jsx)(o,{getCurrentPosition:t,setPlayerFocusState:r})},Rr=function(e){var t=e.getCurrentPosition,r=e.setPlayerFocusState,o=(0,er.Z)(tr.Z);return(0,n.jsx)(o,{getCurrentPosition:t,setPlayerFocusState:r})},Ar=function(){var e=pr(wr);return(0,n.jsx)(e,{})},_r=function(e){var t,r,s,i,a=e.productType,l=e.getCurrentPosition,c=void 0===l?function(){return null}:l,u=e.setPlayerFocusState,d=e.isBookmarkEnabled,h=e.testSeriesCompletion,p=e.courseProgress,f=e.testSeriesAvgScore,y=e.enableBookmarkTab,v=e.currentProductDetails,m=e.syllabusListData,S=e.syllabusListCallbacks,x=e.courseData,b=e.callbacks,g=e.isMobileDevice,C=e.courseFeatureData,j=e.courseFeatureHelpers,T=e.courseFeatureCallbacks,I=e.enrollmentButtonData,w=e.isSubscription,k=e.isTaxEnabled,D=e.playerCallbacks,E=e.sharedIsUserLoggedIn,P=e.userEnrollmentState,L=(0,st.$)(["common","product"]).t,O=((0,Tt.B7)().theme,(0,kr.iP)().width),R=b.gotoViewAnalytics,A=b.switchToBookmarkTab,_=b.goToCourseReview,F=v.isCertificateEnabled,U=v.courseId,B=v.isDiscussionEnabled,M=null===v||void 0===v||null===(t=v.lessons)||void 0===t||null===(r=t.lessonIds)||void 0===r?void 0:r.length,N=null===v||void 0===v||null===(s=v.mockTests)||void 0===s||null===(i=s.mockTestIds)||void 0===i?void 0:i.length,G=null===x||void 0===x?void 0:x.courseCompletionData,W=function(){return P===Kt.T_.PURCHASED?g?"syllabus":B?"discussions":"about":"about"},z=Lr(o.useState(W()),2),H=z[0],V=z[1],Q=new URLSearchParams(window.location.search).get("search");return(0,o.useEffect)((function(){"notes"!==H&&y&&(V("notes"),A(!1))})),(0,o.useEffect)((function(){g||"syllabus"!==H||V(W())}),[O]),(0,o.useEffect)((function(){Q&&g&&V("syllabus")}),[Q]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(q.xu,{pt:1,sx:{position:"sticky",top:0,borderBottom:"solid",borderWidth:1,borderColor:"border-basic-color-4",zIndex:1,overflowX:"auto",display:"-webkit-box",backgroundColor:"background-basic-color-2","::-webkit-scrollbar":{display:"none"}},children:[(0,n.jsx)(Z.fK,{link:"about",text:L("about"),activeTab:H,setActiveTab:V}),B?(0,n.jsx)(Z.fK,{link:"discussions",text:L("discussions"),activeTab:H,setActiveTab:V}):null,(0,n.jsx)(q.xu,{sx:{display:["initial","initial","none"]},children:(0,n.jsx)(Z.fK,{link:"syllabus",text:L("product:syllabus"),activeTab:H,setActiveTab:V})}),d?(0,n.jsx)(Z.fK,{link:"notes",text:L("product:bookmark"),activeTab:H,setActiveTab:V}):null,F&&(0,n.jsx)(Z.fK,{link:"certificates",text:L("product:certificates"),activeTab:H,setActiveTab:V})]}),(0,n.jsxs)(q.xu,{px:"syllabus"!==H?3:0,py:"syllabus"!==H?4:0,children:["about"===H&&(0,n.jsx)(q.xu,{mr:6,children:(0,n.jsx)(Jt.O1,{authorData:null===C||void 0===C?void 0:C.authorData,courseDetails:null===x||void 0===x?void 0:x.currentCourseDetails,bundleDetails:null===x||void 0===x?void 0:x.currentBundleDetails,courseFetchStatus:null===x||void 0===x?void 0:x.currentCourseFetchStatus,courseReviewData:null===C||void 0===C?void 0:C.courseReviewData,currentFaqData:null===C||void 0===C?void 0:C.currentFaqData,goToCourseReview:_,onHandleDeleteReview:null===T||void 0===T?void 0:T.onHandleDeleteReview,reviewDataFetchStatus:null===C||void 0===C?void 0:C.reviewDataFetchStatus,secondsToHHMMSS:null===j||void 0===j?void 0:j.secondsToHHMMSS,goToEditReview:null===T||void 0===T?void 0:T.onEditReview,isTaxEnabled:k,playerCallbacks:D,enrollmentButtonData:I,userEnrollmentState:P,isSubscription:w,sharedIsUserLoggedIn:E,courseData:x})}),"discussions"===H&&(0,n.jsx)(Rr,{getCurrentPosition:c,setPlayerFocusState:u}),"notes"===H&&(0,n.jsx)(Or,{getCurrentPosition:c,setPlayerFocusState:u}),"syllabus"===H&&(0,n.jsxs)(q.xu,{sx:{overflow:"scroll",height:"100%",width:"100%",display:["auto","auto","none"]},children:[(0,n.jsxs)(q.xu,{sx:{width:"100%"},p:4,children:[a===$t.Dl.TEST_SERIES&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.kC,{mb:6,style:{alignItems:"center",justifyContent:"space-between"},children:h?(0,n.jsxs)(n.Fragment,{children:[f&&"NaN"!==f?(0,n.jsxs)(q.xu,{sx:{alignSelf:"flex-end"},children:[(0,n.jsx)(Z.xv,{category:"c1",children:L("product:yourAverageScore")}),(0,n.jsx)(Z.xv,{category:"h4",children:f})]}):null,(0,n.jsx)(Z.zx,{disabled:h<=0,variant:"primary",size:"small",children:L("product:viewAnalytics").toUpperCase(),onClick:function(){h>0&&R&&R()}})]}):null})}),(0,n.jsxs)(q.kC,{style:{alignItems:"center"},children:[(0,n.jsx)(q.xu,{sx:{width:"100%"},mr:2,children:(0,n.jsx)(Z.ko,{indicatorColor:"secondary",progress:v.courseType===$t.Dl.COURSE?p:h})}),(0,n.jsx)(Z.xv,{category:"c2",children:"".concat(a===$t.Dl.COURSE?p:h,"%")})]}),(0,n.jsx)(Z.xv,{category:"c2",children:G&&Array.isArray(G[U])&&(0,n.jsxs)(n.Fragment,{children:[a===$t.Dl.COURSE&&(0,n.jsxs)(q.kC,{children:[(0,n.jsx)(Z.xv,{category:"c1",children:G[U].length}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",children:L("product:outOf",{count:M})}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",children:L("product:lessons")}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",textTransform:"capitalize",children:L("completed")})]}),a===$t.Dl.TEST_SERIES&&(0,n.jsxs)(q.kC,{children:[(0,n.jsx)(Z.xv,{category:"c1",children:G[U].length}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",children:L("product:outOf",{count:N})}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsxs)(Z.xv,{category:"c1",children:[" ",L("tests")]}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",textTransform:"capitalize",children:L("completed")})]})]})})]}),(0,n.jsx)(Jt.AG,Pr({},m,S,{isSearchShown:!0,fixHeight:!1}))]}),"certificates"===H&&(0,n.jsx)(Ar,{})]})]})},Fr=o.memo(_r),Ur=r(75721);function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Br(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Nr=function(e){var t=e.title,r=e.courseId,s=e.sharedIsUserLoggedIn,i=e.enrollmentState,a=e.isReviewsEnabled,l=e.currentReviewData,c=e.setPlayerFocusState,u=e.currentBundleSeoTitle,d=e.currentCourseSeoTitle,h=e.goBack,p=void 0===h?function(){return!1}:h,f=e.goToCourseDashboard,y=void 0===f?function(){return!1}:f,v=e.onHandleAddReview,m=void 0===v?function(){return!1}:v,S=(0,st.$)(["common","product"]).t,x=(0,Tt.B7)().theme,b=Mr(o.useState(!1),2),g=b[0],C=(b[1],Mr(o.useState(5),2)),j=(C[0],C[1],(0,Ur.V)(["tiny","small"])),T=function(){u?y(u):p()};return(0,n.jsxs)(q.kC,{py:2,px:3,sx:{borderBottomStyle:"solid",borderBottomColor:"border-basic-color-4",borderBottomWidth:1,maxHeight:x.sizes[7],justifyContent:"space-between",alignItems:"center",height:x.sizes[7]},children:[(0,n.jsxs)(q.kC,{style:{alignItems:"center"},children:[(0,n.jsx)(q.xu,{children:(0,n.jsx)(q.xu,{pr:[2],style:{minWidth:"min-content",cursor:"pointer"},children:(0,n.jsx)(Z.Bz,{onClick:T,children:(0,n.jsx)(Z.tv,{icon:jt.q.left,fontSize:["h6","h5"]})})})}),(0,n.jsx)(q.xu,{style:{cursor:"pointer"},title:t,onClick:T,children:(0,n.jsx)(Z.xv,{noOfLines:1,category:["c1","s1"],children:t})})]}),(0,n.jsx)(q.kC,{style:{alignItems:"center"},children:l&&a&&s&&i===Kt.T_.PURCHASED?(0,n.jsx)(n.Fragment,{children:!l.isCurrentUserReviewed&&c?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.xu,{sx:{cursor:"pointer"},children:(0,n.jsx)(Z.zx,{type:"outline",size:j,variant:"secondary",children:S("product:addReview").toUpperCase(),onClick:function(){c(!g),m(r,null,d)},leadingIcon:jt.q.star,leadingIconProps:{icon:jt.q.star,size:void 0,fontSize:"s1"}})})}):null}):null})]})},Gr=r(27693),Wr=r.n(Gr),zr=function(e){var t,r=e.title,o=e.dripData,s=(0,st.$)("product").t,i=(0,Tt.B7)().theme;return(0,n.jsxs)(q.kC,{p:3,sx:{borderRadius:"certificate",height:"100%",alignItems:"center",justifyContent:"space-between",flexDirection:"column",backgroundColor:"color-basic-1000"},children:[(0,n.jsxs)(q.xu,{my:4,sx:{textAlign:"center","& div":{my:[1,2]}},children:[(0,n.jsx)(Z.xv,{category:["p1","s1"],sx:{color:"color-basic-100"},style:{textAlign:"center"},children:r}),o&&!o.isReleased&&(0,n.jsxs)(q.kC,{style:{alignItems:"center"},children:[(0,n.jsx)(Z.tv,{icon:jt.q.calendar,color:"secondary",fontSize:["c1","s1"]}),(0,n.jsx)(q.xu,{ml:2}),(0,n.jsx)(Z.xv,{category:["c1","p1"],sx:{color:"color-basic-100"},style:{textAlign:"center"},children:s("product:lessonIsScheduled")}),(0,n.jsx)(q.xu,{ml:2}),(0,n.jsx)(Z.xv,{category:["c1","p1"],status:"secondary",style:{textAlign:"center"},children:o.releaseDate})]})]}),o&&!o.isReleased?(0,n.jsxs)(q.xu,{sx:{width:["98%","50%"]},children:[(0,n.jsxs)(q.kC,{style:{justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)(Z.tv,{icon:jt.q.timer,color:"secondary",customColor:(null===(t=i.rawColors)||void 0===t?void 0:t["color-basic-100"])||"#fffff",fontSize:["s1","h6"]}),(0,n.jsx)(q.xu,{mr:2}),(0,n.jsx)(Z.xv,{category:["c1","s1"],sx:{color:"color-basic-100"},style:{textAlign:"center"},children:s("product:countdownToRelease")})]}),(0,n.jsx)(q.xu,{my:3}),(0,n.jsx)(Z.IT,{customColor:"color-basic-100",time:null===o||void 0===o?void 0:o.lessonReleaseDateInMiliSeconds,status:"control"})]}):null,(0,n.jsx)(q.xu,{})]})},Hr=function(e){var t=e.currentCourseMockTests,r=e.mockTestId,o=e.mockTest,s=e.userEnrollmentState,i=e.clearCourseData,a=e.currentCourseId,l=e.isCourseExpired,c=e.isTrialLesson,u=e.inTestSeriesPlayer,d=e.disableInMocktest,h=e.isCourseFree,p=e.currentLessonId,f=e.openQuizPlayer,y=e.goToTest,v=e.openTestInNewWindow,m=e.isSlideQuiz,S=e.inLessonPlayer,x=e.buttonSize,b=void 0===x?"medium":x,g=e.openTestInSameWindow,C=e.setPlayerSemiFullScreenState,j=e.startTestPlayer,T=(0,st.$)(["common","product"]).t,I=!0;o&&o.maxRetakesAllowed&&(I=o.currentRetakeCount<o.maxRetakesAllowed),o.currentRetakeCount===o.maxRetakesAllowed&&o.latestSubmittedStatus!==Kt.t6.SUBMITTED&&(I=!0);var w=T("product:takeTest");o.latestSubmittedStatus===Kt.t6.IN_PROGRESS&&(w=T("product:continue")),o.latestSubmittedStatus!==Kt.t6.SUBMITTED&&o.latestSubmittedStatus!==Kt.t6.SUBMITTED_AFTER_TIMEUP||!I||(w=T("product:retakeTest"));var k=!1;return(u&&s===Kt.T_.ENROLLED&&!c&&!h||d)&&(k=!0),(0,n.jsx)(q.kC,{sx:{placeContent:"center"},children:s===Kt.T_.ENROLLED||s===Kt.T_.PURCHASED?(0,n.jsx)(n.Fragment,{children:t.mockTestIds.includes(r)?(0,n.jsx)(q.xu,{sx:{overflow:"hidden",minWidth:"min-content"},children:(0,n.jsx)(n.Fragment,{children:(o.mockTestStatus===Kt.L2.PUBLISHED||o.mockTestStatus===Kt.L2.SCHEDULED&&o.scheduleStartDate&&o.scheduleEndDate&&new Date(o.scheduleStartDate)<new Date&&new Date<new Date(o.scheduleEndDate))&&I&&(0,n.jsx)(Z.zx,{onClick:function(){return function(){if(s===Kt.T_.ENROLLED||s===Kt.T_.PURCHASED){if(o.mockTestType===Kt.EE.PRACTICE_QUIZ&&S&&!m&&g)return C(!0),void j(Kt.zy.TAKE_MOD,r,Kt.eo.TAKING_QUIZ);v?f(r||0,i,a):y(r,null,p)}}()},children:w.toUpperCase(),disabled:l||k,variant:"primary",size:b})})}):(0,n.jsx)(Z.xv,{category:"c1",children:T("unavailable")})}):(0,n.jsx)(Z.zx,{onClick:function(){return!1},children:T("product:takeTest").toUpperCase(),size:b,disabled:!0})})},Vr=r(40504),Qr=r(88316),qr=function(e){var t=e.rating,r=e.total;return(0,n.jsx)(n.Fragment,{children:r?(0,n.jsxs)(q.kC,{pt:1,pb:2,style:{alignItems:"flex-start"},children:[(0,n.jsx)(Z.TE,{rating:t}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c2",children:(0,n.jsx)("strong",{children:t})}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsxs)(Z.xv,{category:"c2",children:["(",r,")"]})]}):null})},Zr=function(e){var t=e.title,r=e.shortDesc,o=e.type,s=e.isCurrentProductFromBundlde,i=e.hideOverline,a=e.rating,l=e.isReviewsEnabled,c=e.isCourseExpired,u=e.hideBreadcrumbs,d=e.total,h=e.goToStore,p=e.customColor,f=void 0===p?"":p,y=(0,st.$)(["common","product"]).t;return(0,n.jsxs)(n.Fragment,{children:[!u&&(0,n.jsx)(q.xu,{py:2,sx:{display:["none","block","block"]},children:(0,n.jsx)(Z.xv,{category:"p2",textTransform:"capitalize",sx:{color:f||"text-basic-color"},children:(0,n.jsxs)(q.kC,{style:{flexDirection:"row"},children:[(0,n.jsx)(q.xu,{onClick:function(){return h()},sx:{cursor:"pointer"},children:(0,n.jsx)(Z.xv,{category:"c1",textTransform:"capitalize",sx:{color:f||"text-basic-color"},children:"".concat(y("product:store")," /")})}),(0,n.jsx)(q.xu,{ml:1}),o===Kt.lW.COURSE?(0,n.jsx)(Z.xv,{category:"c1",sx:{color:f||"text-basic-color"},children:"".concat(y("course")," /")}):null,o===Kt.lW.TEST?(0,n.jsx)(Z.xv,{category:"c1",sx:{color:f||"text-basic-color"},children:"".concat(y("mockTest")," /")}):null,o===Kt.lW.TEST_SERIES?(0,n.jsx)(Z.xv,{category:"c1",sx:{color:f||"text-basic-color"},children:"".concat(y("testSeries")," /")}):null,o===Kt.lW.BUNDLE?(0,n.jsx)(Z.xv,{category:"c1",sx:{color:f||"text-basic-color"},children:"".concat(y("bundle")," /")}):null,(0,n.jsx)(q.xu,{ml:1,children:(0,n.jsx)(Z.xv,{category:"c1",sx:{color:f||"text-basic-color"},children:t})})]})})}),(0,n.jsx)(q.xu,{pl:1,pt:[8,10],sx:{display:["none","block","block"]},children:(0,n.jsx)(q.kC,{style:{flexDirection:"row"},children:i?null:(0,n.jsxs)(n.Fragment,{children:[s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.xv,{category:"p1",sx:{color:f||"text-basic-color"},children:y("bundle")}),(0,n.jsx)(q.xu,{pl:1,pr:1,children:(0,n.jsx)(Z.xv,{category:"p1",sx:{color:f||"text-basic-color"},children:">"})})]}):null,(0,n.jsxs)(Z.xv,{category:"p1",sx:{color:f||"text-basic-color"},children:[o===Kt.lW.COURSE?(0,n.jsx)(n.Fragment,{children:y("course")}):null,o===Kt.lW.TEST?(0,n.jsx)(n.Fragment,{children:y("mockTest")}):null,o===Kt.lW.TEST_SERIES?(0,n.jsx)(n.Fragment,{children:y("testSeries")}):null,o===Kt.lW.BUNDLE?(0,n.jsx)(n.Fragment,{children:y("bundle")}):null]})]})})}),(0,n.jsx)(Z.xv,{category:["h6","h4"],sx:{color:f||"text-basic-color"},children:t}),a&&l?(0,n.jsx)(qr,{total:d||0,rating:a.toString()}):null,(0,n.jsx)(Z.xv,{category:["c1","p2"],sx:{color:f||"text-basic-color",marginTop:2},noOfLines:2,children:r}),c?(0,n.jsx)(q.xu,{mt:1,children:(0,n.jsx)(Z.xv,{category:["c1","s1"],sx:{color:f||"text-basic-color"},children:y("expired")})}):null]})},Xr=r(15699),Yr=function(e){var t=e.lessonTitle,r=e.courseDetails,o=e.sharedIsUserLoggedIn,s=e.goToStore,i=e.goToSubscription,a=(0,st.$)("subscription").t,l=(0,Tt.B7)().theme;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.kC,{sx:{height:"100%",alignItems:"center",backgroundColor:"color-basic-1000"},p:[1,3],pl:[1,6],children:(0,n.jsxs)(q.xu,{sx:{transform:["scale(0.8)","none"]},children:[(0,n.jsx)(q.xu,{sx:{"& h1, div":{color:"disabled"},display:["none","initial"]},children:(0,n.jsx)(Zr,{title:t,shortDesc:r.courseShortDescription,type:r.courseType,hideOverline:!0,hideBreadcrumbs:!0,goToStore:s,customColor:l.rawColors["color-basic-100"]})}),(0,n.jsx)(q.xu,{sx:{"& h1, div":{color:"disabled"},display:["initial","none"]},children:(0,n.jsx)(Zr,{title:t,shortDesc:"",type:r.courseType,hideOverline:!0,hideBreadcrumbs:!0,goToStore:s,customColor:l.rawColors["color-basic-100"]})}),(0,n.jsx)(q.xu,{my:[2,2,4]}),(0,n.jsx)(q.kC,{children:(0,n.jsx)(q.xu,{mr:3,children:!o||o&&r.subscriptionAccessData&&r.subscriptionAccessData.subscriptionId?(0,n.jsx)(Z.zx,{onClick:function(){return i()},variant:"primary",children:a("goPremium").toUpperCase()}):null})})]})})})};function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jr=function(e){var t=e.currentCoursePricing,r=e.currentProductDetails,s=e.sharedIsUserLoggedIn,i=e.showEnrollButton,a=e.isEnrolling,l=e.currentBundleId,c=e.isCurrentProductFromBundlde,u=(e.currentCourseId,e.isCourseAvailableForTrial),d=e.isCourseExpired,h=e.isCoursePrivate,p=e.isSellIndividualEnabled,f=e.isCourseFree,y=e.isBundleFree,v=e.onHandleSetVariablePrice,m=e.isSubscription,S=e.goToStore,x=e.goToSubscription,b=e.isTaxEnabled,g=e.currencyCode,C=e.lessonTitle,j=e.onHandleTestSeriesBuy,T=e.onHandleTestSeriesEnroll,I=(0,st.$)(["common","product"]).t,w=(0,Ur.V)(["small","medium"]),k=(0,Ur.V)(["tiny","small"]),D=Kr(o.useState(!1),2),E=D[0],P=D[1],L=(0,Tt.B7)().theme,O=I(f?"product:enrollForFree":"product:startAFreeTrial");c&&(O=I("product:enrollBundle"));var R=f||y;t&&t.actualPrice&&(R=!1);var A=t&&t.selctedVariablePrice?t.selctedVariablePrice.priceId:0,_=a||d||h||!p,F=r.serverDeviceType&&(r.serverDeviceType===Kt.Mg.ANDROID||r.serverDeviceType===Kt.Mg.IOS||r.serverDeviceType===Kt.Mg.ANDROID+Kt.Mg.IOS);return m?(0,n.jsx)(Yr,{sharedIsUserLoggedIn:s,lessonTitle:C,courseDetails:r,goToStore:S,goToSubscription:x}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.kC,{p:[1,3],pl:[1,6],sx:{backgroundColor:"color-basic-1000",height:"100%",alignItems:"center"},children:(0,n.jsxs)(q.xu,{sx:{transform:["scale(0.8)","none"]},children:[(0,n.jsx)(q.xu,{sx:{"& h1, div":{color:"disabled"},display:["none","initial"]},children:(0,n.jsx)(Zr,{title:C,shortDesc:r.courseShortDescription,type:r.courseType,isCourseExpired:d,hideOverline:!0,goToStore:S,customColor:L.rawColors["color-basic-100"]})}),(0,n.jsx)(q.xu,{sx:{"& h1, div":{color:"disabled"},display:["initial","none"]},children:(0,n.jsx)(Zr,{title:C,shortDesc:"",type:r.courseType,isCourseExpired:d,hideOverline:!0,goToStore:S,customColor:L.rawColors["color-basic-100"]})}),F&&(0,n.jsx)(q.xu,{children:(0,n.jsx)(Z.xv,{category:"p2",sx:{color:"color-basic-100"},children:I("product:accessOnlyMobile")})}),(0,n.jsx)(q.xu,{my:[2,2,4]}),t&&t.actualPrice&&t.selctedVariablePrice?(0,n.jsxs)(q.kC,{sx:{flexWrap:"wrap","& h2, div:nth-of-type(2)>div":{color:"disabled",alignItems:"center"}},children:[(0,n.jsx)(Qr.Z,{price:t.selctedVariablePrice.actualPrice,discountPrice:t.selctedVariablePrice.discountPrice,discountPercentage:t.selctedVariablePrice.discountPercentage,isTaxEnabled:b,currencyCode:g,status:"control",customColor:L.rawColors["color-basic-100"],customHintColor:L.rawColors["color-basic-500"]}),t.variablePrices.length?(0,n.jsxs)(q.kC,{ml:[1,4],style:{alignItems:"center"},children:[(0,n.jsx)(Z.xv,{category:"p2",sx:{color:"color-basic-100"},children:(0,n.jsxs)(q.kC,{children:[(0,n.jsx)("strong",{children:t.selctedVariablePrice.validity}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsxs)(Z.xv,{category:"p2",sx:{color:"color-basic-100"},children:[I("day",{count:t.selctedVariablePrice.validity})," ",I("validity")]})]})}),(0,n.jsx)(q.xu,{ml:[1,2]}),(0,n.jsx)(q.xu,{sx:{"& button":{py:0}},children:(0,n.jsx)(Z.zx,{variant:"secondary",type:"outline",size:k,onClick:function(){return P(!E)},children:I("change").toUpperCase()})})]}):null]}):null,(0,n.jsx)(q.xu,{my:[2,2,4]}),(r.courseStatus===Kt.iP.PUBLISHED||r.courseStatus===Kt.iP.SCHEDULED)&&(0,n.jsxs)(q.kC,{children:[!R&&(0,n.jsx)(q.xu,{mr:3,children:(0,n.jsx)(Z.zx,{onClick:function(){j(l,r.courseId,A)},variant:"primary",disabled:_,children:I(c?"buyBundle":"buyNow").toUpperCase(),size:w})}),i||u?(0,n.jsx)(q.xu,{children:(0,n.jsx)(Z.zx,{onClick:function(){a||T()},disabled:_,variant:"primary",type:"outline",size:w,children:(a?I("product:enrolling"):O).toUpperCase()})}):null]})]})}),E&&(0,n.jsx)(Vr.u_,{ariaHideApp:!1,isOpen:E,onRequestClose:function(){return P(!E)},children:(0,n.jsx)(Xr.Z,{isValidityModalOpen:E,setIsValidityModalOpen:P,doSetVariablePrice:v,currentCoursePricing:t,courseId:c?l:r.courseId,isTaxEnabled:b,currencyCode:g})})]})},en=r(79820),tn=function(e){var t=e.inLessonPlayer,r=e.isSlideQuiz,s=e.isTaxEnabled,i=e.sharedIsUserLoggedIn,a=e.enrollmentButtonData,l=e.isSubscription,c=e.openTestInNewWindow,u=e.openQuizPlayer,d=e.slideDetails,h=e.setPlayerSemiFullScreenState,p=e.openTestInSameWindow,f=(e.checkMoreOptions,e.callbacks),y=e.slideType,v=e.playerCallbacks,m=e.courseData,S=e.playerLessonData,x=v.onHandleTestSeriesBuy,b=v.onHandleTestSeriesEnroll,g=v.onHandleSetVariablePrice,C=v.goToStore,j=v.goToSubscription,T=v.goToTest,w=v.setQuizIdInResultBundle,k=v.changeQuizStateInLessonPlayer,D=v.startTestPlayer,E=v.goToTestResults,P=v.clearCourseData,L=v.onLessonPlayerMount,O=m.isCourseFree,R=m.currentLessonId,A=m.currentBundleId,_=m.currentCoursePricing,F=m.currentCourseDetails,U=m.currentLessonPlayerQuizState,B=m.isCourseExpired,M=m.userEnrollmentState,N=m.currentCourseId,G=(m.currentBundleDetails,m.currency),W=F.mockTests,z=F.lessons,H=F.mockTests,V=z?null===z||void 0===z?void 0:z.lessonDetails[R]:{},Q=H?H.mockTestDetails[V.mockTestId]:{},X=null===V||void 0===V?void 0:V.mockTestId,Y=null===V||void 0===V?void 0:V.lessonTitle,$=null===V||void 0===V?void 0:V.dripData,K=null===V||void 0===V?void 0:V.isTrialLesson;o.useEffect((function(){return L()}),[]);var J=(0,st.$)(["common","product"]).t,ee=d&&(null===d||void 0===d?void 0:d.slideState)<Kt.pA.READY,re=(0,Ur.V)(["c1","h4"]),ne=(0,Ur.V)(["tiny","small"]),oe=(null===Q||void 0===Q?void 0:Q.latestSubmittedStatus)===Kt.t6.SUBMITTED||(null===Q||void 0===Q?void 0:Q.latestSubmittedStatus)===Kt.t6.SUBMITTED_AFTER_TIMEUP||(null===Q||void 0===Q?void 0:Q.latestSubmittedStatus)===Kt.t6.IN_PROGRESS,se=(null===Q||void 0===Q?void 0:Q.firstSubmittedStatus)===Kt.t6.IN_PROGRESS||(null===Q||void 0===Q?void 0:Q.firstSubmittedStatus)===Kt.t6.SUBMITTED||(null===Q||void 0===Q?void 0:Q.firstSubmittedStatus)===Kt.t6.SUBMITTED_AFTER_TIMEUP,ie=(null===Q||void 0===Q?void 0:Q.maxRetakesAllowed)?J("product:latestAttemptMaxDesc",{retake:null===Q||void 0===Q?void 0:Q.currentRetakeCount,maxretake:null===Q||void 0===Q?void 0:Q.maxRetakesAllowed}):J("product:latestAttemptDesc",{retake:null===Q||void 0===Q?void 0:Q.currentRetakeCount}),ae=function(e){if(Q.mockTestType===Kt.EE.PRACTICE_QUIZ&&t&&!r&&p)return h(!1),w(X,e),void k(Kt.eo.VIEW_RESULT);E(X,e,null,R)},le=!0;if(Q&&Q.resultScheduleTime&&(le=!(new Date(Q.resultScheduleTime)>new Date)),M!==Kt.T_.PURCHASED&&(M!==Kt.T_.ENROLLED||!K&&!O))return(0,n.jsx)(Jr,{lessonTitle:Y,currentCoursePricing:_,currentProductDetails:F,sharedIsUserLoggedIn:i,showEnrollButton:a.showEnrollButton,isEnrolling:a.isEnrolling,currentBundleId:A,currentCourseId:F.courseId,isCourseAvailableForTrial:a.isCourseAvailableForTrial,isCourseExpired:a.isCourseExpired,isCoursePrivate:a.isCoursePrivate,isSellIndividualEnabled:a.isSellIndividualEnabled,isCourseFree:O,isBundleFree:O,currentProductType:F.courseType,currencyCode:G,isCurrentProductFromBundlde:!(!N||!A),isTaxEnabled:!!s,isSubscription:l,onHandleTestSeriesBuy:x,onHandleTestSeriesEnroll:b,onHandleSetVariablePrice:g,goToStore:C,goToSubscription:j});if(ee)return(0,n.jsx)(q.kC,{py:[1,6],px:[1,4],sx:{overflow:["scroll","hidden"],justifyContent:"space-between",height:"100%",flexDirection:"column",backgroundColor:"color-basic-1000"},children:(0,n.jsx)(q.kC,{sx:{justifyContent:"center",height:"100%",alignItems:"center"},children:(0,n.jsx)(Z.xv,{category:"p1",alignment:"center",sx:{color:"color-basic-100"},children:J("product:testComingSoon")})})});if($&&!$.isReleased)return(0,n.jsx)(zr,{dripData:$,title:Y});if(U===Kt.eo.VIEW_RESULT)return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(q.kC,{p:3,style:{height:"100%",alignItems:"center",flexDirection:"column"},children:[(0,n.jsx)(Z.xv,{category:"h4",sx:{color:"color-basic-100"},children:Y}),(0,n.jsx)(q.kC,{p:3,style:{height:"100%",alignItems:"center",flexDirection:"column",width:"100%",justifyContent:"center"},children:(0,n.jsx)(I.cM,{})})]})});var ce=(0,n.jsx)(Hr,{isSlideQuiz:!!r,mockTestId:X,userEnrollmentState:M,clearCourseData:P,currentCourseId:N,currentCourseMockTests:W,mockTest:Q,inLessonPlayer:t,isCourseExpired:B,isTrialLesson:K,inTestSeriesPlayer:!0,isCourseFree:O,currentLessonId:R,openTestInNewWindow:c,goToTest:T,openQuizPlayer:u,buttonSize:ne,openTestInSameWindow:p,setPlayerSemiFullScreenState:h,startTestPlayer:D}),ue=oe&&(null===Q||void 0===Q?void 0:Q.currentRetakeCount)>1&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.xu,{py:[1,3],px:[1,4],sx:{flexGrow:1,maxWidth:"50%"},children:(0,n.jsxs)(q.xu,{p:[1,4],sx:{backgroundColor:"color-basic-900",borderRadius:10},children:[(0,n.jsx)(q.kC,{style:{justifyContent:"center"},mb:[0,3],children:(0,n.jsxs)(q.xu,{mb:4,px:[3,9],children:[(0,n.jsxs)(q.kC,{children:[(0,n.jsx)(Z.xv,{category:"s1",noOfLines:1,sx:{color:"color-basic-100"},children:ie}),(0,n.jsx)(q.xu,{sx:{display:["initial","none"]},onClick:function(){return ae(Kt.Xm.FIRST)},children:(0,n.jsx)(Z.tv,{icon:jt.q.arrowRight,color:"control"})})]}),(0,n.jsx)(q.kC,{sx:{justifyContent:"center"},children:Q.secondAttemptIsUnderEvaluation?(0,n.jsx)(Z.xv,{category:re,textTransform:"capitalize",sx:{color:"color-basic-100"},alignment:"center",children:J("product:underEvaluation")}):(0,n.jsx)(Z.xv,{sx:{color:"color-basic-100"},category:re,style:{marginTop:8},alignment:"center",children:Q.latestSubmittedStatus===Kt.t6.IN_PROGRESS?J("product:inProgress"):"".concat(Q.latestAttemptScore," ").concat(J("product:of",{count:Q.totalMarks}))})})]})}),(0,n.jsx)(q.xu,{sx:{display:["none","initial"]},children:(0,n.jsxs)(q.kC,{sx:{justifyContent:"center"},children:[Q.latestSubmittedStatus!==Kt.t6.IN_PROGRESS&&(0,n.jsx)(Z.zx,{onClick:function(){return ae(Kt.Xm.LATEST)},variant:"primary",type:"outline",size:ne,children:J("product:viewResult").toUpperCase(),sx:{marginRight:2}}),Q&&(0,n.jsxs)(q.xu,{sx:{marginLeft:2},children:[ce,(0,n.jsx)(q.xu,{})]})]})})]})})}),de=se&&(0,n.jsx)(q.xu,{py:[1,3],px:[1,4],sx:{flexGrow:1,maxWidth:"50%"},children:(0,n.jsxs)(q.xu,{p:[1,4],sx:{backgroundColor:"color-basic-900",borderRadius:10},children:[(0,n.jsxs)(q.kC,{style:{justifyContent:"center"},mb:[0,3],children:[(0,n.jsxs)(q.xu,{mb:4,px:[3,9],children:[(0,n.jsx)(Z.xv,{category:"s1",noOfLines:1,sx:{color:"color-basic-100"},alignment:"center",style:{marginBottom:8},children:J("product:firstAttempt")}),Q.firstAttemptIsUnderEvaluation?(0,n.jsx)(Z.xv,{category:re,textTransform:"capitalize",sx:{color:"color-basic-100"},alignment:"center",children:J("product:underEvaluation")}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z.xv,{sx:{color:"color-basic-100"},category:re,alignment:"center",children:Q.firstSubmittedStatus===Kt.t6.IN_PROGRESS?J("product:inProgress"):"".concat(Q.firstAttemptScore," ").concat(J("product:of",{count:Q.totalMarks}))})})]}),(0,n.jsx)(q.xu,{sx:{display:["initial","none"]},onClick:function(){return ae(Kt.Xm.FIRST)},children:(0,n.jsx)(Z.tv,{icon:jt.q.arrowRight,color:"control"})})]}),(0,n.jsx)(q.xu,{sx:{display:["none","initial"]},children:(0,n.jsxs)(q.kC,{style:{justifyContent:"center"},children:[Q.firstSubmittedStatus!==Kt.t6.IN_PROGRESS&&(0,n.jsx)(Z.zx,{onClick:function(){return ae(Kt.Xm.FIRST)},variant:"primary",type:"outline",size:ne,children:J("product:viewResult").toUpperCase()}),Q&&!(oe&&Q.currentRetakeCount>1)&&(0,n.jsxs)(q.xu,{sx:{marginLeft:2},children:[ce,(0,n.jsx)(q.xu,{})]})]})})]})}),he=(0,n.jsxs)(q.xu,{children:[Q&&(Q.mockTestStatus===Kt.L2.PUBLISHED||Q.scheduleEndDate&&new Date>new Date((null===Q||void 0===Q?void 0:Q.scheduleStartDate)||"")&&new Date<new Date(Q.scheduleEndDate))&&(0,n.jsxs)(q.kC,{sx:{alignItems:"center","& div":{display:["none","initial"]}},children:[(0,n.jsx)(Z.xv,{style:{alignSelf:"center"},category:"h5",status:"primary",children:"\xa0\u2022\xa0"}),(0,n.jsx)(Z.xv,{category:"c1",sx:{color:"color-basic-100"},textTransform:"uppercase",children:J("live")})]}),(0,n.jsx)(q.xu,{children:(0,n.jsx)(Z.xv,{category:["s1","h4"],sx:{color:"color-basic-100"},noOfLines:1,children:Y})}),Q&&(0,n.jsxs)(q.kC,{sx:{alignItems:"center"},children:[Q.totalMarks?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.xv,{category:"c2",sx:{color:"color-basic-100"},textTransform:"uppercase",children:[Q.totalMarks,J(" marks",{count:Q.totalMarks})]}),(!!Q.totalQuestions||!!Q.mockTestDuration||!!Q.difficultyLevel)&&(0,n.jsx)(Z.xv,{style:{alignSelf:"center"},category:"c2",sx:{color:"color-basic-100"},children:"\xa0\u2022\xa0"})]}):null,Q.totalQuestions?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.xv,{category:"c2",sx:{color:"color-basic-100"},textTransform:"uppercase",children:[Q.totalQuestions,J(" questions",{count:Q.totalQuestions})]}),(!!Q.mockTestDuration||!!Q.difficultyLevel)&&(0,n.jsx)(Z.xv,{style:{alignSelf:"center"},category:"c2",sx:{color:"color-basic-100"},children:"\xa0\u2022\xa0"})]}):null,Q.mockTestDuration?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.xv,{category:"c2",sx:{color:"color-basic-100"},textTransform:"uppercase",children:[Q.mockTestDuration>60?"".concat(te()().startOf("day").add(Q.mockTestDuration,"minutes").format("HH:mm")," H "):"".concat(Q.mockTestDuration," M "),J("duration")]}),!!Q.difficultyLevel&&(0,n.jsx)(Z.xv,{style:{alignSelf:"center"},category:"c2",sx:{color:"color-basic-100"},children:"\xa0\u2022\xa0"})]}):null,Q.difficultyLevel?(0,n.jsxs)(Z.xv,{category:"c2",sx:{color:"color-basic-100"},textTransform:"uppercase",children:[Q.difficultyLevel===Kt.D1.EASY?J("product:testDifficultyLevel.easy"):null," ",Q.difficultyLevel===Kt.D1.HARD?J("product:testDifficultyLevel.hard"):null," ",Q.difficultyLevel===Kt.D1.MEDIUM?J("product:testDifficultyLevel.medium"):null," ",J("product:difficulty")]}):null]}),(0,n.jsx)(q.xu,{mb:[2,0,0]})]}),pe=Q&&(Q.latestSubmittedStatus===Kt.t6.SUBMITTED||Q.latestSubmittedStatus===Kt.t6.SUBMITTED_AFTER_TIMEUP)&&Q.resultScheduleTime&&!le,fe=pe&&(0,n.jsxs)(Z.xv,{category:"p1",alignment:"center",sx:{color:"color-basic-100"},children:[J("product:scheduledResult")," ",te()(Q.resultScheduleTime).format("lll")]}),ye=(null===Q||void 0===Q?void 0:Q.mockTestStatus)===Kt.L2.COMINGSOON,ve=ye&&(0,n.jsx)(q.kC,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(Z.xv,{category:["c1","s1"],alignment:"center",sx:{color:"color-basic-100"},children:J("product:testComingSoon")})}),me=(null===Q||void 0===Q?void 0:Q.mockTestStatus)===Kt.L2.SCHEDULED,Se=te()(null===Q||void 0===Q?void 0:Q.scheduleStartDate).isAfter(),xe=te()(null===Q||void 0===Q?void 0:Q.scheduleEndDate).isBefore(),be=me&&(0,n.jsx)(q.kC,{sx:{flex:Se||xe?1:0,alignItems:"center",justifyContent:"center",display:pe?"none":"flex"},children:Se?(0,n.jsxs)(q.xu,{sx:{alignSelf:"center",width:["98%","50%"]},children:[(0,n.jsx)(Z.xv,{category:"p2",style:{textAlign:"center",marginBottom:8},sx:{color:"color-basic-100"},children:parseInt(Wr()(Q.scheduleStartDate).format("DD"))<1?J("product:testWillBeReleasedIn"):J("product:testWillBeReleasedOn")}),(0,n.jsx)(Z.IT,{onTimerOver:function(){P&&P(N)},customColor:"color-basic-100",time:Q.scheduleStartDate||""})]}):(0,n.jsx)(n.Fragment,{children:xe&&(0,n.jsx)(q.xu,{sx:{textAlign:"center"},children:(0,n.jsx)(Z.xv,{category:"p2",sx:{color:"color-basic-100"},children:J("expired")})})})});return(0,n.jsxs)(n.Fragment,{children:[!Q&&(0,n.jsx)(q.kC,{sx:{justifyContent:"center",height:"100%",flexDirection:"column",backgroundColor:"color-basic-1000"},children:(0,n.jsx)(Z.xv,{category:"p1",alignment:"center",sx:{color:"color-basic-100"},children:J("product:testNotAvailable")})}),Q&&(0,n.jsxs)(q.kC,{py:[1,6],px:[1,4],sx:{overflow:["scroll","hidden"],height:"100%",flexDirection:"column",justifyContent:"space-between",backgroundColor:"color-basic-1000"},children:[(0,n.jsxs)(q.kC,{style:{justifyContent:"space-between"},children:[he,t&&S&&f&&y&&(0,n.jsx)(en.Z,{params:S,callbacks:f,slideType:y})]}),Q&&le&&!me&&(0,n.jsxs)(q.kC,{mt:[2,0,0],pt:6,sx:{justifyContent:"center",alignItems:"center",flex:1,"&:empty":{display:"none"}},children:[ue,de]}),Q&&(0,n.jsx)(q.kC,{sx:{flex:ye||me&&(Se||xe)?0:1,alignItems:"center",justifyContent:"center",display:oe||se?["flex","none"]:"flex",my:oe||se?4:0,"&:empty":{display:"none"}},children:ce}),fe,be,ve]})]})};function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nn(e){return function(e){if(Array.isArray(e))return rn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return rn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var on=11,sn=function(e){var t,r=e.modalIsOpen,s=e.setModalIsOpen,i=e.title,a=e.attachmentUrls,l=e.attachmentData,c=e.onAttachmentBundleReset,u=e.fetchAttachmentForLesson,d=e.resourceLessonId,h=e.currentCourseId,p=e.currentCourseDetails,f=e.attachmentLessonId,y=e.lessonTitle,v=e.isAttachmentDisabled,m=(0,st.$)(["common","product"]).t,S=(0,Tt.B7)().theme;return console.log("attachment",{modalIsOpen:r,setModalIsOpen:s,title:i,attachmentUrls:a,attachmentData:l,onAttachmentBundleReset:c,fetchAttachmentForLesson:u,resourceLessonId:d,currentCourseId:h,currentCourseDetails:p,attachmentLessonId:f,lessonTitle:y,isAttachmentDisabled:v}),(0,o.useEffect)((function(){var e=d||f,t=p&&p.resourceCourseId||h;return u({action:on,course_id:t,lesson_id:e,token:p.signedUrlAuthToken}),function(){c()}}),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(q.xu,{px:6,py:4,sx:{bg:"background-basic-color-1",borderRadius:null===S||void 0===S||null===(t=S.radii)||void 0===t?void 0:t.card,boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.1)",width:["100vw","100vw","80vw"],height:["100vh","auto","auto"]},children:[(0,n.jsxs)(q.kC,{mb:1,sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(Z.xv,{category:"h2",children:m("product:downloadAttachments")}),(0,n.jsx)(q.xu,{onClick:function(){return s(!1)},children:(0,n.jsx)(Z.tv,{icon:jt.q.close,fontSize:"h5"})})]}),(0,n.jsxs)(q.kC,{mb:3,children:[(0,n.jsx)(Z.xv,{category:"c2",children:y}),(0,n.jsxs)(Z.xv,{category:"c2",sx:{ml:1},children:[" ","- ",a&&a.length]}),(0,n.jsx)(Z.xv,{category:"c2",sx:{ml:1},children:m("attachment",{count:a&&a.length})})]}),(0,n.jsx)(Z.iz,{}),(0,n.jsx)(q.xu,{mt:1,sx:{maxHeight:"60vh",overflowY:"scroll"},children:a&&a.map((function(e){var t=e.src.split("_lyst")[0],r=nn(e.src.split(".")).reverse()[0];return(0,n.jsxs)(q.kC,{py:3,sx:{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,n.jsx)(Z.xv,{category:"s2",children:"".concat(t,".").concat(r)}),l.fetchStatus===Kt.iF.SUCCESS&&l.contentSignedUrl?(0,n.jsx)(n.Fragment,{children:v?null:(0,n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:l.contentSignedUrl.replace("*",e.src),children:(0,n.jsx)(Z.zx,{leadingIcon:jt.q.download,type:"ghost",children:m("product:download")})})}):null]},"".concat(e.src_id))}))})]})})},an=r(92568),ln=r(57553),cn=function(e){var t=e.slideDetails,r=e.playerData,o=e.setPLayerSemiFullScreenState,s=e.isSlideQuiz,i=e.enrollmentButtonData,a=e.helper,l=e.callbacks,c=e.playerLessonData,u=r.courseData,d=r.openTestInNewWindow,h=r.openTestInSameWindow,p=u.currentLessonPlayerQuizState;return p===Kt.eo.TAKING_QUIZ||p===Kt.eo.VIEW_SOLUTION?(o(!0),(0,n.jsx)(q.xu,{sx:{width:"100%",height:"100%"},pb:s?11:2,children:(0,n.jsx)(ln.Z,{isFromLessonPlayer:!0})})):(0,n.jsx)(q.xu,{sx:{width:"100%",height:"100%"},pb:s?11:2,children:(0,n.jsx)(tn,{slideDetails:t,inLessonPlayer:!0,isSlideQuiz:s,callbacks:e.callbacks,slideType:e.slideType,sharedIsUserLoggedIn:!1,enrollmentButtonData:i,isSubscription:!1,courseData:u,openQuizPlayer:null===a||void 0===a?void 0:a.openQuizPlayer,checkMoreOptions:null===a||void 0===a?void 0:a.checkMoreOptions,playerCallbacks:l,setPlayerSemiFullScreenState:o,openTestInNewWindow:d,openTestInSameWindow:h,playerLessonData:c})})},un=function(){var e=(0,st.$)("product").t;return(0,n.jsx)(q.kC,{sx:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"color-basic-1000"},p:[1,3],children:(0,n.jsx)(Z.xv,{category:["c1","s1"],alignment:"center",sx:{color:"color-basic-100"},children:e("accessOnlyMobile")})})},dn=r(28704);function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pn=function(e){var t=e.currentProductDetails,r=e.playerData,s=e.enrollmentButtonData,i=e.isTaxEnabled,a=e.isSubscription,l=e.sharedIsUserLoggedIn,c=e.playerCallbacks,u=e.playerHelpers,d=r.courseData,h=r.playTimeRestrictionDetails,p=r.notesAndBookmarkDetails,f=r.sharedInfo,y=d.currentLessonDetails,v=d.hasAccessToPlay,m=(d.currentLessonId,d.isCourseFree),S=d.currentBundleId,x=d.currentCoursePricing,b=d.currentCourseDetails,g=d.currentCourseId,C=d.currency,j=c.onHandleTestSeriesBuy,T=c.onHandleTestSeriesEnroll,I=c.onHandleSetVariablePrice,w=c.goToStore,k=c.goToSubscription,D=c.onLessonPlayerMount;o.useEffect((function(){return D()}),[]);var E=null===y||void 0===y?void 0:y.lessonTitle,P=c.constructBookMarkDataForPlayer(d.currentLessonSlides,p.currentLessonBookMarks,!1);P.isNotesEnabled=!!d.currentCourseDetails&&d.currentCourseDetails.isNotesEnabled;var L=c.constructSlideDataForLessonPlay(d.currentLessonDetails,d.currentCourseId,d.currentLessonId,d.currentCourseContentSignedUrl,d.currentCourseDetails.liveContentSignedUrl,d.downloadData,d.userEnrollmentState!==an.T_.PURCHASED),O=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){hn(e,t,r[t])}))}return e}({},d.playerDataOfCurrentLesson,{isMarkedAsCompleted:d.currentCourseCompletionStats&&d.currentCourseCompletionStats.includes(d.currentLessonId),lessonPosition:d.currentLessonPosition,lr_token:f.sharedAuthToken,studentId:f.sharedUserId,userName:f.sharedUserName,isWatermarkEnabled:f.sharedIsWatermarkEnabled,wmarkMessage:f.sharedWaterMarkMsg,mobile:f.sharedUserMobileNum,email:f.sharedUserEmail,initialSlideIdx:d.initialSlideIndexForPayer||0,initialSlideSeekPos:d.initialSlideSeekPosForPayer||0,liveLessonData:d.currentLessonDetails?d.currentLessonDetails.liveLessonDetails:null,isNotesEnabled:!e.isEmbedPlayer&&d.currentCourseDetails.isNotesEnabled});if(L.length<=0&&(L=[{slideState:0,fileType:1,uri:"aaa.com",bookmarkFileName:""}]),0===L.length){L.push({slideState:0,fileType:1,uri:"aaa.com",bookmarkFileName:""})}return t.serverDeviceType&&(t.serverDeviceType===Kt.Mg.ANDROID||t.serverDeviceType===Kt.Mg.IOS||t.serverDeviceType===Kt.Mg.ANDROID+Kt.Mg.IOS)?(0,n.jsx)(un,{}):v?(null===y||void 0===y?void 0:y.dripData)&&!(null===y||void 0===y?void 0:y.dripData.isReleased)?(0,n.jsx)(zr,{dripData:null===y||void 0===y?void 0:y.dripData,title:y.lessonTitle}):L[0]&&L[0].fileType===Kt.zc.TEST_TYPE?(0,n.jsx)(cn,{setPLayerSemiFullScreenState:e.setPLayerSemiFullScreenState,slideDetails:L[0],callbacks:c,playerLessonData:O,slideType:Kt._Q.SECTION_QUIZ,helper:u,playerData:r,enrollmentButtonData:s,isSubscription:a,sharedIsUserLoggedIn:l}):(0,n.jsx)(q.xu,{id:"lst-lesson-player",sx:{height:"100%",width:"100%",backgroundColor:"color-basic-1000"},children:(0,n.jsx)(St.Z,{children:function(t){var r=t.width,o=t.height;return(0,n.jsx)(dn.Z,{isAnswerExplaination:e.isEmbedPlayer,ref:e.forwardedRef.lstSliderComp,lessonData:O,slideData:L,lessonBookmarkData:P,currentBookMarkIdTs:p.currentBookMarkIdTs,callbacks:c,dimensions:{width:r,height:o},isPlayerOutOfFocus:e.isPlayerOutOfFocus,userEnrollmentState:e.userEnrollmentState,liveServerData:e.liveServerData,switchToBookmarkTab:e.switchToBookmarkTab,showLiveChat:e.showLiveChat,currentCoursePlayTimeRestrictionDetails:h.currentCoursePlayTimeRestrictionDetails,shouldCurrentLessonShowPlayTime:h.shouldCurrentLessonShowPlayTime})}})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Jr,{lessonTitle:E||"",currentCoursePricing:x,currentProductDetails:b,showEnrollButton:s.showEnrollButton,isEnrolling:s.isEnrolling,currentBundleId:S,currentCourseId:b.courseId,isCourseAvailableForTrial:s.isCourseAvailableForTrial,isCourseExpired:s.isCourseExpired,isCoursePrivate:s.isCoursePrivate,isSellIndividualEnabled:s.isSellIndividualEnabled,isCourseFree:m,isBundleFree:m,currentProductType:b.courseType,currencyCode:C,isCurrentProductFromBundlde:!(!g||!S),onHandleTestSeriesBuy:j,onHandleTestSeriesEnroll:T,onHandleSetVariablePrice:I,goToStore:w,goToSubscription:k,isTaxEnabled:!!i,isSubscription:a,sharedIsUserLoggedIn:l})})};function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function mn(e,t){return!t||"object"!==xn(t)&&"function"!==typeof t?fn(e):t}function Sn(e,t){return Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Sn(e,t)}var xn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function bn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=vn(e);if(t){var o=vn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return mn(this,r)}}var gn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(l,e);var t,r,s,i=bn(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).setPlayerFocusState=function(e){t.setState({isPlayerOutOfFocus:e||!1})},t.toogleLivePlayerMode=function(e,r){e||t.setState({liveStatus:Kt.yi.IDLE,liveServerName:null}),t.setState({isLivePlayerMode:e}),r||t.setState({isSemiFullScreen:e})},t.toogleLiveChatDisplay=function(){console.log("courseDashboard toggleLiveChatDisplay state",t.state),t.setState({showLiveChat:!t.state.showLiveChat})},t.updateLiveStatus=function(e){console.log("courseDashboard updateLiveStatus data, state",e,t.state),t.setState({liveStatus:e.liveStatus})},t.switchToBookmarkTab=function(e){t.setState({enableBookmarkTab:e})},t.toggleSearch=function(){t.setState({isSearchShown:!t.state.isSearchShown})},t.state={isFullScreen:!1,isSemiFullScreen:!1,isPlayerOutOfFocus:!1,attachmentModalState:!1,attachmentUrls:{},attachmentLessonId:0,attachmentLessonTitle:"",isAttachmentDisabled:!1,isLivePlayerMode:!1,liveStatus:Kt.yi.IDLE,liveServerName:null,enableBookmarkTab:!1,showLiveChat:!0,isSearchShown:!1,resourceLessonId:0},t.statusContainerRef=o.createRef(),t.statusContainerHeight=null,t.setPLayerSemiFullScreenState=t.setPLayerSemiFullScreenState.bind(fn(t)),t.handleFullscreenChange=t.handleFullscreenChange.bind(fn(t)),t.setAttachmentModalState=t.setAttachmentModalState.bind(fn(t)),t}return t=l,r=[{key:"componentDidMount",value:function(){var e,t;window.addEventListener("fullscreenchange",this.handleFullscreenChange,!0),null===(e=this.props)||void 0===e||null===(t=e.helpers)||void 0===t||t.hideExternalScript()}},{key:"componentDidUpdate",value:function(e,t){a.default.query.search&&!t.isSearchShown&&this.setState({isSearchShown:!0})}},{key:"componentWillUnmount",value:function(){var e,t;window.removeEventListener("fullscreenchange",this.handleFullscreenChange,!0),null===(e=this.props)||void 0===e||null===(t=e.helpers)||void 0===t||t.enableExternalScript()}},{key:"getAspectRatio",value:function(){return this.state.isFullScreen&&!this.state.isLivePlayerMode?window.screen.width/window.screen.height:16/9}},{key:"setPLayerSemiFullScreenState",value:function(e){this.state.isSemiFullScreen!==e&&this.setState({isSemiFullScreen:e||!1})}},{key:"handleFullscreenChange",value:function(){document.fullscreenElement?(this.setState({isFullScreen:!0}),console.log("handleFullscreenChange Element: ".concat(document.fullscreenElement.id," entered full-screen mode."))):(this.setState({isFullScreen:!1}),console.log("handleFullscreenChange Leaving full-screen mode."))}},{key:"setAttachmentModalState",value:function(e,t,r,n,o,s){this.setState({attachmentModalState:e,attachmentUrls:t,attachmentLessonId:r,attachmentLessonTitle:n,isAttachmentDisabled:o,resourceLessonId:s})}},{key:"render",value:function(){var e,t,r,o,s,i,l,c,u,d,h,p,f,y,v,m,S,x,b,g,C,j,T,I,w=this;this.statusContainerHeight=(null===(e=this.statusContainerRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.clientHeight)||this.statusContainerHeight;var D=this.props,E=D.t,P=D.theme,L=D.callbacks,O=D.refsToForward,R=(null===(r=this.props)||void 0===r?void 0:r.courseFeatureCallbacks).onEditReview,A=null===(o=this.props)||void 0===o?void 0:o.allDashboardSalesCallbacks,_=A.goToCourseReview,F=A.goToPlayer,U=null===(s=this.props)||void 0===s||null===(i=s.allDashboardSalesCallbacks)||void 0===i?void 0:i.testSeriesCallbacks,B=U.onHandleTestSeriesStatsButton,M=U.onLoadTestSeriesList,N=this.props.data,G=N.courseData,W=N.enrollmentButtonData,z=N.dashAndSalesBoardHelpers,H=N.courseFeatureData,V=N.isMobileDevice,Q=N.isBookmarksEnabled,X=N.courseFeatureHelpers,Y=N.isTaxEnabled,$=N.isSubscriptionMode,K=N.openTestInNewWindow,J=N.openTestInSameWindow,ee=N.footer,te=N.attachmentData,re=G.userEnrollmentState,ne=G.courseCompletionData,oe=G.currentBundleSeoTitle,se=G.currentCourseDetails,ie=G.currentCourseId,ae=G.currentLessonId,le=G.currentCourseSections,ce=G.currentCourseLessons,ue=G.currentCourseCompletionStats,de=G.currentCourseSectionId,he=G.currentBundleId,pe=G.currentCourseSeoTitle,fe=G.currentLessonPlayerQuizState,ye=null===(l=this.props)||void 0===l?void 0:l.callbacks,ve=null===(c=this.props)||void 0===c||null===(u=c.callbacks)||void 0===u?void 0:u.attachmentCallbacks,me=se.courseType,Se=se.lessons,xe=se.mockTests,be=Se?null===Se||void 0===Se?void 0:Se.lessonDetails[ae]:{},ge=(xe&&xe.mockTestDetails[be.mockTestId],this.props.data.sharedInfo.sharedIsUserLoggedIn),Ce=z.getRendererData,je=void 0===Ce?function(){return!1}:Ce,Te=se,Ie=null===z||void 0===z?void 0:z.calculateCourseCompletion(ne,Te.courseId,null===Te||void 0===Te||null===(d=Te.lessons)||void 0===d||null===(h=d.lessonIds)||void 0===h?void 0:h.length),we=0,ke=0,De=Te.courseType===$t.Dl.TEST_SERIES;De&&(we=null===z||void 0===z?void 0:z.getTestCompletionPercentage(le),ke=null===z||void 0===z?void 0:z.calculateAvgPercent(null===se||void 0===se?void 0:se.mockTests));var Ee=this.state,Pe=Ee.isSemiFullScreen,Le=Ee.isLivePlayerMode,Oe=Ee.isSearchShown,Re=this.getAspectRatio(),Ae=function(e){var t,r,n,o,s=(null===Se||void 0===Se?void 0:Se.lessonDetails[e].sectionId)||0;null===(t=w.props)||void 0===t||null===(r=t.callbacks)||void 0===r||r.setCurrentAccessingLesson({courseId:ie,sectionId:null===Se||void 0===Se?void 0:Se.lessonDetails[e].sectionId,lessonId:e},e);var i={lessonId:e,sectionId:s,productSeo:oe||pe,subProductSeo:oe?pe:null};me===$t.Dl.TEST_SERIES&&(i.testSeries=1),null===(n=w.props)||void 0===n||null===(o=n.callbacks)||void 0===o||o.goToLessonPlayer(he,ie,me,s,e,i),fe!==Kt.eo.IDLE&&(null===ye||void 0===ye||ye.clearCourseData(ie))},_e=!!new URLSearchParams(window.location.search).get("embedPlayer"),Fe=a.default.query.embedHeader||"",Ue=P.sizes[7];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.Global,{styles:function(){return{"html, #syllabus-list div":{scrollBehavior:"smooth"}}}}),(0,n.jsxs)(q.kC,{id:"lesson-player",as:"main",sx:{overflow:"hidden",position:"sticky",top:0,height:"100vh",width:"100%",backgroundColor:"background-basic-color-2"},children:[(0,n.jsxs)(q.xu,{as:"section",sx:{display:["flex","initial"],overflowY:["hidden","scroll"],position:"static",flexGrow:1,flexDirection:"column",width:["100%","100%",this.state.showLiveChat?"70%":"100%"],height:["100vh","100%"]},children:[(0,n.jsxs)(q.xu,{sx:{flexGrow:1,height:_e?"97%":"auto"},children:[(0,n.jsx)(q.xu,{id:"player-header",sx:{boxShadow:"default"},children:(0,n.jsx)(Nr,{title:Fe||Te.courseTitle||"",courseId:Te.courseId,sharedIsUserLoggedIn:ge,enrollmentState:re,isReviewsEnabled:!_e&&Te.isReviewsEnabled,currentReviewData:null===H||void 0===H?void 0:H.courseReviewData,setPlayerFocusState:this.setPlayerFocusState,currentBundleSeoTitle:oe||"",currentCourseSeoTitle:pe||"",goToCourseDashboard:ye.goToCourseDashboard,goBack:null===L||void 0===L?void 0:L.goBack,onHandleAddReview:R})}),(0,n.jsx)(Z.oM,{ratio:Re,isSemiFullScreen:Pe,sx:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"border-basic-color-4"},children:De?(0,n.jsx)(tn,{sharedIsUserLoggedIn:ge,enrollmentButtonData:W.data,isTaxEnabled:Y,isSubscription:$,setPlayerSemiFullScreenState:this.setPLayerSemiFullScreenState,openTestInNewWindow:K,openTestInSameWindow:J,checkMoreOptions:null===(p=this.props)||void 0===p||null===(f=p.helpers)||void 0===f?void 0:f.checkMoreOptions,openQuizPlayer:null===(y=this.props)||void 0===y||null===(v=y.helpers)||void 0===v?void 0:v.openQuizPlayer,playerCallbacks:ye,courseData:G}):(0,n.jsx)(pn,{isEmbedPlayer:_e,forwardedRef:O,sharedIsUserLoggedIn:ge,setPLayerSemiFullScreenState:this.setPLayerSemiFullScreenState,isSemiFullScreen:this.state.isSemiFullScreen,isPlayerOutOfFocus:this.state.isPlayerOutOfFocus,userEnrollmentState:re,toogleLivePlayerMode:function(e){return w.toogleLivePlayerMode(e,V)},toogleLiveChatDisplay:this.toogleLiveChatDisplay,showLiveChat:this.state.showLiveChat,liveServerData:{liveStatus:this.state.liveStatus},switchToBookmarkTab:this.switchToBookmarkTab,currentProductDetails:Te,playerData:null===(m=this.props)||void 0===m?void 0:m.data,playerCallbacks:ye,enrollmentButtonData:W.data,isTaxEnabled:!!Y,isSubscription:$,playerHelpers:this.props.helpers})})]}),!(Pe||Le)&&(0,n.jsxs)(q.xu,{mb:1,sx:{overflow:["scroll","hidden"],overflowX:"hidden",height:_e?"0%":["100%","auto"],backgroundColor:"background-basic-color-2","::-webkit-scrollbar":{display:"none"}},children:[(0,n.jsx)(Fr,{courseData:G,currentProductDetails:Te,courseFeatureData:H,courseFeatureCallbacks:null===(S=this.props)||void 0===S?void 0:S.courseFeatureCallbacks,courseFeatureHelpers:X,productType:me,isMobileDevice:V||!1,isBookmarkEnabled:!(!Te.isNotesEnabled||!Q),testSeriesAvgScore:ke,testSeriesCompletion:we,courseProgress:Ie,enableBookmarkTab:this.state.enableBookmarkTab,setPlayerFocusState:this.setPlayerFocusState,getCurrentPosition:null===(x=O.lstSliderComp)||void 0===x||null===(b=x.current)||void 0===b||null===(g=b.sliderRef)||void 0===g?void 0:g.getCurrentPosition,syllabusListData:{currentCourseId:ie,inPlayer:!0,currentLessonId:ae,currentCourseSectionId:de,currentCourseSections:le,currentCourseLessons:ce,currentCourseMockTests:xe,currentCourseCompletionStats:ue,currentCourseType:me,courseDetails:se,userEnrollmentState:re,fixHeight:!0,sharedIsUserLoggedIn:ge},syllabusListCallbacks:{getRendererData:je,onLessonClick:Ae,onLoadTestSeriesList:M},callbacks:{gotoViewAnalytics:B,setAttachmentModalState:this.setAttachmentModalState,switchToBookmarkTab:this.switchToBookmarkTab,goToCourseReview:_},playerCallbacks:ye,enrollmentButtonData:W.data,userEnrollmentState:re,isSubscription:$,sharedIsUserLoggedIn:ge,isTaxEnabled:!!Y}),!Pe&&(0,n.jsx)(q.xu,{sx:{display:["none","none","block"],height:"max-content"},children:(0,n.jsx)(Yt.Z,{footer:ee})})]}),V&&Le&&(0,n.jsx)(q.xu,{sx:{display:["block","block","none"],overflow:"hidden",height:["100%","auto"]},children:(0,n.jsx)(ze,{updateLiveStatus:this.updateLiveStatus,setPlayerFocusState:this.setPlayerFocusState})})]}),Le?(0,n.jsx)(q.kC,{as:"section",sx:{overflow:"hidden",display:["none","none","initial"],borderLeftWidth:1,borderLeftColor:"border-basic-color-4",borderLeftStyle:"solid",height:"100%",width:["0%","0%",this.state.showLiveChat?"25%":"0%"],minWidth:[0,0,this.state.showLiveChat?null===P||void 0===P?void 0:P.sizes[18]:0],flexDirection:"column"},children:(0,n.jsx)(ze,{updateLiveStatus:this.updateLiveStatus,setPlayerFocusState:this.setPlayerFocusState})}):(0,n.jsxs)(q.kC,{as:"section",sx:{overflow:"hidden",display:["none","none","initial"],borderLeftWidth:1,borderLeftColor:"border-basic-color-4",borderLeftStyle:"solid",height:"100%",width:_e?"0%":["0%","0%","30%"],minWidth:_e?"0%":[0,0,null===P||void 0===P?void 0:P.sizes[18]],flexDirection:"column"},children:[(0,n.jsx)(q.xu,{pl:2,sx:{borderColor:"transparent",borderTopWidth:1,borderBottomWidth:1,borderStyle:"solid",minWidth:null===P||void 0===P?void 0:P.sizes[18],height:null===P||void 0===P?void 0:P.sizes[7],maxHeight:null===P||void 0===P?void 0:P.sizes[7],display:"flex"},children:(0,n.jsxs)(q.kC,{sx:{justifyContent:"space-between",alignItems:"center",width:"100%"},children:[!Oe&&(0,n.jsx)(Z.xv,{category:"h5",textTransform:"capitalize",children:E(De?"test_plural":"product:syllabus")}),Oe&&(0,n.jsx)(Z.xv,{category:"h5",textTransform:"capitalize",children:E(De?"product:searchTestSeries":"product:searchSyllabus")}),!Oe&&(0,n.jsx)(q.kC,{pr:3,sx:{fontSize:"iconDefault",alignItems:"center",cursor:"pointer"},onClick:function(){w.toggleSearch()},children:(0,n.jsx)(Z.tv,{icon:jt.q.search,fontSize:"h5"})}),Oe&&(0,n.jsx)(Z.zx,{variant:"basic",type:"ghost",children:(0,n.jsx)(Z.xv,{category:"c2",children:E("product:close").toUpperCase()}),size:"small",onClick:function(){w.toggleSearch()},sx:{color:"background-alternative-color-1"}})]})}),(0,n.jsx)(q.xu,{ref:this.statusContainerRef,children:ge&&!Oe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.iz,{}),(0,n.jsxs)(q.xu,{sx:{width:"100%",backgroundColor:"background-basic-color-2"},p:4,children:[!!De&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.kC,{mb:6,style:{alignItems:"center",justifyContent:"space-between"},children:we?(0,n.jsxs)(n.Fragment,{children:[ke&&"NaN"!==ke?(0,n.jsxs)(q.xu,{style:{alignSelf:"flex-end"},children:[(0,n.jsx)(Z.xv,{category:"label",textTransform:"uppercase",children:E("product:yourAverageScore")}),(0,n.jsx)(Z.xv,{category:"h4",children:ke})]}):null,(0,n.jsx)(Z.zx,{disabled:we<=0||re!==Kt.T_.ENROLLED&&re!==Kt.T_.PURCHASED,variant:"secondary",size:"small",children:E("product:viewAnalytics").toUpperCase(),onClick:function(){we>0&&B()}})]}):null})}),(0,n.jsxs)(q.kC,{sx:{alignItems:"center"},children:[(0,n.jsx)(q.xu,{sx:{width:"100%"},mr:2,children:(0,n.jsx)(Z.ko,{indicatorColor:"secondary",progress:Te.courseType===$t.Dl.COURSE?Ie:we})}),(0,n.jsx)(Z.xv,{category:"c2",children:"".concat(Te.courseType===$t.Dl.COURSE?Ie:we,"%")})]}),(0,n.jsx)(Z.xv,{category:"c2",children:ne&&Array.isArray(ne[Te.courseId])&&(0,n.jsxs)(n.Fragment,{children:[Te.courseType===$t.Dl.COURSE&&(0,n.jsxs)(q.kC,{children:[(0,n.jsx)(Z.xv,{category:"c1",children:ne[Te.courseId].length}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",children:E("product:of",{count:null===Te||void 0===Te||null===(C=Te.lessons)||void 0===C||null===(j=C.lessonIds)||void 0===j?void 0:j.length})}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",children:E("product:lessons")}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",textTransform:"capitalize",children:E("product:completed")})]}),!!De&&(0,n.jsxs)(q.kC,{children:[(0,n.jsx)(Z.xv,{category:"c1",children:ne[Te.courseId].length}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",children:E("product:of",{count:null===Te||void 0===Te||null===(T=Te.mockTests)||void 0===T||null===(I=T.mockTestIds)||void 0===I?void 0:I.length})}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsxs)(Z.xv,{category:"c1",children:[" ",E("tests")]}),(0,n.jsx)(q.xu,{ml:1}),(0,n.jsx)(Z.xv,{category:"c1",textTransform:"capitalize",children:E("product:completed")})]})]})})]})]})}),(0,n.jsx)(q.xu,{sx:{overflow:"hidden",zIndex:3,minWidth:null===P||void 0===P?void 0:P.sizes[18],height:"100%",width:"100%"},pb:Oe?Ue+40:this.statusContainerHeight+Ue,children:(0,n.jsx)(Jt.AG,{currentCourseId:ie,isSearchShown:Oe,inPlayer:!0,sharedIsUserLoggedIn:ge,currentLessonId:ae,currentCourseSectionId:de,currentCourseSections:le,currentCourseLessons:ce,currentCourseMockTests:xe,currentCourseCompletionStats:ue,currentCourseType:me,courseDetails:se,userEnrollmentState:re,getRendererData:je,onLessonClick:Ae,setAttachmentModalState:this.setAttachmentModalState,onLoadTestSeriesList:M,setPlayerFocusState:this.setPlayerFocusState,goToPlayer:F,fixHeight:!0})},this.statusContainerHeight)]}),(0,n.jsx)(Vr.u_,{ariaHideApp:!1,isOpen:this.state.attachmentModalState,onRequestClose:function(){w.setAttachmentModalState(!1)},children:(0,n.jsx)(sn,{modalIsOpen:this.state.attachmentModalState,setModalIsOpen:this.setAttachmentModalState,attachmentUrls:this.state.attachmentUrls,attachmentData:te,attachmentLessonId:this.state.attachmentLessonId,lessonTitle:this.state.attachmentLessonTitle,isAttachmentDisabled:this.state.isAttachmentDisabled,resourceLessonId:this.state.resourceLessonId,currentCourseId:ie,currentCourseDetails:se,onAttachmentBundleReset:ve.onAttachmentBundleReset,fetchAttachmentForLesson:ve.fetchAttachmentForLesson})})]})]})}}],r&&yn(t.prototype,r),s&&yn(t,s),l}(o.Component),Cn=gn,jn=r(45106),Tn=r(37254);function In(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function Dn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){wn(e,t,r[t])}))}return e}function En(e,t){return!t||"object"!==Ln(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pn(e,t){return Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pn(e,t)}var Ln=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function On(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kn(e);if(t){var o=kn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return En(this,r)}}var Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"CHANGE_STATE"===t.type?t.state:e};function An(e,t){var r=function(r){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pn(e,t)}(l,r);var o,s,i,a=On(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).props=e,t.isLoadingCompleted=!1,t.store=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,jn.MT)(Rn,e)}(Dn({},e)),t}return o=l,(s=[{key:"mergeProps",value:function(e){this.props=e}},{key:"shouldComponentUpdate",value:function(e){var r,n,o;return this.mergeProps(e),this.store.dispatch({type:"CHANGE_STATE",state:this.props}),null===(r=this.props)||void 0===r||null===(n=r.data)||void 0===n||null===(o=n.widgetData)||void 0===o||o.isWidgetDataChanged,(!this.isLoadingCompleted||!t(this.props))&&(this.isLoadingCompleted=!1,!0)}},{key:"componentDidUpdate",value:function(){!this.isLoadingCompleted&&t?this.isLoadingCompleted=t(this.props):t||(this.isLoadingCompleted=!0)}},{key:"componentDidMount",value:function(){!this.isLoadingCompleted&&t?this.isLoadingCompleted=t(this.props):t||(this.isLoadingCompleted=!0)}},{key:"render",value:function(){return(0,n.jsx)(Tn.zt,{store:this.store,children:(0,n.jsx)(e,Dn({},this.props))})}}])&&In(o.prototype,s),i&&In(o,i),l}(o.Component);return r}function _n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fn(e){return Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fn(e)}function Un(e,t){return!t||"object"!==Mn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e,t){return Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bn(e,t)}var Mn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Nn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Fn(e);if(t){var o=Fn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Un(this,r)}}var Gn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(i,e);var t,r,o,s=Nn(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s.call(this,e)}return t=i,(r=[{key:"render",value:function(){var e,t,r,o,s=this.props.data,i=s.courseData;return s.courseFeatureData,i.currentCourseFetchStatus===Kt.iF.IN_PROGRESS||i.currentCourseAccessDataFetchStatus===Kt.iF.IN_PROGRESS||i.currentCourseFetchStatus===Kt.iF.IDLE?(0,n.jsx)(Vr.gb,{}):i.currentCourseSections&&i.currentCourseDetails?(0,n.jsx)(Cn,{data:null===(e=this.props)||void 0===e?void 0:e.data,callbacks:this.props.callbacks,refsToForward:null===(t=this.props)||void 0===t?void 0:t.refsToForward,helpers:null===(r=this.props)||void 0===r?void 0:r.helpers,learnyComponents:this.props.learnyComponents,allDashboardSalesCallbacks:this.props.allDashboardSalesCallbacks,courseFeatureCallbacks:this.props.courseFeatureCallbacks,i18n:this.props.i18n,t:this.props.t,theme:this.props.theme,footerData:null===(o=this.props)||void 0===o?void 0:o.footerData}):(0,n.jsx)(Vr.gb,{})}}])&&_n(t.prototype,r),o&&_n(t,o),i}(o.Component),Wn=An((0,Tn.$j)((function(e){return{data:e.data}}))((0,Xt.Z)((0,h.Z)(["common","product"])(Gn))),(function(e){var t=e.data.courseData.currentCourseFetchStatus;return t!==Kt.iF.IDLE&&t!==Kt.iF.IN_PROGRESS})),zn=function(e){var t=e.setAttachmentModalState;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ft(),{id:"b6704e8c05eea684",children:".sticky-tabs{position:-webkit-sticky;\nposition:-moz-sticky;\nposition:-o-sticky;\nposition:-ms-sticky;\nposition:-webkit-sticky;\nposition:sticky}"}),(0,n.jsx)(q.xu,{px:2,py:2,bg:"surface",children:(0,n.jsx)(q.xu,{sx:{overflow:"auto",height:"100%",width:"100%",display:["auto","auto","none"]},children:(0,n.jsx)(At,{inPlayer:!0,fixHeight:!1,setAttachmentModalState:t})})})]})};function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}function qn(e,t){return!t||"object"!==Xn(t)&&"function"!==typeof t?Hn(e):t}function Zn(e,t){return Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zn(e,t)}var Xn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Yn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Qn(e);if(t){var o=Qn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return qn(this,r)}}var $n=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(l,e);var t,r,s,i=Yn(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).setPlayerFocusState=function(e){t.setState({isPlayerOutOfFocus:e||!1})},t.toogleLivePlayerMode=function(e,r){e||t.setState({liveStatus:Kt.yi.IDLE,liveServerName:null}),t.setState({isLivePlayerMode:e}),r||t.setState({isSemiFullScreen:e})},t.toogleLiveChatDisplay=function(){console.log("courseDashboard toggleLiveChatDisplay state",t.state),t.setState({showLiveChat:!t.state.showLiveChat})},t.updateLiveStatus=function(e){console.log("courseDashboard updateLiveStatus data, state",e,t.state),t.setState({liveStatus:e.liveStatus})},t.switchToBookmarkTab=function(e){t.setState({enableBookmarkTab:e})},t.toggleSearch=function(){t.setState({isSearchShown:!t.state.isSearchShown})},t.state={isFullScreen:!1,isSemiFullScreen:!1,isPlayerOutOfFocus:!1,attachmentModalState:!1,attachmentUrls:{},attachmentLessonId:0,attachmentLessonTitle:"",isAttachmentDisabled:!1,isLivePlayerMode:!1,liveStatus:Kt.yi.IDLE,liveServerName:null,enableBookmarkTab:!1,showLiveChat:!0,isSearchShown:!1,resourceLessonId:0},t.statusContainerRef=o.createRef(),t.statusContainerHeight=null,t.setPLayerSemiFullScreenState=t.setPLayerSemiFullScreenState.bind(Hn(t)),t.handleFullscreenChange=t.handleFullscreenChange.bind(Hn(t)),t.setAttachmentModalState=t.setAttachmentModalState.bind(Hn(t)),t}return t=l,(r=[{key:"componentDidMount",value:function(){var e,t;window.addEventListener("fullscreenchange",this.handleFullscreenChange,!0),null===(e=this.props)||void 0===e||null===(t=e.helpers)||void 0===t||t.hideExternalScript()}},{key:"componentDidUpdate",value:function(e,t){console.log("courseDashboard props:",this.props),console.log("courseDashboard state:",this.state),a.default.query.search&&!t.isSearchShown&&this.setState({isSearchShown:!0})}},{key:"componentWillUnmount",value:function(){var e,t;window.removeEventListener("fullscreenchange",this.handleFullscreenChange,!0),null===(e=this.props)||void 0===e||null===(t=e.helpers)||void 0===t||t.enableExternalScript()}},{key:"getAspectRatio",value:function(){return this.state.isFullScreen&&!this.state.isLivePlayerMode?window.screen.width/window.screen.height:16/9}},{key:"setPLayerSemiFullScreenState",value:function(e){this.state.isSemiFullScreen!==e&&this.setState({isSemiFullScreen:e||!1})}},{key:"handleFullscreenChange",value:function(){document.fullscreenElement?(this.setState({isFullScreen:!0}),console.log("handleFullscreenChange Element: ".concat(document.fullscreenElement.id," entered full-screen mode."))):(this.setState({isFullScreen:!1}),console.log("handleFullscreenChange Leaving full-screen mode."))}},{key:"setAttachmentModalState",value:function(e,t,r,n,o,s){this.setState({attachmentModalState:e,attachmentUrls:t,attachmentLessonId:r,attachmentLessonTitle:n,isAttachmentDisabled:o,resourceLessonId:s})}},{key:"render",value:function(){var e,t,r,o,s,i,a,l,c,u=this;this.statusContainerHeight=(null===(e=this.statusContainerRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.clientHeight)||this.statusContainerHeight;var d=this.props,h=(d.t,d.theme),p=(d.footerData,d.callbacks),f=d.refsToForward,y=(null===(r=this.props)||void 0===r?void 0:r.courseFeatureCallbacks).onEditReview,v=this.props.data,m=v.courseData,S=v.enrollmentButtonData,x=v.dashAndSalesBoardHelpers,b=v.courseFeatureData,g=v.isMobileDevice,C=v.isTaxEnabled,j=v.isSubscriptionMode,T=v.openTestInNewWindow,I=v.openTestInSameWindow,w=m.userEnrollmentState,D=m.currentBundleSeoTitle,E=m.currentCourseDetails,P=(m.currentLessonId,m.currentCourseSections),L=m.currentCourseSeoTitle,O=null===(o=this.props)||void 0===o?void 0:o.callbacks,R=(E.lessons,E.mockTests,this.props.data.sharedInfo.sharedIsUserLoggedIn),A=E,_=A.courseType===$t.Dl.TEST_SERIES;_&&(null===x||void 0===x||x.getTestCompletionPercentage(P),testSeriesAvgScore=null===x||void 0===x?void 0:x.calculateAvgPercent(null===E||void 0===E?void 0:E.mockTests));var F=this.state,U=F.isSemiFullScreen,B=F.isLivePlayerMode,M=F.isSearchShown,N=this.getAspectRatio(),G=!!new URLSearchParams(window.location.search).get("embedPlayer");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.Global,{styles:function(){return{"html, #syllabus-list div":{scrollBehavior:"smooth"}}}}),(0,n.jsxs)(q.kC,{id:"lesson-player",as:"main",sx:{overflow:"hidden",position:"sticky",top:0,height:"100vh",width:"100%",backgroundColor:"background-basic-color-2"},children:[(0,n.jsxs)(q.xu,{as:"section",sx:{display:["flex","initial"],overflowY:["hidden","scroll"],position:"static",flexGrow:1,flexDirection:"column",width:["100%","100%",this.state.showLiveChat?"70%":"100%"],height:["100vh","100%"]},children:[(0,n.jsxs)(q.xu,{sx:{flexGrow:1,height:["auto","auto","100%"]},children:[(0,n.jsx)(q.xu,{id:"player-header",sx:{boxShadow:"default"},children:(0,n.jsx)(Nr,{title:A.courseTitle||"",courseId:A.courseId,sharedIsUserLoggedIn:R,enrollmentState:w,isReviewsEnabled:A.isReviewsEnabled,currentReviewData:null===b||void 0===b?void 0:b.courseReviewData,setPlayerFocusState:this.setPlayerFocusState,currentBundleSeoTitle:D||"",currentCourseSeoTitle:L||"",goToCourseDashboard:O.goToCourseDashboard,goBack:null===p||void 0===p?void 0:p.goBack,onHandleAddReview:y})}),(0,n.jsx)(Z.oM,{ratio:N,isSemiFullScreen:U,sx:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"border-basic-color-4"},children:_?(0,n.jsx)(tn,{sharedIsUserLoggedIn:R,enrollmentButtonData:S.data,isTaxEnabled:C,isSubscription:j,setPlayerSemiFullScreenState:this.setPLayerSemiFullScreenState,openTestInNewWindow:T,openTestInSameWindow:I,checkMoreOptions:null===(s=this.props)||void 0===s||null===(i=s.helpers)||void 0===i?void 0:i.checkMoreOptions,openQuizPlayer:null===(a=this.props)||void 0===a||null===(l=a.helpers)||void 0===l?void 0:l.openQuizPlayer,playerCallbacks:O,courseData:m}):(0,n.jsx)(pn,{isEmbedPlayer:G,forwardedRef:f,sharedIsUserLoggedIn:R,setPLayerSemiFullScreenState:this.setPLayerSemiFullScreenState,isSemiFullScreen:this.state.isSemiFullScreen,isPlayerOutOfFocus:this.state.isPlayerOutOfFocus,userEnrollmentState:w,toogleLivePlayerMode:function(e){return u.toogleLivePlayerMode(e,g)},toogleLiveChatDisplay:this.toogleLiveChatDisplay,showLiveChat:this.state.showLiveChat,liveServerData:{liveStatus:this.state.liveStatus},switchToBookmarkTab:this.switchToBookmarkTab,currentProductDetails:A,playerData:null===(c=this.props)||void 0===c?void 0:c.data,playerCallbacks:O,enrollmentButtonData:S.data,isTaxEnabled:!!C,isSubscription:j,playerHelpers:this.props.helpers})})]}),!(U||B)&&(0,n.jsx)(q.xu,{mb:1,sx:{overflow:["scroll","hidden"],overflowX:"hidden",height:G?"0%":["100%","auto"],backgroundColor:"background-basic-color-2"},children:(0,n.jsx)(zn,{setAttachmentModalState:this.setAttachmentModalState})})]}),(0,n.jsx)(q.kC,{as:"section",sx:{overflow:"hidden",display:["none","none","initial"],borderLeftWidth:1,borderLeftColor:"border-basic-color-4",borderLeftStyle:"solid",height:"100%",width:G?"0%":["0%","0%","30%"],minWidth:G?"0%":[0,0,null===h||void 0===h?void 0:h.sizes[18]],flexDirection:"column"},children:(0,n.jsx)(q.xu,{px:4,pb:159,sx:{overflow:"hidden",zIndex:3,minWidth:null===h||void 0===h?void 0:h.sizes[18],height:"100%",width:"100%"},children:(0,n.jsx)(At,{fixHeight:!0,inPlayer:!0,setPlayerFocusState:this.setPlayerFocusState,signedUrlAuthToken:A.signedUrlAuthToken,setAttachmentModalState:this.setAttachmentModalState,isSearchShown:M})})})]})]})}}])&&Vn(t.prototype,r),s&&Vn(t,s),l}(o.Component),Kn=$n;function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eo(e){return eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},eo(e)}function to(e,t){return!t||"object"!==no(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ro(e,t){return ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ro(e,t)}var no=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function oo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=eo(e);if(t){var o=eo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return to(this,r)}}var so=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ro(e,t)}(i,e);var t,r,o,s=oo(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s.call(this,e)}return t=i,(r=[{key:"render",value:function(){var e,t,r,o,s=this.props.data,i=s.courseData;return s.courseFeatureData,i.currentCourseFetchStatus===Kt.iF.IN_PROGRESS||i.currentCourseAccessDataFetchStatus===Kt.iF.IN_PROGRESS||i.currentCourseFetchStatus===Kt.iF.IDLE?(0,n.jsx)(Vr.gb,{}):i.currentCourseSections&&i.currentCourseDetails?(0,n.jsx)(Kn,{data:null===(e=this.props)||void 0===e?void 0:e.data,callbacks:this.props.callbacks,refsToForward:null===(t=this.props)||void 0===t?void 0:t.refsToForward,helpers:null===(r=this.props)||void 0===r?void 0:r.helpers,learnyComponents:this.props.learnyComponents,allDashboardSalesCallbacks:this.props.allDashboardSalesCallbacks,courseFeatureCallbacks:this.props.courseFeatureCallbacks,i18n:this.props.i18n,t:this.props.t,theme:this.props.theme,footerData:null===(o=this.props)||void 0===o?void 0:o.footerData}):(0,n.jsx)(Vr.gb,{})}}])&&Jn(t.prototype,r),o&&Jn(t,o),i}(o.Component),io=An((0,Tn.$j)((function(e){return{data:e.data}}))((0,Xt.Z)((0,h.Z)(["common","product"])(so))),(function(e){var t=e.data.courseData.currentCourseFetchStatus;return t!==Kt.iF.IDLE&&t!==Kt.iF.IN_PROGRESS})),ao=r(93789),lo=r(7679),co=r(66441),uo=r(79471),ho=r(40455),po=function(){return null},fo=function(){return null},yo=function(){return null},vo=function(){return null},mo=r(44791),So=function(e){a.default.replace(l.y4.courseDashboard,l.XC.courseDashboard({productSeo:e}))},xo=function(){},bo=function(e,t,r){var n={signInToPay:e||t,priceId:r};e||t||delete n.signInToPay,r||delete n.priceId,a.default.push({pathname:l.y4.signup,query:n})},go=function(){return a.default.push({pathname:l.y4.store})},Co=function(){return a.default.push(l.y4.subscriptions)},jo=function(e,t,r,n,o,s){a.default.replace({pathname:l.y4.lessonPlayer,query:{bundleId:e,courseId:t,courseType:r===Kt.lW.TEST_SERIES?Kt.lW.TEST_SERIES:Kt.lW.COURSE,sectionId:n,lessonId:o}},l.XC.lessonPlayer(s),{shallow:!0})},To=r(72533),Io=r(2316),wo=r(72983);function ko(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Do=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSubscriptionMode=fe.Gj.pricing_model===U._n.SUBSCRIPTION_TYPE}var t,r,n;return t=e,r=[{key:"getIsPlayerDataFetching",value:function(e,t){var r=!1;return e!==U.UK.IN_PROGRESS&&t!==U.UK.IN_PROGRESS&&e!==U.UK.IDLE||(r=!0),r}},{key:"getIsPlayerDataFetchingFailed",value:function(e){var t=!1;return e===U.UK.FAILED&&(t=!0),t}},{key:"getIsCourseDataAccessFetchingFailed",value:function(e){var t=!1;return e===U.UK.FAILED&&(t=!0),t}},{key:"getCanShowRatingCard",value:function(e){var t=!1;return e!==y.ri.PURCHASED&&e!==y.ri.ENROLLED||(t=!0),t}},{key:"getIsContentDripEnabledAndNotReleased",value:function(e){return!(!e||!e.dripData||e.dripData.isReleased)}},{key:"getIsArticleScromTinCanLesson",value:function(e){if(e&&e.lessonType)switch(e.lessonType){case y.A.SCORM_TINCAN:case y.A.LIVE:case y.A.ARTICLE:return!0;default:return!1}return!1}},{key:"constructPlayerData",value:function(e,t,r,n){var o,s,i,a,l,c,u,d,h,p,f,y,v,m=e.currentCourseDetails,S=e.currentCourseSections,x=e.userEnrollmentState,b=e.currentCourseId,g=e.currentCourseSeoTitle,C=e.currentCourseFetchStatus,j=e.currentCourseAccessDataFetchStatus,T=e.currentCourseSectionId,I=e.currentLessonId,w=e.currentCourseTitle,k=e.currentBundleTitle,D=e.currentLessonTitle,E=e.currentSectionTitle,P=e.isCourseFree,L=e.currentCoursePlayTimeRestrictionDetails,O=e.shouldCurrentLessonShowPlayTime,R=e.currentPaymentState,A=e.paymentFetchStatus,_=e.sharedUserName,F=e.sharedUserId,B=e.sharedUserEmail,M=e.sharedUserMobileNum,N=e.noteBookLastRequestStatus,G=e.noteBookLastRequestId,W=e.currentCourseError,z=e.currentCourseContentSignedUrl,H=e.currentBundleSeoTitle,V=e.currentLessonDetails,Q=e.currentBundleId,q=e.currentCourseCompletionStats,Z=e.courseCompletionData,X=e.currentLessonPosition,Y=e.currentLessonBookMarks,$=e.currentLessonSlides,K=e.hasAccessToPlay,J=e.playerDataOfCurrentLesson,ee=e.initialSlideIndexForPayer,te=e.initialSlideSeekPosForPayer,re=e.currentBookMarkIdTs,ne=e.lastBookmarkModifiedTime,oe=e.sharedWaterMarkMsg,se=e.sharedIsWatermarkEnabled,ie=(e.sharedIsUserDataWaterMarkDisabled,e.sharedAuthToken),ae=e.downloadData,le=e.downloaderError,ce=e.isFileScanCompleted,ue=e.serverTimeOffset,de=e.hasNoLessons,he=e.sharedIsUserLoggedIn,pe=e.currentCourseLessons,ye=e.autoScrollLessonTs,ve=e.currentBundleDetails,me=e.userSelectedDownloadDir,Se=e.currentCourseDownloadSignedUrl,xe=e.canDownloadCourse,be=e.isOnline,ge=e.allDiscussionsData,Ce=e.noteBooks,je=e.moreViewData,Te=e.moreViewCallbacks,Ie=e.data,we=e.callbacks,ke=e.currentCoursePricing,De=e.isCourseExpired,Ee=e.isCoursePrivate,Pe=e.isSellIndividualEnabled,Le=e.sharedUserProfilePhoto,Oe=e.downloadQuality,Re=e.courseFeatureData,Ae=e.currentLessonPlayerQuizState,_e=e.attachmentData,Fe=e.footer,Ue=t.lastNoteBookRequestId,Be=t.isLivePlayerMode,Me=t.liveStatus,Ne=t.liveServerName;return{isSubscriptionMode:this.isSubscriptionMode,moreViewData:je,courseFeatureData:Re,moreViewCallbacks:Te,dashAndSalesBoardHelpers:r,courseFeatureHelpers:n,courseData:{isCoursePrivate:Ee,isCourseExpired:De,isSellIndividualEnabled:Pe,currentCoursePricing:ke,currentCourseDetails:m,isNotesEnabled:null===m||void 0===m?void 0:m.isNotesEnabled,currentCourseSections:S,userEnrollmentState:x,currentCourseId:b,currentCourseSeoTitle:g,currentCourseError:{errorMessage:null===W||void 0===W?void 0:W.errorMessage,errorCode:null===W||void 0===W?void 0:W.errorCode},currentCourseFetchStatus:C,currentCourseAccessDataFetchStatus:j,currentCourseSectionId:T,currentLessonId:I,currentCourseTitle:w,currentBundleTitle:k,currentLessonTitle:D,currentSectionTitle:E,currentBundleDetails:ve,isCourseFree:P,currentCourseContentSignedUrl:z,currentBundleSeoTitle:H,currentLessonDetails:V,currentBundleId:Q,currentCourseCompletionStats:q,courseCompletionData:Z,currentLessonPosition:X,currentLessonSlides:$,hasAccessToPlay:K,playerDataOfCurrentLesson:J,initialSlideIndexForPayer:ee,initialSlideSeekPosForPayer:te,downloadData:ae,downloaderError:le,isFileScanCompleted:ce,serverTimeOffset:ue,hasNoLessons:de,currentCourseLessons:pe,autoScrollLessonTs:ye,userSelectedDownloadDir:me,downloadQuality:Oe,currentCourseDownloadSignedUrl:Se,canDownloadCourse:xe,currency:fe.Gj.CURRENCY,currentLessonPlayerQuizState:Ae},playTimeRestrictionDetails:{currentCoursePlayTimeRestrictionDetails:L,shouldCurrentLessonShowPlayTime:O},paymentState:{currentPaymentState:R,paymentFetchStatus:A},sharedInfo:{sharedUserProfilePhoto:Le,sharedUserName:_,sharedUserId:F,sharedUserEmail:B,sharedUserMobileNum:M,sharedWaterMarkMsg:oe,sharedIsWatermarkEnabled:se,sharedAuthToken:ie,sharedIsUserLoggedIn:he,isOnline:be},notesAndBookmarkDetails:{noteBookLastRequestStatus:N,noteBookLastRequestId:G,currentBookMarkIdTs:re,lastBookmarkModifiedTime:ne,currentLessonBookMarks:Y},enrollmentButtonData:{data:{isFromPlayer:!0,showEnrollButton:null===(o=Ie.courseAccessData)||void 0===o?void 0:o.showEnrollButton,isCourseExpired:null===(s=Ie.courseAccessData)||void 0===s?void 0:s.isCourseExpired,isCoursePrivate:null===(i=Ie.courseAccessData)||void 0===i?void 0:i.isCoursePrivate,isSellIndividualEnabled:null!==(y=null===(a=Ie.courseData)||void 0===a?void 0:a.isSellIndividualEnabled)&&void 0!==y&&y,bundleId:null!==(v=null===(l=Ie.courseData.bundleDetails)||void 0===l?void 0:l.courseId)&&void 0!==v?v:0,sharedIsUserLoggedIn:he,showIosRedirectModal:null===(c=Ie.paymentData)||void 0===c?void 0:c.showIosRedirectModal,hasAccessToPlay:null===(u=Ie.courseAccessData)||void 0===u?void 0:u.hasAccessToPlay,isEnrolling:null===(d=Ie.paymentData)||void 0===d?void 0:d.isEnrolling,isPaymentFetchStateIsInProgress:A===U.UK.IN_PROGRESS,isCourseAvailableForTrial:null===(h=Ie.courseAccessData)||void 0===h?void 0:h.isCourseAvailableForTrial,isUserActionBuyNotPurchased:null===(p=Ie.courseAccessData)||void 0===p?void 0:p.isUserActionBuyNotPurchased,currentCourseHasAccessToPlayOnCurrentDevice:null===(f=Ie.courseAccessData)||void 0===f?void 0:f.currentCourseHasAccessToPlayOnCurrentDevice},callbacks:we.paymentCallbacks},playerUiState:{IsPlayerDataFetching:this.getIsPlayerDataFetching(C,j),IsPlayerDataFetchingFailed:this.getIsPlayerDataFetchingFailed(C),IsCourseDataAccessFetchingFailed:this.getIsCourseDataAccessFetchingFailed(j),canShowRatingCard:this.getCanShowRatingCard(x),IsContentDripEnabledAndNotReleased:this.getIsContentDripEnabledAndNotReleased(V),IsArticleScromTinCanLesson:this.getIsArticleScromTinCanLesson(V),lastNoteBookRequestId:Ue,isLivePlayerMode:Be,liveStatus:Me,liveServerName:Ne},playerCustomerConfigData:{NAME:fe.Gj.name,SCHOOL_ID:fe.Gj.SCHOOL_ID,hide_chat_user_presence:fe.Gj.hide_chat_user_presence},allDiscussionsData:ge,noteBooks:Ce,footer:Fe,isMobileDevice:(0,He.s2)(),isBookmarksEnabled:Boolean(Number(fe.Gj.bookmarks)),isTaxEnabled:fe.Gj.tax===an.E_.POST_GST_TAX&&fe.Gj.CURRENCY===an.pK.CURRENCY_INR,openTestInNewWindow:fe.Gj.open_test_in_new_window,openTestInSameWindow:fe.Gj.open_practice_quiz_in_same_window,attachmentData:_e}}}],r&&ko(t.prototype,r),n&&ko(t,n),e}(),Eo=r(99032),Po=r(49613),Lo=r(60222);function Oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ro=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hideExternalScript=pe._y,this.enableExternalScript=pe.ET,this.openQuizPlayer=ir.Px,this.checkMoreOptions=Lo.X6}var t,r,n;return t=e,(r=[{key:"getIsPlayerDataFetching",value:function(e,t){var r=!1;return e!==U.UK.IN_PROGRESS&&t!==U.UK.IN_PROGRESS&&e!==U.UK.IDLE||(r=!0),r}},{key:"getIsPlayerDataFetchingFailed",value:function(e){var t=!1;return e===U.UK.FAILED&&(t=!0),t}},{key:"getIsCourseDataAccessFetchingFailed",value:function(e){var t=!1;return e===U.UK.FAILED&&(t=!0),t}},{key:"getCanShowRatingCard",value:function(e){var t=!1;return e!==y.ri.PURCHASED&&e!==y.ri.ENROLLED||(t=!0),t}},{key:"getIsContentDripEnabledAndNotReleased",value:function(e){return!(!e||!e.dripData||e.dripData.isReleased)}},{key:"getIsArticleScromTinCanLesson",value:function(e){if(e&&e.lessonType)switch(e.lessonType){case y.A.SCORM_TINCAN:case y.A.LIVE:case y.A.ARTICLE:return!0;default:return!1}return!1}}])&&Oo(t.prototype,r),n&&Oo(t,n),e}();function Ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bo(e){return Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Bo(e)}function Mo(e,t){return!t||"object"!==Wo(t)&&"function"!==typeof t?_o(e):t}function No(e,t){return No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},No(e,t)}function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ao(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ao(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Wo=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function zo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Bo(e);if(t){var o=Bo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Mo(this,r)}}function Ho(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&No(e,t)}(u,t);var r,s,i,c=zo(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).playerRef=o.createRef(),t.lstSliderComp=o.createRef(),t.updateLastAccessedLesson=function(){var e,r,n,o,s,i,a,l=t.getCurrentPosition()||{},c=l.currentSlide,u=l.currentVideoTime,d=(l.key,null===(e=t.lstSliderComp)||void 0===e||null===(r=e.current)||void 0===r||null===(n=r.sliderRef)||void 0===n||null===(o=n.props)||void 0===o?void 0:o.lessonData),h={lessonId:null===d||void 0===d?void 0:d.lessonId,courseId:null===d||void 0===d?void 0:d.courseId,sectionId:null===d||void 0===d?void 0:d.sectionId,videoTime:u,currentSlidePos:c,bundleId:null===(s=t.props)||void 0===s?void 0:s.currentBundleId,currentBundleTitle:t.props.currentBundleTitle,currentBundleDetails:t.props.currentBundleDetails||void 0,currentCourseDetails:t.props.currentCourseDetails,courseCompletionStats:t.props.courseCompletionStatsRaw,productDetails:null===(i=t.props)||void 0===i||null===(a=i.products)||void 0===a?void 0:a.courses[null===d||void 0===d?void 0:d.courseId],isCourseExpired:t.props.isCourseExpired};(null===d||void 0===d?void 0:d.courseId)&&t.props.hasAccessToPlay&&t.props.doUpdateRecentlyAccessedCourse(h)},t.toggleLivePlayerMode=function(e){t.setState({isLivePlayerMode:e})},t.updateLiveStatus=function(e){t.setState({liveStatus:e.liveStatus})},t.onHandleTestSeriesBuy=function(e,r,n){var o,s;(null===(o=t.props)||void 0===o?void 0:o.sharedIsUserLoggedIn)?function(e,t,r){a.default.push({pathname:l.y4.checkout,query:{courseId:e||t,priceId:r}},l.XC.checkout({courseId:e||t,priceId:r}))}(e,r,n):(null===(s=t.props)||void 0===s||s.doSetPostSigninRoute(function(e,t,r){return{href:{pathname:l.y4.checkout,query:{courseId:e||t,priceId:r}},as:l.XC.checkout({courseId:e||t,priceId:r})}}(e,r,n)),bo(e,r,n))},t.onHandleTestSeriesEnroll=function(){var e,r,n,o,s,i,l,c,u=null===(e=t.props)||void 0===e?void 0:e.currentBundleId,d=null===(r=t.props)||void 0===r?void 0:r.currentCourseId,h=null===(n=t.props)||void 0===n?void 0:n.allBundleCourseIds;(null===(o=t.props)||void 0===o?void 0:o.sharedIsUserLoggedIn)?t.props.currentBundleId&&(null===(s=t.props)||void 0===s?void 0:s.currentCourseId)?null===(i=t.props)||void 0===i||i.doEnrollToCourse(u,h):null===(l=t.props)||void 0===l||l.doEnrollToCourse(d,h):(null===(c=t.props)||void 0===c||c.doSetPostSigninRoute({href:{pathname:a.default.pathname,query:a.default.query},as:a.default.asPath}),bo(null,null,null))},t.onLessonPlayerMount=function(){var e=t.props,r=e.currentCourseId,n=e.lastAccessedLessons,o=e.currentCourseSectionId,s=e.currentLessonId,i=e.currentBundleId,a=e.navigationCurrentScreen;if(o&&s&&r&&a===U.i_.COURSE_DETAILS){var l=0,c=0;if(t.props.currentCourseCompletionStats&&t.props.completedLessonData)l=Go(t.props.currentCourseCompletionStats,1)[0],t.props.completedLessonData[l]&&(c=t.props.completedLessonData[l].sectionId);var u={bundleId:i,courseId:r,courseType:Kt.lW.COURSE,sectionId:c||o,lessonId:l||s},d={productSeo:t.props.currentBundleSeoTitle||t.props.currentCourseSeoTitle,subProductSeo:t.props.currentBundleSeoTitle?t.props.currentCourseSeoTitle:null,sectionId:c||o,lessonId:l||s};n[r]||t.props.doSetCurrentAccessingLesson({sectionId:c||o,lessonId:l||s,courseId:r},s),jo(i,r,u.courseType,u.sectionId,u.lessonId,d)}},t.state={lastNoteBookRequestId:0,isLivePlayerMode:!1,liveStatus:Kt.yi.IDLE,liveServerName:null},t.goBack=t.goBack.bind(_o(t)),t.handleExitFromPlayer=t.handleExitFromPlayer.bind(_o(t)),t.getCurrentPosition=t.getCurrentPosition.bind(_o(t)),t.playerBookMarkCallBack=t.playerBookMarkCallBack.bind(_o(t)),t.addBookmark=t.addBookmark.bind(_o(t)),t.deleteBookmark=t.deleteBookmark.bind(_o(t)),t.goToTest=t.goToTest.bind(_o(t)),t.diagnose=t.diagnose.bind(_o(t)),t.markAsComplete=t.markAsComplete.bind(_o(t)),t.onGoToNextLesson=t.onGoToNextLesson.bind(_o(t)),t.onGoToPrevLesson=t.onGoToPrevLesson.bind(_o(t)),t.sendStartedPlaying=t.sendStartedPlaying.bind(_o(t)),t.goToTestResults=t.goToTestResults.bind(_o(t)),t.toggleLivePlayerMode=t.toggleLivePlayerMode.bind(_o(t)),t.updateLiveStatus=t.updateLiveStatus.bind(_o(t)),t.onCourseTimeAnalytics=t.onCourseTimeAnalytics.bind(_o(t)),t.unsetUserEnrollAction=t.unsetUserEnrollAction.bind(_o(t)),t.clearCache=t.clearCache.bind(_o(t)),t.setLiveLessonAttendance=t.setLiveLessonAttendance.bind(_o(t)),t.clearDownloaderError=t.clearDownloaderError.bind(_o(t)),t.handleStoragePermissionGrant=t.handleStoragePermissionGrant.bind(_o(t)),t.onGetLessonDownloadData=t.onGetLessonDownloadData.bind(_o(t)),t.fetchCourseDetails=t.fetchCourseDetails.bind(_o(t)),t.clearDiscussionAndNotesText=t.clearDiscussionAndNotesText.bind(_o(t)),t.sendSubNavChangeEvent=t.sendSubNavChangeEvent.bind(_o(t)),t.setCurrentAccessingLesson=t.setCurrentAccessingLesson.bind(_o(t)),t.queueDownload=t.queueDownload.bind(_o(t)),t.cancelDownload=t.cancelDownload.bind(_o(t)),t.deleteDownload=t.deleteDownload.bind(_o(t)),t.getChatToken=t.getChatToken.bind(_o(t)),t.PlayerUtils=new Do,t}return r=u,s=[{key:"unsetUserEnrollAction",value:function(){this.props.doUnsetUserEnrollAction()}},{key:"handleExitFromPlayer",value:function(){return this.props.currentPaymentState===Po.tm.PAYMENT_VERIFY&&this.props.paymentFetchStatus===U.UK.IN_PROGRESS}},{key:"getCurrentPosition",value:function(){return this.lstSliderComp&&this.lstSliderComp.current&&this.lstSliderComp.current.sliderRef&&this.lstSliderComp.current.sliderRef.getCurrentPosition?this.lstSliderComp.current.sliderRef.getCurrentPosition():{currentSlide:0,currentVideoTime:0,key:null}}},{key:"playerBookMarkCallBack",value:function(e,t,r,n){r?this.addBookmark(n):!0===e?this.deleteBookmark(t):this.addBookmark()}},{key:"addBookmark",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.props.userEnrollmentState!==y.ri.PURCHASED)return!1;for(var t=this.getCurrentPosition(),r=t.currentSlide,n=t.currentVideoTime,o=t.key,s=0;s<e.length;s++)if(e[s].timeStamp===n)return!1;var i={lesson_id:this.props.currentLessonId,section_id:this.props.currentCourseSectionId,course_id:this.props.currentCourseId,note_type:To.dE.BOOKMARK,product_type:To.$R.LESSON,link:"".concat(r,":").concat(n,":").concat(o),tag:this.props.currentLessonTitle,notes:null,quiz_id:0,question_id:0,quiz_section_id:0},a=Date.now();return this.setState({lastNoteBookRequestId:a}),this.props.doAddNoteBook(i,a),!0}},{key:"deleteBookmark",value:function(e){if(!e)return!1;var t=Date.now();return this.setState({lastNoteBookRequestId:t}),this.props.doDeleteNotes(e,t),!0}},{key:"goBack",value:function(){return this.updateLastAccessedLesson(),this.handleExitFromPlayer()||a.default.back(),!0}},{key:"goToTest",value:function(e,t,r){!function(e,t,r){a.default.push({pathname:l.y4.testPlayer,query:{id:e}},l.XC.testPlayer({id:e,lessonId:r}))}(e,0,r)}},{key:"diagnose",value:function(e){this.props.sharedUserName,this.props.sharedUserEmail,this.props.sharedUserMobileNum,this.props.sharedUserId,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Uo(e,t,r[t])}))}}({course:void 0},e)}},{key:"markAsComplete",value:function(e,t,r){e?this.props.doMarkLessonAsComplete(t,r):this.props.doMarkLessonAsIncomplete(t,r)}},{key:"onGoToNextLesson",value:function(e){var t=this.props,r=t.currentCourseSections,n=t.currentCourseSectionId;if(r){var o=r.sectionIds,s=o.indexOf(n),i=r.sectionDetails[n].lessonIds,a=i.indexOf(e);a===i.length-1&&s!==o.length-1?(s+=1,a=0):a+=1;var l=o[s],c=r.sectionDetails[l].lessonIds[a],u={courseId:this.props.currentCourseId,sectionId:l,lessonId:c,autoScrollLessonTs:(new Date).getTime()};c&&l&&this.props.doSetCurrentAccessingLesson(u,c)}else console.log("onGoToNextLesson : invalid currentCourseSections")}},{key:"onGoToPrevLesson",value:function(e){var t=this.props,r=t.currentCourseSections,n=t.currentCourseSectionId;if(r){var o=r.sectionIds,s=o.indexOf(n),i=r.sectionDetails[n].lessonIds.indexOf(e);0===i&&0!==s?(s-=1,i=r.sectionDetails[o[s]].lessonIds.length-1):i-=1;var a=o[s],l=r.sectionDetails[a].lessonIds[i],c={courseId:this.props.currentCourseId,sectionId:a,lessonId:l,autoScrollLessonTs:(new Date).getTime()};a&&l&&this.props.doSetCurrentAccessingLesson(c,l)}else console.log("onGoToPrevLesson : invalid currentCourseSections")}},{key:"sendStartedPlaying",value:function(){var e=this.props,t=e.currentCourseTitle,r=e.currentBundleTitle,n=e.isCourseFree,o=e.currentLessonTitle,s=e.currentSectionTitle,i=e.currentLessonId,a=(0,Eo.I3)({courseName:t,bundleName:r,lessonName:o,sectionName:s,isCourseFree:n});if((0,pe.$j)(a),4223==fe.Gj.SCHOOL_ID&&[114476,109312,106506].indexOf(i)>-1){var l=U.Mm;(0,pe.$j)({eventName:l[i],eventProperties:{date:(new Date).toDateString()}})}}},{key:"goToTestResults",value:function(e,t,r,n){!function(e,t,r,n){a.default.push({pathname:l.y4.testResult,query:{id:e,retakeCount:t,lessonId:n}},l.XC.testResult({id:e,retakeCount:t,lessonId:n}))}(e,t,0,n)}},{key:"onCourseTimeAnalytics",value:function(e){this.props.doReportCourseAnalytics(e)}},{key:"clearCache",value:function(){this.props.doClearCache()}},{key:"setLiveLessonAttendance",value:function(e){this.props.doSetLiveLessonAttendance(e)}},{key:"clearDownloaderError",value:function(){this.props.doClearDownloaderError()}},{key:"fetchCourseDetails",value:function(e){this.props.doFetchCourseDetails(e)}},{key:"handleStoragePermissionGrant",value:function(){this.props.doHandleStoragePermissionGrant()}},{key:"clearDiscussionAndNotesText",value:function(){this.props.doClearText()}},{key:"sendSubNavChangeEvent",value:function(e,t){this.props.doSendSubNavChangeEvent(e,t)}},{key:"setCurrentAccessingLesson",value:function(e,t){this.props.doSetCurrentAccessingLesson(e,t)}},{key:"queueDownload",value:function(e){this.props.doQueueDownload(e)}},{key:"cancelDownload",value:function(e){this.props.doCancelDownload(e)}},{key:"deleteDownload",value:function(e){this.props.doDeleteDownload(e)}},{key:"onGetLessonDownloadData",value:function(e,t,r,n,o,s){return(0,mo.TM)(e,t,r,n,o,s)}},{key:"getChatToken",value:function(e,t,r){(0,pe.JF)(y.Y9.CHAT_TOKEN_URL,"get",{lesson_id:r},null,"json",this.props.sharedAuthToken,null,2e4).then((function(t){var r=t.response;e(r)})).catch((function(e){e.error,t()}))}},{key:"render",value:function(){var t,r,o,s,i,a,l,c,u,d,h={navigation:this.props.navigation,handleExitFromPlayer:this.handleExitFromPlayer,unsetUserEnrollAction:this.unsetUserEnrollAction,getCurrentPosition:this.getCurrentPosition,playerBookMarkCallBack:this.playerBookMarkCallBack,addBookmark:this.addBookmark,deleteBookmark:this.deleteBookmark,goBack:this.goBack,goToTest:this.goToTest,diagnose:this.diagnose,markAsComplete:this.markAsComplete,onGoToNextLesson:this.onGoToNextLesson,onGoToPrevLesson:this.onGoToPrevLesson,sendStartedPlaying:this.sendStartedPlaying,goToTestResults:this.goToTestResults,toggleLivePlayerMode:this.toggleLivePlayerMode,updateLiveStatus:this.updateLiveStatus,clearCache:this.clearCache,setLiveLessonAttendance:this.setLiveLessonAttendance,onCourseTimeAnalytics:(null===(t=this.props.currentCoursePlayTimeRestrictionDetails)||void 0===t?void 0:t.remainingAllocatedTime)?this.onCourseTimeAnalytics.bind(this):null,fetchCourseDetails:this.fetchCourseDetails,constructSlideDataForLessonPlay:ho.bm,constructBookMarkDataForPlayer:ho.K$,clearDiscussionAndNotesText:this.clearDiscussionAndNotesText,sendSubNavChangeEvent:this.sendSubNavChangeEvent,setCurrentAccessingLesson:this.setCurrentAccessingLesson,handleStoragePermissionGrant:this.handleStoragePermissionGrant,queueDownload:this.queueDownload,cancelDownload:this.cancelDownload,deleteDownload:this.deleteDownload,onGetLessonDownloadData:this.onGetLessonDownloadData,getAllFilesToDownload:ho.zT,isAnyDownloadAttempted:mo.Vq,isAnyDownloadInProgress:mo.z2,showToast:pe.CF,getStoragePath:uo.a$,navigateToLessonDownloadList:xo,getChatToken:this.getChatToken,goToCourseDashboard:So,clearCourseData:null===(r=this.props)||void 0===r?void 0:r.doClearCourseData,onHandleTestSeriesBuy:this.onHandleTestSeriesBuy,onHandleTestSeriesEnroll:this.onHandleTestSeriesEnroll,onHandleSetVariablePrice:null===(o=this.props)||void 0===o?void 0:o.doSetVariablePrice,goToStore:go,goToSubscription:Co,goToLessonPlayer:jo,setQuizIdInResultBundle:null===(s=this.props)||void 0===s?void 0:s.doSetQuizIdInResultBundle,changeQuizStateInLessonPlayer:null===(i=this.props)||void 0===i?void 0:i.doChangeQuizStateInLessonPLayer,startTestPlayer:null===(a=this.props)||void 0===a?void 0:a.doStartTestPLayer,onLessonPlayerMount:this.onLessonPlayerMount,mobilePlugins:{exitFullScreen:pe.Pr,getRatioHeight:pe.getRatioHeight,AddListenForHardwarePress:uo.Qu,RemoveListenForHardwarePress:uo.cM,ActivateScreenWake:uo.vw,DeactivateScreenWake:uo.z9,GetWindowLayoutSize:uo.sz,LockOrientationToPortrait:uo.ud,checkReadWritePermissionsForDirectory:uo.p_,getChatListHistory:po,getChatList:fo,sendMessage:yo,setUserAuth:vo},attachmentCallbacks:{onAttachmentBundleReset:null===(l=this.props)||void 0===l?void 0:l.doResetAttachmentBundle,fetchAttachmentForLesson:null===(c=this.props)||void 0===c?void 0:c.doFetchAttachmentForLesson}},p=new Io.q,f=new wo._,y=this.PlayerUtils.constructPlayerData(this.props,this.state,p,f),v={LstSlider:uo.a8};return(0,n.jsx)(e,{refsToForward:{playerRef:this.playerRef,lstSliderComp:this.lstSliderComp},data:y,callbacks:h,helpers:new Ro,learnyComponents:v,allDashboardSalesCallbacks:null===(u=this.props)||void 0===u?void 0:u.callbacks,courseFeatureCallbacks:null===(d=this.props)||void 0===d?void 0:d.courseFeatureCallbacks})}}],s&&Fo(r.prototype,s),i&&Fo(r,i),u}(o.Component);return(0,p.$)("selectCurrentCoursePricing","selectCurrentCourseId","selectCurrentCourseSeoTitle","selectCurrentCourseDetails","selectCurrentCourseSections","selectCurrentCourseFetchStatus","selectCurrentCourseAccessDataFetchStatus","selectCurrentCourseError","selectCurrentCourseSectionId","selectCurrentLessonId","selectCurrentPaymentState","selectCurrentCourseTitle","selectCurrentBundleTitle","selectCurrentLessonTitle","selectCurrentSectionTitle","selectIsCourseFree","selectIsCourseExpired","selectIsSellIndividualEnabled","selectCurrentCoursePlayTimeRestrictionDetails","selectUserEnrollmentState","selectSharedUserName","selectSharedUserId","selectSharedUserEmail","selectSharedUserMobileNum","selectPaymentFetchStatus","selectNoteBookLastRequestStatus","selectNoteBookLastRequestId","selectShouldCurrentLessonShowPlayTime","selectCurrentCourseContentSignedUrl","selectCurrentBundleSeoTitle","selectCurrentLessonDetails","selectHasAccessToPlay","selectHasNoLessons","selectCurrentBundleId","selectCurrentCourseCompletionStats","selectCourseCompletionData","selectPlayerDataOfCurrentLesson","selectDownloadData","selectCurrentLessonPosition","selectSharedWaterMarkMsg","selectSharedIsWatermarkEnabled","selectSharedIsUserDataWaterMarkDisabled","selectSharedAuthToken","selectDownloaderError","selectIsFileScanCompleted","selectServerTimeOffset","selectCurrentLessonBookMarks","selectLastBookmarkModifiedTime","selectCurrentLessonSlides","selectInitialSlideIndexForPayer","selectInitialSlideSeekPosForPayer","selectCurrentBookMarkIdTs","selectSharedIsUserLoggedIn","selectAutoScrollLessonTs","selectCurrentCourseLessons","selectCurrentBundleDetails","selectDownloadQuality","selectUserSelectedDownloadDir","selectCurrentCourseDownloadSignedUrl","selectCanDownloadCourse","selectIsOnline","selectSharedUserProfilePhoto","doClearText","doSendSubNavChangeEvent","doMarkLessonAsComplete","doMarkLessonAsIncomplete","doSetCurrentAccessingLesson","doUnsetUserEnrollAction","doFetchCourseDetails","doFetchCourseAccessData","doAddNoteBook","doDeleteNotes","doClearCache","doSetLiveLessonAttendance","doReportCourseAnalytics","doClearDownloaderError","doHandleStoragePermissionGrant","doQueueDownload","doCancelDownload","doDeleteDownload","doUpdateRecentlyAccessedCourse","selectCourseCompletionStatsRaw","doClearCourseData","doSetPostSigninRoute","doEnrollToCourse","selectAllBundleCourseIds","doSetVariablePrice","selectCurrentLessonPlayerQuizState","doSetQuizIdInResultBundle","doChangeQuizStateInLessonPLayer","doStartTestPLayer","selectLastAccessedLessons","selectNavigationCurrentScreen","selectAttachmentData","selectCurrentProductDetails","doResetAttachmentBundle","doFetchAttachmentForLesson",t)}var Vo=r(26044);function Qo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qo=(0,Vo.Z)((0,lo.Z)((0,ao.Z)((0,rr.Z)(Ho((function(e){return(0,n.jsx)(Wn,{data:e.data,callbacks:e.callbacks,refsToForward:null===e||void 0===e?void 0:e.refsToForward,helpers:null===e||void 0===e?void 0:e.helpers,learnyComponents:e.learnyComponents,allDashboardSalesCallbacks:e.allDashboardSalesCallbacks,courseFeatureCallbacks:e.courseFeatureCallbacks})})))))),Zo=(0,Vo.Z)((0,lo.Z)((0,ao.Z)((0,rr.Z)(Ho((function(e){return(0,n.jsx)(io,{data:e.data,callbacks:e.callbacks,refsToForward:null===e||void 0===e?void 0:e.refsToForward,helpers:null===e||void 0===e?void 0:e.helpers,learnyComponents:e.learnyComponents,allDashboardSalesCallbacks:e.allDashboardSalesCallbacks,courseFeatureCallbacks:e.courseFeatureCallbacks})})))))),Xo=(0,ao.Z)((0,lo.Z)((0,co.Z)((function(e){return(0,n.jsx)(Zt.A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qo(e,t,r[t])}))}return e}({},e))}))));function Yo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Yo(e,t,r[t])}))}return e}function Ko(e){var t=(0,qt.vC)();return(null===t||void 0===t?void 0:t.isAppV4)?(0,n.jsx)(qo,$o({},e)):(0,n.jsx)(et,$o({},e))}function Jo(e){var t=(0,qt.vC)();return(null===t||void 0===t?void 0:t.isAppV4)?(0,n.jsx)(Xo,{}):(0,n.jsx)(dt,$o({},e))}function es(e){var t=(0,qt.vC)();return(null===t||void 0===t?void 0:t.isAppV4)?(0,n.jsx)(Xo,{}):(0,n.jsx)(vt,$o({},e))}function ts(e){var t=(0,qt.vC)();return(null===t||void 0===t?void 0:t.isAppV4)?(0,n.jsx)(Zo,{}):(0,n.jsx)(Qt,$o({},e))}var rs=(0,tt.Z)((function(e){var t=(0,st.$)("common").t,r=(0,qt.vC)();if(e.loadStatus===y.UK.IN_PROGRESS||e.loadStatus===y.UK.IDLE)return(null===r||void 0===r?void 0:r.isAppV4)?(0,n.jsx)(s.kC,{sx:{height:"100vh",width:"100vw",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(Z.aN,{})}):(0,n.jsx)(c.gb,{});if(e.loadStatus===y.UK.FAILED)return(0,n.jsx)(n.Fragment,{children:e.error&&(0,n.jsx)(c.jj,{errorCode:e.error.errorCode,errorText:e.error.errorMessage,action:e.retry,actionText:t("retry")})});var o=new URLSearchParams(window.location.search).get("template");switch(e.productType){case y.VQ.COURSE:return o?(0,n.jsx)(ts,$o({},e)):(0,n.jsx)(Ko,$o({},e));case y.VQ.TEST:return(0,n.jsx)(es,$o({},e));case y.VQ.BUNDLE:case y.VQ.SUSBCRIPTION_TIER_BUNDLE:case y.VQ.SUBSCRIPTION_BUNDLE:return(0,n.jsx)(Jo,$o({},e));case y.VQ.TEST_SERIES:return(0,n.jsx)(Ko,$o({},e));default:return(0,n.jsx)("div",{children:"default/error"})}}))},1264:function(e,t,r){r.d(t,{Z:function(){return E}});var n=r(24246),o=r(27378),s=r(92568),i=r(5725),a=r(62533),l=r(3880),c=r(9078),u=r(21155),d=r(55002);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var t,r,s=e.data,h=e.callbacks,f=e.widgetDataParams,y=e.pageData,v=s.isLoading,m=s.categoriesData,S=(s.contentType,s.errorMessage,s.currentNewsfeedCategoryId),x=s.isCategoriesNotRequired,b=(0,c.$)("common").t,g=(0,o.useState)(null),C=g[0],j=g[1],T=(h.onViewAll,h.onPress);(0,o.useEffect)((function(){var e;S&&(null===y||void 0===y||null===(e=y.CATEGORY_WIDGET)||void 0===e?void 0:e.shouldUseApplyMech)&&(C||j(S))}),[]);var I=(null===y||void 0===y||null===(t=y.CATEGORY_WIDGET)||void 0===t?void 0:t.shouldUseApplyMech)?C:S,w=function(e,t){var r,o,s,i=e.categoryName[0].toUpperCase()+e.categoryName.substring(1);return(0,n.jsx)(l.rb,{className:"categoryWidgetCard",variant:"horizontal",thumbnailProps:{accessibilityLabel:null===e||void 0===e||null===(r=e.categoryName)||void 0===r?void 0:r.slice(0,1),imageSource:e.categoryImageSrc,width:"40px",aspectRatio:"1:1"},text:i||"",isSelected:I===e.id,sx:{borderWidth:(null===y||void 0===y||null===(o=y.CATEGORY_WIDGET)||void 0===o?void 0:o.action_type)===u.wZ.NAVIGATE_ACTION?1:0,borderStyle:"solid",borderColor:"border-basic-color-4",width:"hCollection"===(null===y||void 0===y||null===(s=y.CATEGORY_WIDGET)||void 0===s?void 0:s.collectionType)?"100%":"max-content"},onClick:function(){var t,r,n,o;((null===y||void 0===y||null===(t=y.CATEGORY_WIDGET)||void 0===t?void 0:t.shouldUseApplyMech)&&(e.id===C?j(null):j(e.id)),(null===y||void 0===y||null===(r=y.CATEGORY_WIDGET)||void 0===r?void 0:r.shouldUseApplyMech)&&(null===h||void 0===h?void 0:h.onHandleCategoryForApplyMech))?null===h||void 0===h||h.onHandleCategoryForApplyMech((null===y||void 0===y||null===(n=y.CATEGORY_WIDGET)||void 0===n?void 0:n.action_type)||(null===f||void 0===f?void 0:f.action_type)||u.wZ.NAVIGATE_ACTION,{item:e}):T((null===y||void 0===y||null===(o=y.CATEGORY_WIDGET)||void 0===o?void 0:o.action_type)||(null===f||void 0===f?void 0:f.action_type)||u.wZ.NAVIGATE_ACTION,{item:e})}},e.id||t)};return x||v||0===(null===m||void 0===m?void 0:m.length)?(0,n.jsx)(i.xu,{}):(0,n.jsxs)(i.xu,{children:["hCollection"!==(null===y||void 0===y||null===(r=y.CATEGORY_WIDGET)||void 0===r?void 0:r.collectionType)?(0,n.jsx)(d.F,{variant:"list",removeGutter:!0,hListItemWidth:"200px",ListHeaderComponent:function(){return(0,n.jsx)(i.kC,{children:(0,n.jsx)(i.xu,{mb:4,children:(0,n.jsx)(a.xv,{category:"h6",textTransform:"capitalize",children:b("categories")})})})},itemData:p(m),renderItem:w}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.F,{variant:"hCollection",removeGutter:!0,hListItemWidth:"200px",ListHeaderComponent:function(){return(0,n.jsx)(i.kC,{children:(0,n.jsx)(i.xu,{mb:1,children:(0,n.jsx)(a.xv,{category:"h5",textTransform:"capitalize",children:b("categories")})})})},itemData:p(m),renderItem:w})}),(null===y||void 0===y?void 0:y.hasDivider)&&(0,n.jsx)(i.xu,{py:8,children:(0,n.jsx)(a.iz,{})})]})},y=function(e,t){var r,n,o={CATEGORY_WIDGET:{},ALERT_WIDGET:{}};(null===t||void 0===t?void 0:t.CATEGORY_WIDGET)&&(null===t||void 0===t||null===(r=t.CATEGORY_WIDGET)||void 0===r||r.filter,null===t||void 0===t||null===(n=t.CATEGORY_WIDGET)||void 0===n||n.filter);return(null===t||void 0===t?void 0:t.ALERT_WIDGET)&&(o.ALERT_WIDGET={}),(null===t||void 0===t?void 0:t.RECENT_WIDGET)&&t.RECENT_WIDGET.numOfRecentCourseShown&&(o.RECENT_WIDGET={numOfRecentCourseShown:t.RECENT_WIDGET.numOfRecentCourseShown}),o[e]},v=r(27693),m=r.n(v),S=r(27557),x=r.n(S);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=function(e){var t=(0,c.$)("product").t;m().extend(x());var r=e.data,o=e.callbacks,s=(e.widgetDataParams,r.alerts),h=r.isLoading,p=o.onPress;return o.onViewAll,s&&s.length&&!h?(0,n.jsx)(i.xu,{mt:10,children:(0,n.jsx)(d.F,{variant:"hCollection",ListHeaderComponent:function(){return(0,n.jsx)(i.xu,{mb:2,children:(0,n.jsx)(a.xv,{category:"h5",textTransform:"capitalize",children:t("upcomingLiveClasses")})})},itemData:g(s),renderItem:function(e,r){var o,s,i,a,c,d=[m()().isBetween(m()(null===e||void 0===e?void 0:e.startTime),m()(null===e||void 0===e?void 0:e.endTime))?t("liveNow"):m()(null===e||void 0===e?void 0:e.startTime).format("h:mm A"),null===e||void 0===e||null===(o=e.alertData)||void 0===o?void 0:o.author].join(" \u2022 ");return(0,n.jsx)(l.TB,{thumbnailProps:{imageSource:null===e||void 0===e||null===(s=e.alertData)||void 0===s?void 0:s.author_image,accessibilityLabel:null===e||void 0===e||null===(i=e.alertData)||void 0===i?void 0:i.title,width:"200px",aspectRatio:"1:1"},showTag:!0,overline:null===e||void 0===e||null===(a=e.alertData)||void 0===a?void 0:a.caption,title:null===e||void 0===e||null===(c=e.alertData)||void 0===c?void 0:c.title,subtitle:d,onCardClick:function(){p(u.wZ.NAVIGATE_ACTION,{alertId:null===e||void 0===e?void 0:e.id})}},(null===e||void 0===e?void 0:e.id)||r)}})}):(0,n.jsx)(n.Fragment,{children:" "})};var j=function(e){var t=e.data,r=e.callbacks,o=(t.isLoading,t.promoData),s=(t.error,r.onPress);return o&&o.length?(0,n.jsx)(i.xu,{pb:[0,4,6],mb:[0,4,6],children:(0,n.jsx)(l.lr,{children:o&&(null===o||void 0===o?void 0:o.map((function(e){return(0,n.jsx)(i.xu,{style:{width:"100%"},onClick:function(){return s(u.wZ.NAVIGATE_ACTION,e)},sx:{borderRadius:"card",cursor:"pointer"},children:(0,n.jsx)(a.pl,{imageSource:e.image,accessibilityLabel:e.label,aspectRatio:"4:1",hideOutline:!0})},e.id)})))})}):(0,n.jsx)(i.xu,{})};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var t=e.data,r=e.callbacks,o=t.postTypesData,s=r.onPress;if(o&&o.length<=1)return(0,n.jsx)(n.Fragment,{});var a=null===o||void 0===o?void 0:o.filter((function(e){return e.contentType!==u.b3.PROMO}));return(0,n.jsx)(i.xu,{children:(0,n.jsx)(d.F,{variant:"hCollection",removeGutter:!0,hListItemWidth:"80px",itemData:I(a),renderItem:function(e,t){var r;return(0,n.jsx)(l.rb,{className:"categoryWidgetCard",variant:"vertical",thumbnailProps:{accessibilityLabel:null===e||void 0===e||null===(r=e.typeName)||void 0===r?void 0:r.slice(0,1),imageSource:e.postTypeImgSrc,width:"40px",aspectRatio:"1:1",shape:"circle",iconSource:e.iconName},text:e.typeName||"",onClick:function(){s(u.wZ.NAVIGATE_ACTION,e)}},e.id||t)}})})};function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){k(e,t,r[t])}))}return e}var E=function(e){var t=e.widgetType,r=e.widgetData,i=e.widgetCallbacks,a=e.widgetDataParams,l=e.pageData,c=i.onWidgetLoaded;switch((0,o.useEffect)((function(){t&&c(t||"",y(t,a)||{})}),[t]),t){case s.eq.ALERT_WIDGET:return(0,n.jsx)(C,{data:r.ALERT_WIDGET,callbacks:i.ALERT_WIDGET,widgetDataParams:y(t,a)});case s.eq.CATEGORY_WIDGET:return(0,n.jsx)(f,{data:null===r||void 0===r?void 0:r.CATEGORY_WIDGET,callbacks:null===i||void 0===i?void 0:i.CATEGORY_WIDGET,widgetDataParams:y(t,a),pageData:l});case s.eq.PROMO_WIDGET:return(0,n.jsx)(j,{data:r.PROMO_WIDGET,callbacks:i.PROMO_WIDGET});case s.eq.POST_TYPES_WIDGET:var u,d,h=(null===l||void 0===l||null===(u=l.POST_TYPES_WIDGET)||void 0===u?void 0:u.showWidgetLoading)||(null===(d=r.POST_TYPES_WIDGET)||void 0===d?void 0:d.isLoading);return(0,n.jsx)(w,{data:D({},r.POST_TYPES_WIDGET,{isLoading:h}),callbacks:i.POST_TYPES_WIDGET});default:return(0,n.jsx)("div",{})}}}}]);