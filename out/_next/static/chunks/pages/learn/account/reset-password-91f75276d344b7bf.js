(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7504],{53298:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn/account/reset-password",function(){return r(38678)}])},38678:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(24246),s=r(27378),o=r(55480),i=r(14916),a=r(2113),u=r(96627),c=r(43894),l=r(9078),d=r(267),f=r(53850),p=r(23998),w=r(86677),h=function(e){var t=(0,l.$)("account").t,r=e.doResetPassword,a=e.authErrorMessage,h=e.authState,v=e.authApiStatus,m=e.passwordResetToken,P=e.doSignoutUser,b=e.passwordResetUserId;return(0,s.useEffect)((function(){h===p.fD.RESETTING_PASSWORD&&v===p.mP.SUCCESS&&(P(),w.default.replace(f.y4.signin,f.XC.signin(),{shallow:!0}))})),(0,n.jsx)(u.J9,{initialValues:{password:"",confirmPassword:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:(0,c.object)({password:(0,c.string)().min(p.fX.MIN_PASSWORD_LENGTH,t("minimumCharacters")).trim(),confirmPassword:(0,c.string)().oneOf([(0,c.ref)("password"),null],t("passwordMatch"))}),onSubmit:function(e){var t={newPassword:e.password,confirmPassword:e.confirmPassword,token:m,passwordResetUserId:b};r(t)},children:function(e){var r=e.values,s=e.handleChange,c=e.handleBlur,l=e.handleSubmit,h=e.errors,b=e.touched;return(0,n.jsx)(n.Fragment,{children:!!m&&(0,n.jsx)(u.l0,{onSubmit:l,noValidate:!0,children:(0,n.jsxs)(o.kC,{flexDirection:"column",children:[d.Gj.SCHOOL_LOGO?(0,n.jsx)(o.kC,{maxWidth:20,height:[12],alignSelf:"center",children:(0,n.jsx)(i.Ee,{alt:"logo",src:d.Gj.SCHOOL_LOGO,objectFit:"contain"})}):(0,n.jsx)(o.kC,{alignItems:"center",children:(0,n.jsx)(i.X6,{variant:"h1",color:"onPrimary.main",children:d.Gj.NAME})}),(0,n.jsxs)(o.kC,{width:[18,19,19],flexDirection:"column",mb:[12],children:[(0,n.jsx)(o.xu,{mt:[12],children:(0,n.jsx)(i.X6,{textAlign:"center",variant:"h1",children:t("enterNewPassword")})}),(0,n.jsx)(o.xu,{mt:[2],children:(0,n.jsx)(i.xv,{textAlign:"center",variant:"subtitle1",children:t("newPasswordMessage")})}),(0,n.jsx)(o.xu,{mt:[8],children:(0,n.jsx)(i.nv,{autoFocus:!0,label:t("newPassword"),name:"password",type:"password",required:!0,placeholder:t("enterNewPassword"),onChange:s,value:r.password,onBlur:c,error:h.password,touched:b.password})}),(0,n.jsx)(o.xu,{mt:[6],children:(0,n.jsx)(i.nv,{label:t("confirmPassword"),name:"confirmPassword",type:"password",required:!0,placeholder:t("enterNewPassword"),onChange:s,value:r.confirmPassword,onBlur:c,error:h.confirmPassword,touched:b.confirmPassword})}),!!a&&v===p.mP.FAILED&&(0,n.jsx)(o.xu,{my:2,children:(0,n.jsx)(i.xv,{color:"error",variant:"body2",children:a})}),(0,n.jsx)(o.xu,{mt:[8],height:[6],children:(0,n.jsx)(i.zx,{text:t("submit"),buttonType:"solid",colorVariant:r.confirmPassword?"primary":"disabled",type:"submit",buttonSizeVariant:"large",width:"100%",height:"100%"})}),(0,n.jsx)(o.xu,{mt:[2],children:(0,n.jsx)(i.zx,{text:t("cancel"),buttonType:"text",colorVariant:"secondary",buttonSizeVariant:"large",width:"100%",onClick:function(){P(),w.default.replace(f.y4.signin,f.XC.signin(),{shallow:!0})}})})]})]})})})}})},v=r(38906);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(e,t){return!t||"object"!==j(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}var j=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var s=y(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return g(this,r)}}var O=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,t);var r,s,o,i=x(a);function a(){return m(this,a),i.apply(this,arguments)}return r=a,s=[{key:"render",value:function(){return(0,n.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){b(e,t,r[t])}))}return e}({},this.props))}}],s&&P(r.prototype,s),o&&P(r,o),a}(s.Component);return(0,v.$)("selectAuthApiStatus","selectAuthState","selectAuthErrorMessage","selectPasswordResetToken","selectPasswordResetUserId","doResetPassword","doSignoutUser",t)}((function(e){var t=(0,l.$)("account").t,r=e.doResetPassword,u=e.authErrorMessage,c=e.authState,d=e.authApiStatus,f=e.passwordResetToken,w=e.doSignoutUser,v=e.passwordResetUserId;return(0,s.useEffect)((function(){c===p.fD.RESETTING_PASSWORD&&d===p.mP.SUCCESS&&(0,i.FN)({message:t("passwordModifySuccess")})}),[c,d]),(0,n.jsx)(i.Mp,{children:(0,n.jsx)(a.or,{children:(0,n.jsx)(o.kC,{minHeight:"100vh",backgroundColor:"surface",justifyContent:"center",alignItems:"center",my:[2],children:(0,n.jsx)(h,{authApiStatus:d,authState:c,authErrorMessage:u,doResetPassword:r,passwordResetToken:f,doSignoutUser:w,passwordResetUserId:v})})})})})),R=r(29418),E=r(1294),C=r(35230),k=r.n(C),V=r(77505),_=r(12073);function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t,r,n,s,o,i){try{var a=e[o](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,s)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function i(e){M(o,n,s,i,a,"next",e)}function a(e){M(o,n,s,i,a,"throw",e)}i(void 0)}))}}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function T(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?A(e):t}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}var L=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var s=U(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return T(this,r)}}var G=r(66441),F=r(70282);function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=(0,R.Z)((function(e){var t=e.isServer;return(0,n.jsx)(O,{isServer:t})})),q=(0,R.Z)(function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(a,t);var r,s,o,i=B(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=A(t=i.call(this,e));t.onSubmitClicked=function(){var e=I(k().mark((function e(t,n,s,o){var i,a,u,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.confirmPassword,a=n.newPassword,u=n.t,c=r.emailAuth.isPasswordValid(a,"",u),!t){e.next=5;break}return c.isValid||r.setState({isNewPasswordValid:c.isValid,newPasswordErrorMsg:c.errMsg}),e.abrupt("return");case 5:l=r.emailAuth.isPasswordValid(i,"",u),c.isValid&&l.isValid&&a===i&&(r.resolvePasswordReset=s,r.rejectPasswordReset=o,r.props.doResetPassword({passwordResetUserId:r.props.passwordResetUserId,token:r.props.passwordResetToken,newPassword:a,confirmPassword:i})),r.setState({isNewPasswordValid:c.isValid,isConfirmPasswordValid:l.isValid,newPasswordErrorMsg:c.errMsg,confirmPasswordErrorMsg:l.errMsg}),a!==i&&(r.setState({isConfirmPasswordValid:!1,confirmPasswordErrorMsg:u("errorPasswordNotIdentical")||""}),o());case 9:case"end":return e.stop()}}),e)})));return function(r,n,s,o){return e.apply(A(t),arguments)}}(),t.validatePassword=function(e,r,n,s,o){var i=r.confirmPassword,a=r.newPassword,u=r.t;if(e){n();var c=t.emailAuth.isPasswordValid(a,"",u);c.isValid&&(null===o||void 0===o||o()),t.setState({isNewPasswordValid:c.isValid,newPasswordErrorMsg:c.errMsg})}else{var l=t.emailAuth.isPasswordValid(i,"",u);t.setState({isConfirmPasswordValid:l.isValid,confirmPasswordErrorMsg:l.errMsg})}};var n=A(t);return t.onSubmitPassword=function(){var e=I(k().mark((function e(t,r,s){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,o){n.validatePassword(t,r,e,o,s),n.onSubmitClicked(t,r,e,o)}));case 2:case"end":return e.stop()}}),e)})));return function(r,n,s){return e.apply(A(t),arguments)}}(),t.togglePasswordVisibility=function(e){e?t.state.isNewPasswordVisible?t.setState({isNewPasswordVisible:!1}):t.setState({isNewPasswordVisible:!0}):t.state.isConfirmPasswordVisible?t.setState({isConfirmPasswordVisible:!1}):t.setState({isConfirmPasswordVisible:!0})},t.onNavigateBack=function(){(0,_.n)(t.props.sharedIsUserLoggedIn)},t.state={isNewPasswordVisible:!1,isConfirmPasswordVisible:!1,isNewPasswordValid:!0,isConfirmPasswordValid:!0,newPasswordErrorMsg:null,confirmPasswordErrorMsg:null},t.emailAuth=new V.pU,t.resetPassword=new V.KM,t.resolvePasswordReset=null,t.rejectPasswordReset=null,t}return r=a,(s=[{key:"shouldComponentUpdate",value:function(){var e,t;return null===(t=null===(e=this.props)||void 0===e?void 0:e.isScreenFocused)||void 0===t||t}},{key:"componentDidUpdate",value:function(e){e.authState===this.props.authState&&e.authApiStatus===this.props.authApiStatus||(this.props.authState===p.fD.RESETTING_PASSWORD&&this.props.authApiStatus===p.mP.SUCCESS&&(this.resolvePasswordReset&&(this.resolvePasswordReset(),this.resolvePasswordReset=null),this.props.sharedIsUserLoggedIn?(0,_.n)(this.props.sharedIsUserLoggedIn):(0,_.Z6)()),this.props.authState===p.fD.RESETTING_PASSWORD&&this.props.authApiStatus===p.mP.FAILED&&this.rejectPasswordReset&&(this.rejectPasswordReset({message:this.props.authErrorMessage||""}),this.rejectPasswordReset=null))}},{key:"render",value:function(){var t,r={navigateBack:this.onNavigateBack,onSubmitPassword:this.onSubmitPassword,togglePassword:this.togglePasswordVisibility};return(0,n.jsx)(e,{data:null===(t=this.resetPassword)||void 0===t?void 0:t.constructData(this.state,this.props),callbacks:r})}}])&&N(r.prototype,s),o&&N(r,o),a}(s.Component);return(0,v.$)("selectAuthApiStatus","selectAuthState","selectAuthErrorMessage","doResetPassword","selectPasswordResetToken","selectSharedIsUserLoggedIn","selectPasswordResetUserId",t)}((0,G.Z)((function(e){return(0,n.jsx)(E.tq,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){X(e,t,r[t])}))}return e}({},e))}))));var z=function(){return(0,F.vC)().isAppV4?(0,n.jsx)(q,{}):(0,n.jsx)(W,{})}},96664:function(e,t,r){"use strict";r.d(t,{UK:function(){return d}});var n=r(27378);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?n.useLayoutEffect:n.useEffect,i={status:"not-requested",loading:!1,result:void 0,error:void 0},a={status:"loading",loading:!0,result:void 0,error:void 0},u=function(){},c={initialState:function(e){return e&&e.executeOnMount?a:i},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return a},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:u,onError:u},l=function(e,t,r){!t&&(t=[]);var i=function(e){return s({},c,{},e)}(r),a=(0,n.useState)(null),u=a[0],l=a[1],d=function(e){var t=(0,n.useState)((function(){return e.initialState(e)})),r=t[0],o=t[1],i=(0,n.useCallback)((function(){return o(e.initialState(e))}),[o,e]),a=(0,n.useCallback)((function(){return o(e.setLoading(r))}),[r,o]),u=(0,n.useCallback)((function(t){return o(e.setResult(t,r))}),[r,o]),c=(0,n.useCallback)((function(t){return o(e.setError(t,r))}),[r,o]),l=(0,n.useCallback)((function(e){return o(s({},r,{},e))}),[r,o]);return{value:r,set:o,merge:l,reset:i,setLoading:a,setResult:u,setError:c}}(i),f=function(){var e=(0,n.useRef)(!1);return(0,n.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),function(){return e.current}}(),p=function(){var e=(0,n.useRef)(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),w=function(e){return f()&&p.is(e)},h=function(e){var t=(0,n.useRef)(e);return o((function(){t.current=e})),(0,n.useCallback)((function(){return t.current}),[t])}((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=function(){try{return Promise.resolve(e.apply(void 0,r))}catch(t){return Promise.reject(t)}}();return l(r),p.set(s),d.setLoading(),s.then((function(e){w(s)&&d.setResult(e),i.onSuccess(e,{isCurrent:function(){return p.is(s)}})}),(function(e){w(s)&&d.setError(e),i.onError(e,{isCurrent:function(){return p.is(s)}})})),s})),v=(0,n.useCallback)((function(){return h().apply(void 0,arguments)}),[h]),m=!f();return(0,n.useEffect)((function(){var e=function(){return h().apply(void 0,t)};m&&i.executeOnMount&&e(),!m&&i.executeOnUpdate&&e()}),t),s({},d.value,{set:d.set,merge:d.merge,reset:d.reset,execute:v,currentPromise:p.get(),currentParams:u})};var d=function(e,t){return l(e,[],s({},t,{executeOnMount:!1,executeOnUpdate:!1}))}}},function(e){e.O(0,[5639,1362,1699,9917,4987,2533,9630,5002,6441,1550,8914,7728,5807,4594,9774,2888,179],(function(){return t=53298,e(e.s=t);var t}));var t=e.O();_N_E=t}]);