(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5217],{75771:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn/coursePayment/[courseId]",function(){return r(43844)}])},43844:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ct}});var n=r(24246),o=r(27378),a=r(55480),i=r(2137),s=r(10100),u=r(61320),c=r.n(u),l=r(14916),d=r(49613),p=r(9078),m=r(86677),y=r(267),f=r(40472),h=r(2113),v=function(e){var t,r=e.setModal,i=e.isModalVisible,s=e.applyCouponCode,u=e.courseId,c=e.userId,y=e.couponApplyError,f=e.paymentStatus,v=f.currentPaymentState,b=f.paymentFetchStatus,S=(0,p.$)("payment").t,x=(0,o.useState)(""),g=x[0],C=x[1],P=(0,h.B7)().theme;(0,o.useEffect)((function(){v===d.tm.COUPON_APPLY&&b===d.UK.SUCCESS&&(r(!1),C(""))}));var I=(0,m.useRouter)().query.priceId,j=parseInt(I);return(0,n.jsx)(l.u_,{isOpen:i,overlayStyle:{background:null===(t=P.colors)||void 0===t?void 0:t.modal.popupOverlay,zIndex:999},ariaHideApp:!1,children:(0,n.jsxs)(a.kC,{flexDirection:"column",justifyContent:"space-between",width:["100vw",20,20],height:18,bg:"surface",p:5,sx:{boxShadow:"card.normal"},children:[(0,n.jsx)(a.kC,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:(0,n.jsx)(a.xu,{mb:4,children:(0,n.jsx)(l.X6,{variant:"h2",color:"onSurface.main",children:S("applyCoupon")})})}),(0,n.jsx)(a.xu,{children:(0,n.jsx)(l.nv,{label:S("enterCouponCode"),name:"coupon",type:"text",placeholder:S("couponEg"),onChange:function(e){C(e.target.value)},value:g,required:!0,autoFocus:!0})}),v===d.tm.COUPON_APPLY&&b===d.UK.FAILED?(0,n.jsx)(a.xu,{mt:3,children:(0,n.jsx)(l.xv,{variant:"caption2",color:"error",children:y.errorMessage})}):null,(0,n.jsxs)(a.kC,{width:"100%",height:6,mt:3,flexDirection:"row",justifyContent:"flex-end",children:[(0,n.jsx)(a.xu,{mr:3,children:(0,n.jsx)(l.zx,{colorVariant:"secondary",buttonType:"text",type:"button",text:S("cancel"),width:"100%",height:"100%",onClick:function(){r(!1),C("")}})}),(0,n.jsx)(a.xu,{minWidth:10,children:(0,n.jsx)(l.zx,{colorVariant:"primary",type:"submit",text:v===d.tm.COUPON_APPLY&&b===d.UK.IN_PROGRESS?S("...."):S("applyCoupon"),width:"100%",height:"100%",onClick:function(){s({couponCode:g,courseId:u,userId:c,currentPriceId:j})}})})]})]})})},b=r(64137),S=r(95045);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=function(e){var t=e.isCreditModalOpen,r=e.onClose,i=e.doUpdateOrderSummary,s=e.orderSummaryData,u=e.courseId,c=e.priceId,d=e.walletDataSummary,m=e.couponData,y=(0,p.$)("payment").t,f=g(o.useState(),2),h=f[0],v=f[1];return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.u_,{isOpen:t,onRequestClose:function(){return r()},children:(0,n.jsxs)(a.xu,{width:["100vw","70vw","40vw"],bg:"surface",px:6,py:8,sx:{boxShadow:"default"},children:[(0,n.jsx)(l.X6,{variant:"h2",children:y("creditModalHeading")}),(0,n.jsx)(a.xu,{my:6,children:(0,n.jsx)(l.nv,{label:y("creditModalLabel"),name:"coupon",type:"number",placeholder:y("creditPlaceholder"),onChange:function(e){return v(e.target.value)},value:h,required:!0,autoFocus:!0})}),d&&d.creditsAvailable?(0,n.jsx)(a.xu,{children:(0,n.jsx)(l.xv,{variant:"caption2",color:"primary.main",children:"".concat(y("available")," - ").concat(d.creditsAvailable)})}):null,(0,n.jsxs)(a.kC,{mt:4,justifyContent:"flex-end",children:[(0,n.jsx)(l.zx,{text:y("cancel"),colorVariant:"secondary",buttonType:"text",onClick:r}),(0,n.jsx)(a.xu,{ml:2}),(0,n.jsx)(l.zx,{text:y("applyCredits"),colorVariant:"primary",onClick:function(){return h?(i(s,u,null===m||void 0===m?void 0:m.couponCode,c,h),void r()):null}})]})]})})})},P=function(e){e.handlePaymentClick;var t=e.paymentStatus,r=e.orderSummaryData,i=e.addressConfig,s=e.address,u=e.applyCoupon,c=e.userId,m=e.couponData,h=e.couponApplyError,x=(e.doRemoveCoupon,e.currentCoursePricing),g=e.addressesBundle,P=e.currencyCode,I=e.doUpdateOrderSummary,j=e.orderSummaryError,w=e.walletDataSummary,E=(0,o.useState)(!1),_=E[0],D=E[1],A=(0,o.useState)(!1),O=A[0],N=A[1],T=(0,p.$)("payment").t,U=r.courseData.courseId,k=r.checkoutPriceDetails,R=k.originalPrice,G=k.discountedPrice,L=k.amountPayable,B=k.taxAmount,M=(r.gatewayCredentials.gatewayId,r.isCouponEnabled),W=t.currentPaymentState,F=t.paymentFetchStatus;(W===d.tm.PAYMENT_INITIATED||W===d.tm.PAYMENT_VERIFY)&&F===d.UK.SUCCESS||d.UK.IN_PROGRESS,(i===d.C.FULL||i===d.C.GST&&P===S.$c.CURRENCY_INR)&&!s.billing&&!s.shipping||(g.fetchStatus,d.UK.IN_PROGRESS);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.kC,{mx:[3,4,6],py:4,height:"100%",sx:{flexDirection:"column",justifyContent:"space-between"},children:[M?(0,n.jsx)(v,{userId:c,courseId:U,applyCouponCode:u,setModal:D,isModalVisible:_,couponData:m,couponApplyError:h,paymentStatus:t,currentCoursePricing:x}):null,(0,n.jsx)(l.X6,{color:"onSurface.main",textTransform:"capitalize",variant:"h4",sx:{flexDirection:"row",justifyContent:"center"},children:T("orderDetails")}),(0,n.jsxs)(a.kC,{my:6,flexDirection:"column",justifyContent:"space-between",children:[(0,n.jsxs)(a.kC,{justifyContent:"space-between",pt:3,children:[(0,n.jsx)(l.xv,{variant:"body1",color:"onSurface.main",children:T("itemTotal")}),(0,n.jsx)(l.xv,{variant:"body1",color:"onSurface.main",children:(0,b.Z)(R)})]}),G?(0,n.jsxs)(a.kC,{pt:3,justifyContent:"space-between",children:[(0,n.jsx)(l.xv,{variant:"body1",color:"onSurface.light",children:T("discount")}),(0,n.jsxs)(l.xv,{variant:"body1",color:"primary.main",children:["- ",(0,b.Z)(R-G)]})]}):null,M?(0,n.jsxs)(a.kC,{pt:3,justifyContent:"space-between",children:[(0,n.jsx)(l.xv,{variant:"body1",color:"onSurface.light",children:m&&m.message?T("couponApplied"):T("couponDiscount")}),(0,n.jsx)(a.xu,{sx:{cursor:"pointer"},onClick:function(){m&&m.message&&!r.checkoutPriceDetails.walletAmount||D(!0)},children:(0,n.jsx)(a.xu,{children:m&&m.message?(0,n.jsxs)(l.xv,{variant:"body1",color:"primary.main",children:["- ",(0,b.Z)(m.couponPrice)]}):(0,n.jsx)(l.xv,{textDecorationLine:"underline",variant:"body1",color:"onSurface.light",children:T("applyCoupon")})})})]}):null,y.Gj.is_wallet_enabled?(0,n.jsxs)(a.xu,{children:[(0,n.jsxs)(a.kC,{pt:3,justifyContent:"space-between",children:[(0,n.jsx)(l.xv,{variant:"body1",color:"onSurface.light",children:T("walletCredits")}),r.checkoutPriceDetails.walletAmount?(0,n.jsx)(a.xu,{children:(0,n.jsxs)(l.xv,{variant:"body1",color:"primary.main",children:["- ",(0,b.Z)(r.checkoutPriceDetails.walletAmount)]})}):(0,n.jsx)(a.xu,{onClick:function(){return N(!0)},sx:{"&:hover":{cursor:"pointer"}},children:(0,n.jsx)(l.xv,{textDecorationLine:"underline",variant:"body1",color:"onSurface.light",children:T("applyCredits")})})]}),j&&j.errorMessage?(0,n.jsx)(a.xu,{mt:2,children:(0,n.jsx)(l.xv,{variant:"caption2",color:"error",children:j.errorMessage})}):null]}):null,(0,n.jsxs)(a.kC,{justifyContent:"space-between",pt:3,children:[(0,n.jsx)(l.xv,{variant:"body1",color:"onSurface.main",children:T("total")}),(0,n.jsx)(l.xv,{variant:"body1",color:"onSurface.main",children:(0,b.Z)(L-B)})]}),i!==d.C.GST&&i!==d.C.FULL||!B?null:(0,n.jsxs)(a.kC,{pt:4,pb:4,justifyContent:"space-between",children:[(0,n.jsx)(l.xv,{variant:"body2",color:"onSurface.light",textTransform:"capitalize",children:T("taxes")}),(0,n.jsx)(l.xv,{variant:"body2",color:"onSurface.light",children:(0,b.Z)(B)})]}),(0,n.jsx)(a.xu,{my:3,children:(0,n.jsx)(l.iz,{color:"disabled"})}),(0,n.jsxs)(a.kC,{justifyContent:"space-between",pt:3,children:[(0,n.jsxs)(l.X6,{variant:"h5",color:"onSurface.main",children:[T("total"),"(",r.currency,")"]}),(0,n.jsx)(l.X6,{variant:"h5",color:"onSurface.main",children:(0,b.Z)(L)})]})]}),y.Gj.SUPPORT_MOBILE||y.Gj.SUPPORT_EMAIL||y.Gj.PRIVACY_POLICY?(0,n.jsx)(a.xu,{children:(0,n.jsx)(f.Z,{})}):null]}),(0,n.jsx)(C,{priceId:x?x.selctedVariablePrice.priceId:0,courseId:U,orderSummaryData:r,doUpdateOrderSummary:I,isCreditModalOpen:O,onClose:function(){return N(!1)},walletDataSummary:w,couponData:m})]})},I=r(38212),j=r(74566),w=function(e){var t,r=e.showStripe,o=e.setStripUi,i=(0,h.B7)().theme;return(0,n.jsx)(l.u_,{isOpen:!0,overlayStyle:{zIndex:r?999:-1,backgroundColor:null===(t=i.colors)||void 0===t?void 0:t.background},children:(0,n.jsxs)(a.xu,{py:5,px:5,bg:"surface",width:"100vw",maxWidth:["100%",20,20],minHeight:19,sx:{borderWidth:1,borderStyle:"solid",borderColor:"disabled"},children:[(0,n.jsxs)(a.kC,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(a.xu,{height:1,width:1,display:"hidden"}),(0,n.jsx)(a.xu,{ml:5,children:(0,n.jsx)(l.X6,{textAlign:"center",variant:"h6",color:"onSurface.main",textTransform:"uppercase",children:" pay with "})}),(0,n.jsx)(l.Bz,{onClick:function(){return o(!1)},children:(0,n.jsx)(j.FU5,{})})]}),(0,n.jsxs)("form",{action:"/charge",method:"post",id:"payment-form",children:[(0,n.jsxs)(a.xu,{pb:3,className:"form-row",children:[(0,n.jsxs)(a.xu,{children:[(0,n.jsx)(a.kC,{pb:9,mt:3,alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:(0,n.jsx)("span",{style:{width:"100%",fontFamily:"Helvetica Neue",color:"#666EE8",fontSize:34,textAlign:"center",display:"block",marginBottom:16},children:"Stripe"})}),(0,n.jsx)(a.xu,{mb:4,children:(0,n.jsx)("span",{style:{fontFamily:"Helvetica Neue"},children:"Credit / Debit card"})})]}),(0,n.jsx)(a.xu,{id:"card-element"}),(0,n.jsx)(a.xu,{pt:3,id:"card-errors"})]}),(0,n.jsxs)(a.kC,{flexDirection:"column",children:[(0,n.jsx)("div",{className:"stripe-btn",style:{marginBottom:12},children:(0,n.jsx)("button",{children:" Pay securely"})}),(0,n.jsx)(l.zx,{onClick:function(){return o(!1)},type:"button",buttonType:"text",colorVariant:"secondary",text:"cancel"})]})]})]})})},E=r(71117),_=[{value:"IN-AP",label:"Andhra Pradesh"},{value:"IN-AR",label:"Arunachal Pradesh"},{value:"IN-AS",label:"Assam"},{value:"IN-BR",label:"Bihar"},{value:"IN-CG",label:"Chhattisgarh"},{value:"IN-GA",label:"Goa"},{value:"IN-GJ",label:"Gujarat"},{value:"IN-HR",label:"Haryana"},{value:"IN-HP",label:"Himachal Pradesh"},{value:"IN-JK",label:"Jammu and Kashmir"},{value:"IN-JH",label:"Jharkhand"},{value:"IN-KA",label:"Karnataka"},{value:"IN-KL",label:"Kerala"},{value:"IN-MP",label:"Madhya Pradesh"},{value:"IN-MH",label:"Maharashtra"},{value:"IN-MN",label:"Manipur"},{value:"IN-ML",label:"Meghalaya"},{value:"IN-MZ",label:"Mizoram"},{value:"IN-NL",label:"Nagaland"},{value:"IN-OR",label:"Orissa"},{value:"IN-PB",label:"Punjab"},{value:"IN-RJ",label:"Rajasthan"},{value:"IN-SK",label:"Sikkim"},{value:"IN-TN",label:"Tamil Nadu"},{value:"IN-TS",label:"Telangana"},{value:"IN-TR",label:"Tripura"},{value:"IN-UK",label:"Uttarakhand"},{value:"IN-UP",label:"Uttar Pradesh"},{value:"IN-WB",label:"West Bengal"},{value:"IN-AN",label:"Andaman and Nicobar Islands"},{value:"IN-CH",label:"Chandigarh"},{value:"IN-DN",label:"Dadra and Nagar Haveli"},{value:"IN-DD",label:"Daman and Diu"},{value:"IN-DL",label:"Delhi"},{value:"IN-LD",label:"Lakshadweep"},{value:"IN-PY",label:"Pondicherry"}],D=function(e){var t=e.updateGstState,r=e.addressType,i=e.userName,s=e.userPhone,u=e.userId,c=e.address,m=e.addressesBundle,f=m.IsUpdating,v=m.fetchStatus,b=(0,o.useState)(""),S=b[0],x=b[1],g=function(e){if(e){x(e);var n=(a=e,{address:{address_type:r,city:"",country:'{"key": "IN","value": "India"}',mobile:s,name:i,pincode:"",school_id:y.Gj.SCHOOL_ID,state:JSON.stringify({key:a.value,value:a.label}),street_address1:"",street_address2:"",user_id:u},address_type:r,mobile:s,name:i}),o=c?c.id:null;t(o,n)}var a},C=c&&c.state?function(e){try{return JSON.parse(e).value}catch(t){return e}}(c.state):"",P=c?_.filter((function(e){return e.label===C})):"",I=(0,p.$)("payment").t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.xu,{my:5,children:(0,n.jsx)(l.iz,{color:"disabled"})}),(0,n.jsxs)(h.kC,{sx:{flexDirection:"row"},children:[(0,n.jsx)(h.kC,{sx:{flexDirection:"column",width:6},children:P?(0,n.jsx)(a.xu,{sx:{fontSize:"iconDefault"},color:"primary.main",mr:2,children:(0,n.jsx)(j.ZSR,{})}):(0,n.jsx)(a.xu,{sx:{width:4,borderWidth:[1],borderRadius:20,borderStyle:"solid",height:4,display:"flex",alignItems:"center",justifyContent:"center",borderColor:"onSurface.main"},children:(0,n.jsx)(l.X6,{variant:"h4",color:"onSurface.main",children:I("paymentStepOne")})})}),(0,n.jsxs)(a.xu,{sx:{width:"100%"},children:[(0,n.jsxs)(a.xu,{mb:2,children:[(0,n.jsx)(l.X6,{variant:"h3",color:"onSurface.main",children:I("stateGst")}),(0,n.jsx)(l.xv,{variant:"body2",color:"onSurface.light",children:I("selectGstState")})]}),(0,n.jsx)(a.xu,{width:["100%",17,18],children:(0,n.jsx)(E.q3,{options:_,onSelection:function(e){return g(e)},selectedOption:S||P,isLoading:v===d.UK.IN_PROGRESS||f,warning:!P&&!S,isClearable:!1})})]})]})]})},A=r(53850);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(e){var t=e.address,r=e.currentPriceId,i=e.courseId,s=e.userName,u=e.stepNumber,c=e.addressType,y=(0,p.$)("payment").t,f=m.default.query.returnToPost&&m.default.query.returnToPost.toString()||"",h=N(o.useState(!1),2),v=h[0],b=h[1],S=function(){m.default.push({pathname:A.y4.myAddress,query:{priceId:r,courseId:i,returnToPost:f,addressType:c}},A.XC.myAddress({priceId:r,courseId:i,returnToPost:f,addressType:c}))},x=t&&t.state?function(e){try{return JSON.parse(e).value}catch(t){return e}}(t.state):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.xu,{my:5,children:(0,n.jsx)(l.iz,{color:"disabled"})}),(0,n.jsxs)(a.kC,{sx:{flexDirection:"row"},children:[(0,n.jsx)(a.kC,{sx:{flexDirection:"column",width:6},children:t?(0,n.jsx)(a.xu,{sx:{fontSize:"iconDefault"},color:"primary.main",mr:2,children:(0,n.jsx)(j.ZSR,{})}):(0,n.jsx)(a.xu,{sx:{width:4,borderWidth:[1],borderRadius:20,borderStyle:"solid",height:4,display:"flex",alignItems:"center",justifyContent:"center",borderColor:"onSurface.main"},children:(0,n.jsx)(l.X6,{variant:"h4",color:"onSurface.main",children:u})})}),(0,n.jsxs)(a.xu,{sx:{width:"100%"},children:[(0,n.jsxs)(a.kC,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",children:[(0,n.jsx)(a.xu,{minWidth:17,children:(0,n.jsx)(l.X6,{variant:"h3",children:c===d.Vo.SERVER_BILLING?y("account:billingAddress"):y("account:shippingAddress")})}),t?(0,n.jsx)(a.kC,{flexDirection:"row",alignItems:"center",onClick:function(){return S()},color:"primary.main",children:(0,n.jsx)(l.zx,{type:"button",buttonType:"text",text:y("change"),colorVariant:"secondary"})}):null]}),(0,n.jsx)(a.xu,{maxWidth:t?"100%":"auto",py:t?0:3,mt:4,children:t?(0,n.jsxs)(a.xu,{children:[(0,n.jsx)(l.X6,{variant:"h6",color:"onSurface.main",textTransform:"capitalize",children:s}),(0,n.jsx)(l.xv,{variant:"body2",color:"onBackground.main",children:t.street_address1}),!v&&(0,n.jsx)(a.xu,{onClick:function(){return b(!v)},sx:{cursor:"pointer"},children:(0,n.jsx)(l.xv,{variant:"body2",color:"primary.main",children:y("viewMore")})}),v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.xv,{variant:"body2",color:"onBackground.main",children:[t.street_address2," ",t.city]}),(0,n.jsxs)(l.xv,{variant:"body2",color:"onBackground.main",children:[x," ",t.pincode?"- ".concat(t.pincode):""]}),(0,n.jsx)(l.xv,{variant:"body2",color:"onBackground.main",children:t.mobile?"".concat(y("PhoneInitial")," ").concat(t.mobile):""}),(0,n.jsx)(l.xv,{variant:"body2",color:"onBackground.main",children:t.landmark?"".concat(y("landMarkProp")," - ").concat(t.landmark):""}),(0,n.jsx)(a.xu,{my:1}),(0,n.jsx)(a.xu,{onClick:function(){return b(!v)},sx:{cursor:"pointer"},children:(0,n.jsx)(l.xv,{variant:"body2",color:"primary.main",children:y("viewLess")})})]})]}):(0,n.jsx)(a.xu,{sx:{width:"50%"},children:(0,n.jsx)(l.zx,{onClick:function(){return S()},IconComponent:j.x06,type:"button",buttonType:"solid",width:"100%",text:y("addShippingAdrs"),colorVariant:"primary"})})})]})]})]})},U=r(33218);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(e){var t,r=e.checkoutDetails,i=(0,p.$)("payment").t,s=r.orderSummaryData,u=r.paymentStatus,c=r.doUpdateAddress,y=r.sharedUserName,f=r.sharedUserId,h=r.sharedUserMobileNum,v=r.addressesBundle,b=(r.doUpdateOrderSummary,r.address),x=r.handlePaymentClick,g=s.courseData.courseId,C=(s.checkoutPriceDetails.amountPayable,s.addressConfig),P=(s.gatewayCredentials.gatewayId,u.paymentFetchStatus),I=u.currentPaymentState,j=(0,o.useState)(!1),w=j[0],E=j[1],_=(0,o.useState)(!1),A=(_[0],_[1],(0,m.useRouter)().query.priceId),O=parseInt(A),N=R(o.useState(!1),2),k=N[0],G=N[1],L=d.Gj.CURRENCY,B=C===d.C.BOTH||C===d.C.FULL,M=C===d.C.BOTH||C===d.C.ONLY_SHIPPING,W=C===d.C.GST&&L===S.$c.CURRENCY_INR,F=(I===d.tm.PAYMENT_INITIATED||I===d.tm.PAYMENT_VERIFY)&&P===d.UK.SUCCESS||P===d.UK.IN_PROGRESS,V=B&&!b.billing||M&&!b.shipping||W&&!(b.billing||b.shipping)||v.fetchStatus===d.UK.IN_PROGRESS;return(0,n.jsx)(l.W2,{children:(0,n.jsxs)(a.xu,{width:"100%",children:[(0,n.jsx)(a.xu,{mr:2,pb:4,children:(0,n.jsxs)(a.xu,{width:"100%",children:[W&&(0,n.jsx)(D,{updateGstState:c,addressType:d.Vo.SERVER_BILLING,userName:y,userId:f,userPhone:h,address:null!==(t=b.billing)&&void 0!==t?t:b.shipping,addressesBundle:v}),B&&(0,n.jsx)(T,{addressType:d.Vo.SERVER_BILLING,address:b.billing,userName:y,userId:f,userPhone:h,showModal:w,setModal:E,currentPriceId:O,courseId:g,stepNumber:i("paymentStepOne")}),M&&(0,n.jsx)(T,{addressType:d.Vo.SERVER_SHIPPING,address:b.shipping,userName:y,userId:f,userPhone:h,showModal:w,setModal:E,currentPriceId:O,courseId:g,stepNumber:i(B?"paymentStepTwo":"paymentStepOne")})]})}),(0,n.jsx)(a.xu,{my:3,children:(0,n.jsx)(l.iz,{color:"disabled"})}),(0,n.jsxs)(a.kC,{sx:{flexDirection:"row"},pt:4,children:[(0,n.jsx)(a.kC,{sx:{flexDirection:"column",width:6},children:(0,n.jsx)(a.xu,{sx:{width:4,borderWidth:[1],borderRadius:20,borderStyle:"solid",height:4,display:"flex",alignItems:"center",justifyContent:"center",borderColor:F||V?"onSurface.light":"onSurface.main"},children:(0,n.jsx)(l.X6,{variant:"h4",color:F||V?"onSurface.light":"onSurface.main",children:C===d.C.GST&&L===S.$c.CURRENCY_INR||C!==d.C.NONE?i(B||M||W?B&&M?"paymentStepThree":"paymentStepTwo":"paymentStepOne"):(0,n.jsx)(U.j$X,{})})})}),(0,n.jsxs)(a.xu,{sx:{width:"100%"},children:[(0,n.jsx)(l.X6,{variant:"h3",textTransform:"capitalize",color:F||V?"onSurface.light":"onSurface.main",children:i("payment")}),(0,n.jsx)(a.xu,{mb:1}),(0,n.jsx)(l.xv,{variant:"body2",color:"onSurface.light",children:i("paymentIntro")}),(0,n.jsx)(a.xu,{mt:2}),(0,n.jsx)(a.xu,{sx:{width:"50%"},children:(0,n.jsxs)(a.xu,{pb:4,sx:{borderWidth:[1],borderColor:"primary.main"},children:[(0,n.jsx)(a.xu,{onMouseOver:function(){return G(!0)},onMouseLeave:function(){return G(!1)},children:(0,n.jsx)(l.zx,{onClick:function(){!F&&!V&&x()},width:"100%",colorVariant:F||V?"disabled":"primary",text:i(k&&(F||V)?"paymentCheck":"paySecurely")})}),(0,n.jsx)(a.xu,{pt:2,children:(0,n.jsx)(l.xv,{variant:"body2",textAlign:"center",color:"disabledText",children:i("securedConnection")})})]})})]})]})]})})},L=function(e){var t=e.orderSummaryData,r=e.currentPaymentState,i=e.currentCoursePricing,s=e.paymentFetchStatus,u=e.initiatePayment,y=e.doUpdateAddress,f=e.sharedUserName,h=e.sharedUserId,v=(e.sharedUserMobileNum,e.addresses),b=e.doApplyCoupon,S=e.doRemoveCoupon,x=e.couponData,g=e.couponApplyError,C=e.addressesBundle,j=(e.doSetVariablePrice,e.isCurrentProductFromBundlde,e.currentBundleId,e.doUpdateOrderSummary),E=e.orderSummaryError,_=e.walletDataSummary,D=(0,p.$)("payment").t,A=t.courseData,O=A.courseImage,N=A.courseTitle,T=A.courseId,U=A.courseType,k=A.validity,R=t.addressConfig,L=t.gatewayCredentials.gatewayId,B=(0,o.useState)(!1),M=(B[0],B[1],(0,o.useState)(!1)),W=M[0],F=M[1],V=(0,m.useRouter)().query.priceId,Y=(parseInt(V),(0,o.useState)(!1));Y[0],Y[1];o.useEffect((function(){C.IsUpdating||j(t,T,null,V,null)}),[v.shipping]);var z=function(){u(F)},H=d.Gj.CURRENCY;return(0,n.jsx)(l.W2,{children:(0,n.jsx)(a.xu,{width:"100%",children:(0,n.jsxs)(a.kC,{flexDirection:["column","row","row"],justifyContent:["space-between","space-around","space-around"],alignItems:"flex-start",children:[(0,n.jsxs)(a.xu,{width:["100%","50%","55%"],mr:2,pb:8,children:[(0,n.jsxs)(a.xu,{width:"100%",children:[(0,n.jsx)(a.xu,{mb:7,children:(0,n.jsx)(a.xu,{children:(0,n.jsx)(l.X6,{color:"onBackground.main",textTransform:"capitalize",variant:"h1",children:D("orderSummary")})})}),(0,n.jsxs)(a.kC,{flexDirection:"row",justifyContent:"flex-start",flexWrap:"wrap",overflow:"hidden",children:[(0,n.jsx)(a.xu,{mr:3,mb:5,minWidth:[16,"checkoutImgWidth","checkoutImgWidth"],maxWidth:[16,"checkoutImgWidth","checkoutImgWidth"],sx:{borderWidth:1,borderStyle:"solid",borderColor:"disabled"},children:O?(0,n.jsx)(l.oM,{ratio:16/9,children:(0,n.jsx)(l.Ee,{alt:D("courseImage"),src:O})}):(0,n.jsx)(I.Yb,{title:N,productType:U})}),(0,n.jsxs)(a.kC,{flexDirection:"column",flexWrap:"wrap",width:[18,19,19],children:[(0,n.jsx)(l.X6,{lineClamp:2,color:"onBackground.main",textTransform:"capitalize",variant:"h4",children:N}),(0,n.jsxs)(a.kC,{pt:2,alignItems:"baseline",children:[(0,n.jsx)(l.xv,{variant:"overline",sx:{textTransform:"capitalize"},children:D("expiresOn")}),(0,n.jsx)(a.xu,{mx:1}),(0,n.jsx)(l.xv,{variant:"body2",sx:{textTransform:"capitalize"},children:c()((new Date).getTime()).add(k,"days").format("ll")})]})]})]}),(0,n.jsx)(G,{checkoutDetails:{orderSummaryData:t,handlePaymentClick:z,addressConfig:R,sharedUserId:h,sharedUserName:f,address:v,currentCoursePricing:i,addressesBundle:C,currencyCode:H,doUpdateOrderSummary:j,doUpdateAddress:y,paymentStatus:{paymentFetchStatus:s,currentPaymentState:r}}})]}),L===d.UW.STRIPE_PAYMENT_GATEWAY&&W?(0,n.jsx)(w,{showStripe:W,setStripUi:F}):null]}),(0,n.jsx)(a.xu,{width:["100%","50%","40%"],sx:{borderWidth:1,borderStyle:"solid",borderColor:"disabled"},mb:3,mt:[8,8,10],children:(0,n.jsx)(P,{orderSummaryData:t,paymentStatus:{paymentFetchStatus:s,currentPaymentState:r},handlePaymentClick:z,addressConfig:R,applyCoupon:b,userId:h,couponData:x,couponApplyError:g,doRemoveCoupon:S,address:v,currentCoursePricing:i,addressesBundle:C,currencyCode:H,doUpdateOrderSummary:j,orderSummaryError:E,walletDataSummary:_})})]})})})},B=r(38906);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(e,t){var r=e.orderSummaryData,n=e.sharedUserId,o=e.sharedUserName,a=e.sharedUserMobileNum,i=e.sharedUserEmail,s=r.gatewayCredentials,u=r.checkoutPriceDetails,c=r.transactionId,l=r.courseData,d=r.redirectionData.callbackUrl;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){M(e,t,r[t])}))}return e}({},{key_id:s.merchantKey,amount:100*u.amountPayable,name:t,description:l.courseTitle,order_id:r.razorPayAndHdfcOrderId,callback_url:d,prefill:{name:o,email:i,contact:a},notes:{user_id:n,course_id:r.courseData.courseId,transaction_id:c}})},F=function(e,t){var r=W(e,t),n=document.createElement("form");for(var o in document.body.appendChild(n),n.method="post",n.action="https://api.razorpay.com/v1/checkout/embedded",r)if("string"===typeof r[o]||"number"===typeof r[o]||"object"===typeof r[o])if("object"===typeof r[o])for(var a in r[o]){var i=document.createElement("input");i.type="hidden",i.name="".concat(o,"[").concat(a,"]"),i.value=r[o][a],n.appendChild(i)}else{var s=document.createElement("input");s.type="hidden",s.name=o,s.value=r[o],n.appendChild(s)}n.submit()},V=function(e,t){var r=document.createElement("form");document.body.appendChild(r),r.method="post",r.action=e;var n=!0,o=!1,a=void 0;try{for(var i,s=["encRequest","access_code"][Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,c=document.createElement("input");c.type="hidden",c.name=u,c.value=t[u],r.appendChild(c)}}catch(l){o=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}r.submit()},Y=function(e,t,r){var n=e.orderSummaryData,o=n.gatewayCredentials,a=n.checkoutPriceDetails,i=(n.transactionId,n.courseData),s=n.razorPayAndHdfcOrderId,u=e.sharedUserName,c=e.sharedUserMobileNum,l=e.sharedUserEmail,d={key:o.merchantKey,order_id:s,amount:100*a.amountPayable,name:t,description:i.courseTitle,image:{uri:"logo"},handler:function(e){r(e)},prefill:{name:u,email:l,contact:c},theme:{color:"#344ffc"}};new window.Razorpay(d).open()},z=function(e,t){var r=e.orderSummaryData,n=(e.sharedUserId,e.sharedUserName),o=e.sharedUserMobileNum,a=e.sharedUserEmail,i=e.currentBundleId,s=e.currentCourseId,u=r.gatewayCredentials,c=r.checkoutPriceDetails,l=r.transactionId,d=r.courseData,p={key:u.merchantKey,txnid:l,hash:u.hashValue,amount:c.amountPayable,firstname:n,email:a,phone:o,productinfo:d.courseTitle,surl:"https://nomigrat.learnyst.com/coursePayment/paymentStatusDisplay",furl:"https://nomigrat.learnyst.com/coursePayment/paymentStatusDisplay"},m={responseHandler:function(e){var r={transaction_id:l,gateway_id:u.gatewayId,payment_details:e,course_id:s||i};t(r)},catchException:function(e){console.log("payu failure",e)}};bolt.launch(p,m)},H=function(e,t,r){var n=e.orderSummaryData,o=n.checkoutPriceDetails,a=n.transactionId;paypal.Buttons({createOrder:function(e,t){return r(window.paypal),t.order.create({purchase_units:[{amount:{value:o.amountPayable},reference_id:a}]})},onApprove:function(e,r){var n={order_id:e.orderID,payerId:e.payerID};t(n)}}).render("#paypal-button")},K=function(e,t){var r=e.orderSummaryData.gatewayCredentials,n=r.clientSecret,o=r.merchantKey,a=Stripe(o),i=a.elements().create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});i.mount("#card-element"),document.getElementById("payment-form").addEventListener("submit",(function(e){e.preventDefault(),a.confirmCardPayment(n,{payment_method:{card:i,billing_details:{name:"Jenny Rosen"}}}).then((function(e){if(e.error){console.log(e.error.message);var r=document.getElementById("card-errors"),n=document.getElementById("card-element");r.textContent=e.error.message,r.style.color="#CF6679",n.style.borderColor="#CF6679"}else"succeeded"===e.paymentIntent.status&&t(e.paymentIntent)}))}))},Z=function(e,t){var r=document.createElement("form");document.body.appendChild(r),r.method="post",r.action=e;var n=!0,o=!1,a=void 0;try{for(var i,s=["PAY_REQUEST_ID","CHECKSUM"][Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,c=document.createElement("input");c.type="hidden",c.name=u,c.value=t[u],r.appendChild(c)}}catch(l){o=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}r.submit()},X=function(e,t,r){var n={merchant_order_id:t.transactionId,sid:t.gatewayCredentials.accountNumber,mode:"2CO",li_0_type:"product",li_0_name:t.courseData.courseTitle,li_0_price:t.checkoutPriceDetails.amountPayable,currency_code:t.currency,li_0_tangible:"N",card_holder_name:r.name,email:r.email,phone:r.phone},o=document.createElement("form");document.body.appendChild(o),o.method="post",o.action=e;var a=!0,i=!1,s=void 0;try{for(var u,c=["merchant_order_id","sid","mode","li_0_type","li_0_name","li_0_price","currency_code","li_0_tangible","card_holder_name","email","phone"][Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,d=document.createElement("input");d.type="hidden",d.name=l,d.value=n[l],o.appendChild(d)}}catch(p){i=!0,s=p}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}o.submit()};function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function Q(e,t){return!t||"object"!==te(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e,t){return ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ee(e,t)}var te=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var o=J(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Q(this,r)}}var ne=r(45671),oe=r(65852);function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function ue(e,t){return!t||"object"!==le(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e,t){return ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ce(e,t)}var le=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=se(e);if(t){var o=se(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ue(this,r)}}var pe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(s,e);var t,r,o,i=de(s);function s(){return ae(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"componentDidMount",value:function(){this.props.renderPaypalButton()}},{key:"render",value:function(){var e=this.props,t=e.initiatePayment,r=e.t,o=e.orderSummaryData.checkoutPriceDetails,i=o.amountPayable;return o.taxAmount,(0,n.jsx)(l.W2,{children:(0,n.jsxs)(a.xu,{margin:"0 auto",maxWidth:20,children:[(0,n.jsxs)(a.kC,{mb:8,flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(a.xu,{children:(0,n.jsx)(l.zx,{IconComponent:oe.kyg,buttonType:"text",onClick:function(){return t()},colorVariant:"primary",text:r("back")})}),(0,n.jsx)(a.xu,{children:(0,n.jsx)(l.xv,{color:"onBackground.main",textTransform:"capitalize",variant:"body1",children:r("payWithPaypal")})}),(0,n.jsx)(a.xu,{sx:{visibility:"hidden"},children:(0,n.jsx)(l.zx,{IconComponent:oe.kyg,buttonType:"text",onClick:function(){return t()},colorVariant:"primary",text:r("back")})})]}),(0,n.jsx)(a.xu,{mb:6,children:(0,n.jsxs)(a.kC,{justifyContent:"space-between",pt:3,children:[(0,n.jsx)(l.X6,{variant:"h5",color:"onSurface.main",children:r("amountPayable")}),(0,n.jsx)(l.X6,{variant:"h5",color:"onSurface.main",children:(0,b.Z)(i)})]})}),(0,n.jsx)(a.kC,{id:"paypal-button",width:"100%",justifyContent:"center",alignItems:"center",alignSelf:"center",sx:{"& > div":{display:"contents"}}})]})})}}])&&ie(t.prototype,r),o&&ie(t,o),s}(o.Component),me=(0,ne.Z)("payment")(pe);function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){he(e,t,r[t])}))}return e}function Se(e,t){return!t||"object"!==ge(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e,t){return xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xe(e,t)}var ge=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ve(e);if(t){var o=ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Se(this,r)}}var Pe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(c,e);var t,r,o,u=Ce(c);function c(){var e;return ye(this,c),(e=u.apply(this,arguments)).onUnload=function(t){if(e.props&&e.props.currentPaymentState===d.tm.PAYMENT_VERIFY)return t.preventDefault(),t.returnValue="do not refresh",alert("do not refresh"),"do not refresh"},e}return t=c,(r=[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){var e=this.props,t=e.currentPaymentState,r=e.paymentFetchStatus,o=e.orderSummaryError,u=e.orderSummaryData,c=e.sharedIsUserLoggedIn,p=e.t,m=e.togglePaypalPaymentPage;return c?t===d.tm.PAYMENT_VERIFY?(0,n.jsx)(l.gb,{message:p("gettingPaymentStatus")}):t===d.tm.ORDER_FETCH&&r===d.UK.FAILED&&o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)(l.jj,{errorCode:o.errorCode,errorText:o.errorMessage})]}):u?m?(0,n.jsxs)(a.kC,{minHeight:"100vh",bg:"surface",flexDirection:"column",children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)(a.xu,{sx:{flex:1},my:6,children:(0,n.jsx)(me,be({},this.props))}),(0,n.jsx)(s.Z,{})]}):(0,n.jsxs)(a.kC,{minHeight:"100vh",bg:"surface",flexDirection:"column",children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)(a.xu,{sx:{flex:1},my:6,children:(0,n.jsx)(L,be({},this.props))}),(0,n.jsx)(s.Z,{})]}):(0,n.jsx)(l.gb,{}):(0,n.jsx)(a.kC,{height:"100vh",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(l._Y,{})})}}])&&fe(t.prototype,r),o&&fe(t,o),c}(o.Component),Ie=(0,ne.Z)("payment")(function(e){var t=function(e,t){return new Promise((function(r,n){var o=document.createElement("script");o.type="text/javascript",t&&(o.id=t),o.setAttribute("nonce","22os9h3sdfa"),o.onload=r,o.onerror=n,o.src=e,document.body.appendChild(o)}))},r=function(r){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(u,r);var o,a,i,s=re(u);function u(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=s.call(this,e)).buttonInstanceCallbak=function(e){r.setState({paypalButton:e})},r.onPaymentSuccess=function(e){return r.props.doPaymentSuccess(e)},r.initiatePayment=function(e){var n=r.props.orderSummaryData;if(r.props.orderSummaryData&&r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.STRIPE_PAYMENT_GATEWAY&&(e(!0),t("https://js.stripe.com/v3/",null).then((function(){K(r.props,r.onPaymentSuccess)}))),r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.RAZORPAY_PAYMENT_GATEWAY)if(r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.INSTAMOJO_PAYMENT_GATEWAY)if(r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.CCAVENUE_PAYMENT_GATEWAY)if(r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.HDFC_PAYMENT_GATEWAY){if(r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.PAYUMONEY_PAYMENT_GATEWAY){var o=y.Gj.enable_sandbox_payment?"https://sboxcheckout-static.citruspay.com/bolt/run/bolt.min.js":"https://checkout-static.citruspay.com/bolt/run/bolt.min.js";t(o,"bolt").then((function(){z(r.props,r.onPaymentSuccess)})).catch((function(e){return console.log("unexpected error occured!",e)}))}if(r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.PAYPAL_PAYMENT_GATEWAY&&r.setState({togglePaypalPaymentPage:!r.state.togglePaypalPaymentPage}),r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.PAYGATE_PAYMENT_GATEWAY){var a=n.gatewayCredentials,i=a.paygateChecksum,s=a.paygateRequestId;Z("https://secure.paygate.co.za/payweb3/process.trans",{CHECKSUM:i,PAY_REQUEST_ID:s})}if(r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.TWO_CHECKOUT_PAYMENT_GATEWAY);else{var u=y.Gj.enable_sandbox_payment?"https://www.2checkout.com/checkout/purchase?demo=Y":"https://www.2checkout.com/checkout/purchase",c={name:r.props.sharedUserName,email:r.props.sharedUserEmail,phone:r.props.sharedUserMobileNum};t("https://www.2checkout.com/checkout/api/2co.min.js",null).then((function(){X(u,r.props.orderSummaryData,c)})).catch((function(e){return console.log("unexpected error occured while loading scripts-2Checkout gateway!",e)}))}}else F(r.props,y.Gj.NAME);else{var l=y.Gj.enable_sandbox_payment?d.jW:d.gU,p=n.redirectionData,m=p.accessCode,f=p.encData;V(l,{access_code:m,encRequest:f})}else t("https://js.instamojo.com/v1/checkout.js",null).then((function(){Instamojo.open(r.props.paymentRedirectUrl)})).catch((function(e){return console.log("unexpected error occured!",e)}));else t("https://checkout.razorpay.com/v1/checkout.js",null).then((function(){Y(r.props,y.Gj.NAME,r.onPaymentSuccess)})).catch((function(e){return console.log("unexpected error occured!",e)}))},r.renderPaypalButton=function(){var e=(r.props.orderSummaryData&&r.props.orderSummaryData.gatewayCredentials).paypalClientId,n=r.props.orderSummaryData.currency;t("https://www.paypal.com/sdk/js?client-id=".concat(e,"&currency=").concat(n),null).then((function(){H(r.props,r.onPaymentSuccess,r.buttonInstanceCallbak)})).catch((function(e){console.log("failed to load paypal",e)}))},r.state={togglePaypalPaymentPage:!1},r}return o=u,a=[{key:"componentWillUnmount",value:function(){window.Instamojo&&Instamojo.close()}},{key:"componentDidUpdate",value:function(){if(this.props.currentPaymentState!==d.tm.PAYMENT_VERIFY||this.props.paymentFetchStatus!==d.UK.SUCCESS&&this.props.paymentFetchStatus!==d.UK.FAILED)this.props.orderSummaryData&&this.props.orderSummaryData.redirectionUrl&&this.props.doPaymentVerifySuccess(this.props.orderSummaryData.redirectionUrl,this.props.currentBundleId||this.props.currentCourseId,this.props.allBundleCourseIds);else{var e=this.props.paymentVerifyData,t=e.paymentDate,r=e.amount,n=e.paymentTime,o=e.receiptNumber;if(e.seoTitle,e.isAdmin)return void m.default.back();var a=this.props.orderSummaryData&&this.props.orderSummaryData.courseData&&this.props.orderSummaryData.courseData.courseTitle,i=this.props.orderSummaryData&&this.props.orderSummaryData.courseData&&this.props.orderSummaryData.courseData.courseSeoTitle,s=A.y4.paymentStatus,u={courseTitle:a,isSuccess:this.props.paymentFetchStatus===d.UK.SUCCESS,paymentDate:t,paymentTime:n,amount:r,receiptNumber:o,gatewayId:this.props.orderSummaryData.gatewayCredentials.gatewayId,paymentId:this.props.purchaseData&&this.props.purchaseData.razorpay_payment_id||0,userPaymentSuccess:this.props.userPaymentSuccess||null,courseSeoTitle:i,returnToPost:m.default.query.returnToPost&&m.default.query.returnToPost.toString()||void 0},c=A.XC.paymentStatus(u);m.default.replace({pathname:s,query:u},c,{shallow:!0})}}},{key:"render",value:function(){var t=this;return(0,n.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$(e,t,r[t])}))}return e}({},this.props,{initiatePayment:this.initiatePayment,makePaymentVerifySuccess:function(e){return t.verifyPaymentSuccess(e)},makePaymentVerifyFailure:function(e){return t.props.doPaymentVerifyFailure(e)},togglePaypalPaymentPage:this.state.togglePaypalPaymentPage,renderPaypalButton:this.renderPaypalButton}))}}],a&&q(o.prototype,a),i&&q(o,i),u}(o.Component);return(0,B.$)("selectPricing","selectPricingBundle","selectAddresses","selectSharedIsUserLoggedIn","selectSharedUserName","selectSharedUserEmail","selectSharedUserMobileNum","selectCurrentCourseId","selectCurrentBundleId","selectCurrentCourseTitle","selectCurrentCourseDetails","selectCurrentBundleDetails","selectCurrentBundleSeoTitle","selectCurrentCourseSeoTitle","selectCurrentCoursePricing","selectCurrentBundleTitle","selectAllBundleCourseIds","selectSharedUserId","selectOrderSummaryData","selectCouponData","selectCouponApplyError","selectPurchaseData","selectOrderSummaryError","selectCurrentPaymentState","selectPaymentFetchStatus","selectPaymentVerifyData","selectPaymentVerifyError","selectPaymentRedirectUrl","selectAddressesBundle","selectCountryList","selectCurrentProductType","selectUserPaymentSuccess","selectIsCurrentProductFromBundlde","doRequestPayment","doPaymentSuccess","doVerifyPayment","doPaymentVerifySuccess","doPaymentVerifyFailure","doUpdateAddress","doUpdateInitiaied","doApplyCoupon","doRemoveCoupon","doSetVariablePrice","doUpdateOrderSummary","selectWalletDataSummary",r)}(Pe)),je=r(29418),we=(r(97594),r(35230)),Ee=r.n(we),_e=r(21155),De=r(34008),Ae=r(28535),Oe=r(90389),Ne=r(11959),Te=r(52875);function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function Re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ke(a,n,o,i,s,"next",e)}function s(e){ke(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}function Be(e,t){return!t||"object"!==We(t)&&"function"!==typeof t?Ue(e):t}function Me(e,t){return Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Me(e,t)}var We=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Le(e);if(t){var o=Le(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Be(this,r)}}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function ze(e,t){return!t||"object"!==Ke(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e,t){return He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},He(e,t)}var Ke=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ye(e);if(t){var o=Ye(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ze(this,r)}}var Xe=r(25119),qe=r(66441),$e=r(55212);function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t){return!t||"object"!==nt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e,t){return rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rt(e,t)}var nt=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ot(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}var at=r(70282);function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var st=(0,je.Z)((function(){return(0,n.jsx)(Ie,{})}));var ut=(0,je.Z)(function(e){var t=function(e,t){return new Promise((function(r,n){var o=document.createElement("script");o.type="text/javascript",t&&(o.id=t),o.setAttribute("nonce","22os9h3sdfa"),o.onload=r,o.onerror=n,o.src=e,document.body.appendChild(o)}))},r=function(r){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(u,r);var o,a,i,s=Ze(u);function u(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=s.call(this,e)).buttonInstanceCallbak=function(e){r.setState({paypalButton:e})},r.onPaymentSuccess=function(e){return r.props.doPaymentSuccess(e)},r.initiatePayment=function(e){var n=r.props.orderSummaryData;if(r.props.orderSummaryData&&r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.STRIPE_PAYMENT_GATEWAY&&(e&&e(!0),t("https://js.stripe.com/v3/",null).then((function(){K(r.props,r.onPaymentSuccess)}))),r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.RAZORPAY_PAYMENT_GATEWAY)if(r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.INSTAMOJO_PAYMENT_GATEWAY)if(r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.CCAVENUE_PAYMENT_GATEWAY)if(r.props.orderSummaryData.gatewayCredentials.gatewayId!==d.UW.HDFC_PAYMENT_GATEWAY){if(r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.PAYUMONEY_PAYMENT_GATEWAY){var o=y.Gj.enable_sandbox_payment?"https://sboxcheckout-static.citruspay.com/bolt/run/bolt.min.js":"https://checkout-static.citruspay.com/bolt/run/bolt.min.js";t(o,"bolt").then((function(){z(r.props,r.onPaymentSuccess)})).catch((function(e){return console.log("unexpected error occured!",e)}))}if(r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.PAYPAL_PAYMENT_GATEWAY&&r.setState({togglePaypalPaymentPage:!r.state.togglePaypalPaymentPage}),r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.PAYGATE_PAYMENT_GATEWAY){var a=n.gatewayCredentials,i=a.paygateChecksum,s=a.paygateRequestId;Z("https://secure.paygate.co.za/payweb3/process.trans",{CHECKSUM:i,PAY_REQUEST_ID:s})}if(r.props.orderSummaryData.gatewayCredentials.gatewayId===d.UW.TWO_CHECKOUT_PAYMENT_GATEWAY){var u=y.Gj.enable_sandbox_payment?"https://www.2checkout.com/checkout/purchase?demo=Y":"https://www.2checkout.com/checkout/purchase",c={name:r.props.sharedUserName,email:r.props.sharedUserEmail,phone:r.props.sharedUserMobileNum};t("https://www.2checkout.com/checkout/api/2co.min.js",null).then((function(){X(u,r.props.orderSummaryData,c)})).catch((function(e){return console.log("unexpected error occured while loading scripts-2Checkout gateway!",e)}))}}else F(r.props,y.Gj.NAME);else{var l=y.Gj.enable_sandbox_payment?d.jW:d.gU,p=n.redirectionData,m=p.accessCode,f=p.encData;V(l,{access_code:m,encRequest:f})}else t("https://js.instamojo.com/v1/checkout.js",null).then((function(){null===window||void 0===window||window.Instamojo.open(r.props.paymentRedirectUrl)})).catch((function(e){return console.log("unexpected error occured!",e)}));else t("https://checkout.razorpay.com/v1/checkout.js",null).then((function(){Y(r.props,y.Gj.NAME,r.onPaymentSuccess)})).catch((function(e){return console.log("unexpected error occured!",e)}))},r.renderPaypalButton=function(){var e=(r.props.orderSummaryData&&r.props.orderSummaryData.gatewayCredentials).paypalClientId,n=r.props.orderSummaryData.currency;t("https://www.paypal.com/sdk/js?client-id=".concat(e,"&currency=").concat(n),null).then((function(){H(r.props,r.onPaymentSuccess,r.buttonInstanceCallbak)})).catch((function(e){console.log("failed to load paypal",e)}))},r.state={togglePaypalPaymentPage:!1},r}return o=u,(a=[{key:"componentDidUpdate",value:function(){if(this.props.currentPaymentState!==d.tm.PAYMENT_VERIFY||this.props.paymentFetchStatus!==d.UK.SUCCESS&&this.props.paymentFetchStatus!==d.UK.FAILED)this.props.orderSummaryData&&this.props.orderSummaryData.redirectionUrl&&this.props.doPaymentVerifySuccess(this.props.orderSummaryData.redirectionUrl,this.props.currentBundleId||this.props.currentCourseId,this.props.allBundleCourseIds);else{var e=this.props.paymentVerifyData,t=e.paymentDate,r=e.amount,n=e.paymentTime,o=e.receiptNumber;if(e.seoTitle,e.isAdmin)return void m.default.back();var a=this.props.orderSummaryData&&this.props.orderSummaryData.courseData&&this.props.orderSummaryData.courseData.courseTitle,i=this.props.orderSummaryData&&this.props.orderSummaryData.courseData&&this.props.orderSummaryData.courseData.courseSeoTitle,s=A.y4.paymentStatus,u={courseTitle:a,isSuccess:this.props.paymentFetchStatus===d.UK.SUCCESS,paymentDate:t,paymentTime:n,amount:r,receiptNumber:o,gatewayId:this.props.orderSummaryData.gatewayCredentials.gatewayId,paymentId:this.props.purchaseData&&this.props.purchaseData.razorpay_payment_id||0,userPaymentSuccess:this.props.userPaymentSuccess||null,courseSeoTitle:i,returnToPost:m.default.query.returnToPost&&m.default.query.returnToPost.toString()||void 0},c=A.XC.paymentStatus(u);m.default.replace({pathname:s,query:u},c,{shallow:!0})}}},{key:"componentWillUnmount",value:function(){var e;(null===window||void 0===window?void 0:window.Instamojo)&&(null===window||void 0===window||null===(e=window.Instamojo)||void 0===e||e.close())}},{key:"render",value:function(){var t,r,o,a=this;return(0,n.jsx)(e,{paymentIntegrationDataWeb:{togglePaypalPaymentPage:this.state.togglePaypalPaymentPage,isStripePaymentGateway:(null===(t=this.props)||void 0===t||null===(r=t.orderSummaryData)||void 0===r||null===(o=r.gatewayCredentials)||void 0===o?void 0:o.gatewayId)===d.UW.STRIPE_PAYMENT_GATEWAY},paymentIntegrationCallbacksWeb:{initiatePayment:this.initiatePayment,makePaymentVerifySuccess:function(e){return a.verifyPaymentSuccess(e)},makePaymentVerifyFailure:function(e){return a.props.doPaymentVerifyFailure(e)},renderPaypalButton:this.renderPaypalButton}})}}])&&Ve(o.prototype,a),i&&Ve(o,i),u}(o.Component);return(0,B.$)("selectPricing","selectPricingBundle","selectAddresses","selectSharedIsUserLoggedIn","selectSharedUserName","selectSharedUserEmail","selectSharedUserMobileNum","selectCurrentCourseId","selectCurrentBundleId","selectCurrentCourseTitle","selectCurrentCourseDetails","selectCurrentBundleDetails","selectCurrentBundleSeoTitle","selectCurrentCourseSeoTitle","selectCurrentCoursePricing","selectCurrentBundleTitle","selectAllBundleCourseIds","selectSharedUserId","selectOrderSummaryData","selectCouponData","selectCouponApplyError","selectPurchaseData","selectOrderSummaryError","selectCurrentPaymentState","selectPaymentFetchStatus","selectPaymentVerifyData","selectPaymentVerifyError","selectPaymentRedirectUrl","selectAddressesBundle","selectCountryList","selectCurrentProductType","selectUserPaymentSuccess","selectIsCurrentProductFromBundlde","doRequestPayment","doPaymentSuccess","doVerifyPayment","doPaymentVerifySuccess","doPaymentVerifyFailure","doUpdateAddress","doUpdateInitiaied","doApplyCoupon","doRemoveCoupon","doSetVariablePrice","doUpdateOrderSummary","selectWalletDataSummary",r)}(function(e,t){var r=function(r){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(u,r);var o,a,i,s=ot(u);function u(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=s.call(this,e)).goToAddressForm=function(e){var n,o,a,i,s,u,c,l,p,m=d.pr.SHIPPING_AND_BILLING,y=_e.Wh.FULL;t||(m=(0,Ae.hZ)(null===(i=r.props)||void 0===i||null===(s=i.orderSummaryData)||void 0===s?void 0:s.courseData.courseAcessType,null===(u=r.props)||void 0===u||null===(c=u.orderSummaryData)||void 0===c?void 0:c.addressConfig),y=null===(l=r.props)||void 0===l||null===(p=l.orderSummaryData)||void 0===p?void 0:p.addressConfig);d.pr.NONE,d.pr.BILLING,d.pr.SHIPPING;var f=m===d.pr.SHIPPING_AND_BILLING;(0,Te.pd)({flag:e,addressConfig:y,billingAndShipping:f,addressType:m,navigationId:(new Date).getTime(),courseId:null===(n=r.props)||void 0===n||null===(o=n.orderSummaryData)||void 0===o||null===(a=o.courseData)||void 0===a?void 0:a.courseId})},r.submitGstAddress=function(e){_e.Wh.BOTH,_e.ve.SHIPPING_AND_BILLING;var t,n,o,a,i,s,u,c,l=JSON.stringify({key:"IN",value:null===(t=r.props.countryList)||void 0===t||null===(n=t.IN)||void 0===n?void 0:n.name}),d=JSON.stringify({key:e.key,value:e.value||""});if((0,Ae.hZ)(null===(o=r.props)||void 0===o||null===(a=o.orderSummaryData)||void 0===a?void 0:a.courseData.courseAcessType,null===(i=r.props)||void 0===i||null===(s=i.orderSummaryData)||void 0===s?void 0:s.addressConfig),(null===(u=r.props)||void 0===u||null===(c=u.orderSummaryData)||void 0===c?void 0:c.addressConfig)===_e.Wh.GST){var p,m,y,f,h,v=null===(p=r.props)||void 0===p||null===(m=p.addresses)||void 0===m?void 0:m.billing,b={city:(null===v||void 0===v?void 0:v.city)||"",country:l,country_name:null===(y=r.props)||void 0===y||null===(f=y.countryList)||void 0===f||null===(h=f.IN)||void 0===h?void 0:h.name,landmark:(null===v||void 0===v?void 0:v.landmark)||"",mobile:(null===v||void 0===v?void 0:v.mobile)||"",name:(null===v||void 0===v?void 0:v.name)||r.props.sharedUserName||"",pincode:(null===v||void 0===v?void 0:v.pincode)||0,state:d,state_name:e.value||"",street_address1:(null===v||void 0===v?void 0:v.street_address1)||"",street_address2:(null===v||void 0===v?void 0:v.street_address2)||""},S=(0,$e.U)({addressValues:b,props:{addressFlag:_e.ZU.SERVER_BILLING,sharedUserId:r.props.sharedUserId||0,sharedUserMobileNum:r.props.sharedUserMobileNum,sharedUserName:r.props.sharedUserName},formData:v});S&&r.props.doUpdateAddress((null===v||void 0===v?void 0:v.id)||null,S)}},r.onShippingAddressChange=function(){r.goToAddressForm(d.Vo.SERVER_SHIPPING)},r.onBillingAddressChange=function(){r.goToAddressForm(d.Vo.SERVER_BILLING)},r.onSelectState=function(e){var t=e.key,n=e.value;r.setState({selectedState:{key:t,value:n}}),r.submitGstAddress({key:t,value:n})},r.addressUtils=new De.G3,r.state={selectedState:{key:"",value:""}},r}return o=u,a=[{key:"render",value:function(){var r,o,a,i,s,u,c=_e.ve.SHIPPING_AND_BILLING,l=_e.Wh.BOTH;t||(c=(0,Ae.hZ)(null===(r=this.props)||void 0===r||null===(o=r.orderSummaryData)||void 0===o?void 0:o.courseData.courseAcessType,null===(a=this.props)||void 0===a||null===(i=a.orderSummaryData)||void 0===i?void 0:i.addressConfig),l=null===(s=this.props)||void 0===s||null===(u=s.orderSummaryData)||void 0===u?void 0:u.addressConfig);var d={onBillingAddressChange:this.onBillingAddressChange,onShippingAddressChange:this.onShippingAddressChange,onSelectState:this.onSelectState,submitGstAddress:this.submitGstAddress};return(0,n.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qe(e,t,r[t])}))}return e}({addressData:this.addressUtils.constructData(this.props,c,l,this.state),addressCallbacks:d},this.props))}}],a&&Je(o.prototype,a),i&&Je(o,i),u}(o.Component);return(0,B.$)("selectCountryList","doUpdateAddress","selectSharedAuthToken","selectAddresses","selectAddressesBundleFetchStatus","selectOrderSummaryData","selectSharedUserName",r)}(function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(s,t);var r,o,a,i=Fe(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).verifyPaymentSuccess=function(e){t.props.doPaymentVerifySuccess(e,t.props.currentCourseId||t.props.currentBundleId,t.props.allBundleCourseIds)},t.validateAddressAndProceedPayment=function(e,r){var n=t.addressValiditor();if(n||r&&r(),n){var o,a=t.props,i=a.orderSummaryData,s=a.sharedUserName,u=a.sharedUserMobileNum,c=a.sharedUserEmail,l=a.currentCourseTitle,p=a.currentBundleTitle,m={credentials:null===i||void 0===i?void 0:i.gatewayCredentials,amountInPaise:100*((null===i||void 0===i?void 0:i.checkoutPriceDetails.amountPayable)||0),schoolName:y.Gj.NAME,schoolUrl:y.Gj.WEB_URL,courseTitle:null===i||void 0===i?void 0:i.courseData.courseTitle,schoolLogo:{uri:"logo"},studentName:s,studentEmail:c,studentMobile:u,schoolTheme:e};if((null===i||void 0===i||null===(o=i.gatewayCredentials)||void 0===o?void 0:o.gatewayId)===d.UW.INSTAMOJO_PAYMENT_GATEWAY||(null===i||void 0===i?void 0:i.gatewayCredentials.gatewayId)===d.UW.CCAVENUE_PAYMENT_GATEWAY)return t.props.doPaymentInitiated(m),(0,Te.I3)();if((null===i||void 0===i?void 0:i.gatewayCredentials.gatewayId)===d.UW.RAZORPAY_PAYMENT_GATEWAY||(null===i||void 0===i?void 0:i.gatewayCredentials.gatewayId)===d.UW.HDFC_PAYMENT_GATEWAY){(0,Oe.ft)({courseName:l,bundleName:p,purchasePrice:null===i||void 0===i?void 0:i.checkoutPriceDetails.amountPayable,actualPrice:(null===i||void 0===i?void 0:i.checkoutPriceDetails.discountedPrice)?null===i||void 0===i?void 0:i.checkoutPriceDetails.discountedPrice:null===i||void 0===i?void 0:i.checkoutPriceDetails.originalPrice,discountPrice:(null===i||void 0===i?void 0:i.checkoutPriceDetails.couponPrice)?null===i||void 0===i?void 0:i.checkoutPriceDetails.couponPrice:0},S.GS.PAYMENT_GATEWAY_VIEWED);t.props.doPaymentInitiated(m),(0,Oe.Pu)(t.props.sharedUserId,t.props.orderSummaryData,m).then((function(e){e&&t.props.doPaymentSuccess(e)})).catch((function(e){t.props.doPaymentFailure(e)}))}else{var f=t.props.currentBundleId||t.props.currentCourseId,h=t.props.allBundleCourseIds;t.props.doRedirectWebPayment(f,h,(null===i||void 0===i?void 0:i.transactionId)||0)}}if(parseInt(y.Gj.PAYMENT_TYPE)===Ne.paymentType.IN_APP_PAYMENT)return t.props.orderSummaryData,new Promise((function(e,t){t("Not supported for web")}))},t.addressValiditor=function(){var e,r=t.props.addresses,n=t.props.orderSummaryData,o=(0,Ae.hZ)(null===n||void 0===n||null===(e=n.courseData)||void 0===e?void 0:e.courseAcessType,null===n||void 0===n?void 0:n.addressConfig);return(null===n||void 0===n?void 0:n.addressConfig)===d.C.NONE||o!==d.pr.BILLING||r.billing?(null===n||void 0===n?void 0:n.addressConfig)===d.C.NONE||o!==d.pr.SHIPPING||r.shipping?!((null===n||void 0===n?void 0:n.addressConfig)!==d.C.NONE&&o===d.pr.SHIPPING_AND_BILLING&&(r.billing||t.setState({billingError:!0}),r.shipping||t.setState({shippingError:!0}),!r.billing||!r.shipping)):(t.setState({shippingError:!0}),!1):(t.setState({billingError:!0}),!1)};var r=Ue(t);t.submitCoupon=function(){var e=Re(Ee().mark((function e(t,n,o){return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){var i,s,u,c,l,d;r.resolveCouponCodeSubmit=e,r.rejectCouponCodeSubmit=a;var p,m,y=r.props.currentCoursePricing,f=(null===y||void 0===y||null===(i=y.selctedVariablePrice)||void 0===i?void 0:i.priceId)||0,h=(null===(s=r.props)||void 0===s?void 0:s.currentCoursePricing)?null===(u=r.props.currentCoursePricing)||void 0===u||null===(c=u.selctedVariablePrice)||void 0===c?void 0:c.priceId:0;0===t.length&&(r.props.orderSummaryData&&(r.props.doUpdateOrderSummary(r.props.orderSummaryData,r.props.currentBundleId||r.props.currentCourseId||(null===(p=r.props.orderSummaryData)||void 0===p||null===(m=p.courseData)||void 0===m?void 0:m.courseId),"",h,n),r.rejectCouponCodeSubmit=null));if(t.length<S.AO.MIN_COUPON_CODE_LENGTH&&0!==t.length)return r.rejectCouponCodeSubmit&&(r.rejectCouponCodeSubmit({message:o("couponLength")}),r.rejectCouponCodeSubmit=null),!0;r.couponCodeFromField=t;var v={couponCode:t,courseId:r.props.currentBundleId||r.props.currentCourseId||(null===(l=r.props.orderSummaryData)||void 0===l||null===(d=l.courseData)||void 0===d?void 0:d.courseId),userId:r.props.sharedUserId,currentPriceId:f};return r.props.doApplyCoupon(v),0===t.length&&r.props.orderSummaryData&&r.resolveCouponCodeSubmit&&(r.resolveCouponCodeSubmit(),r.resolveCouponCodeSubmit=null),!0}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,n,o){return e.apply(Ue(t),arguments)}}();var n=Ue(t);return t.validateWalletAmount=function(){var e=Re(Ee().mark((function e(t){return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){if(n.resolveWalletCreditSubmit=e,n.rejectWalletCreditSubmit=r,n.props.paymentFetchStatus!==_e.iF.IN_PROGRESS&&t<=n.props.walletDataSummary.creditsAvailable){var o,a,i,s,u,c,l=(null===(o=n.props)||void 0===o?void 0:o.currentCoursePricing)?null===(a=n.props.currentCoursePricing)||void 0===a||null===(i=a.selctedVariablePrice)||void 0===i?void 0:i.priceId:0;if(n.props.orderSummaryData)n.props.doUpdateOrderSummary(n.props.orderSummaryData,n.props.currentBundleId||n.props.currentCourseId||(null===(s=n.props.orderSummaryData)||void 0===s||null===(u=s.courseData)||void 0===u?void 0:u.courseId),null===(c=n.props.couponData)||void 0===c?void 0:c.couponCode,l,t);else if(n.rejectWalletCreditSubmit){var d,p;n.rejectWalletCreditSubmit({message:null===(d=n.props)||void 0===d||null===(p=d.orderSummaryError)||void 0===p?void 0:p.errorMessage}),n.rejectWalletCreditSubmit=null}}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(Ue(t),arguments)}}(),t.retryVerifyPayment=function(){var e=t.props,r=e.purchaseData,n=e.orderSummaryData,o=e.currentBundleId,a=e.currentCourseId,i=e.allBundleCourseIds;n&&t.props.doVerifyPayment(r,o||a,i,n)},t.goBack=function(){t.props.currentPaymentState===_e.Ky.PAYMENT_VERIFY&&t.props.paymentFetchStatus===_e.iF.SUCCESS&&t.props.isFromSubscriptionPricing&&((0,Te.n)(),(0,Te.n)()),(0,Te.n)()},t.onSuccessfulPayment=function(){t.goBack()},t.paymentUtils=new De.ms,t.state={billingError:!1,shippingError:!1,walletAmountUsed:0,isWalletAmountDeduced:!1},t.couponCodeFromField="",t.resolveCouponCodeSubmit=null,t.rejectCouponCodeSubmit=null,t.resolveWalletCreditSubmit=null,t.rejectWalletCreditSubmit=null,t.paymentVerifyCounter=0,t}return r=s,(o=[{key:"componentDidMount",value:function(){this.paymentUtils.isWalletRequired()&&this.props.doFetchWalletSummary(this.props.sharedUserId);var e=window.location.href;!e.match(/\b(\w*errormsg\w*)\b/)&&!e.match(/\b(\w*status=false\w*)\b/)||this.paymentVerifyCounter?!e.match(/\b(\w*paidPrice\w*)\b/)&&!e.match(/\b(\w*status=true\w*)\b/)||this.paymentVerifyCounter||this.verifyPaymentSuccess(encodeURI(e)):this.props.doPaymentVerifyFailure(e),this.paymentVerifyCounter=1}},{key:"componentDidUpdate",value:function(){var e,t,r,n,o,a,i,s,u,c,l;if(this.props&&this.props.orderSummaryData){var d=this.props.orderSummaryData,p=d.checkoutPriceDetails.amountPayable,m=d.redirectionUrl;if(0===p&&(this.props.currentPaymentState===_e.Ky.ORDER_UPDATE&&this.props.paymentFetchStatus!==_e.iF.SUCCESS||this.props.paymentFetchStatus!==_e.iF.FAILED)&&!this.props.paymentVerifyData){var y=this.props.orderSummaryData.courseData&&this.props.orderSummaryData.courseData.courseId||this.props.currentBundleId;this.props.doPaymentVerifySuccess(m,y,this.props.allBundleCourseIds)}}if((null===(e=this.props)||void 0===e?void 0:e.currentPaymentState)===_e.Ky.COUPON_APPLY&&(null===(t=this.props)||void 0===t?void 0:t.paymentFetchStatus)===_e.iF.SUCCESS){var f=this.props,h=f.currentBundleTitle,v=f.currentCourseTitle,b=f.orderSummaryData;(0,Oe.WI)({courseName:v,bundleName:h,actualPrice:(null===b||void 0===b?void 0:b.checkoutPriceDetails.discountedPrice)?null===b||void 0===b?void 0:b.checkoutPriceDetails.discountedPrice:null===b||void 0===b?void 0:b.checkoutPriceDetails.originalPrice,couponCode:this.couponCodeFromField,discountPrice:(null===b||void 0===b?void 0:b.checkoutPriceDetails.couponPrice)?null===b||void 0===b?void 0:b.checkoutPriceDetails.couponPrice:0}),this.resolveCouponCodeSubmit&&(this.resolveCouponCodeSubmit(),this.resolveCouponCodeSubmit=null,this.rejectCouponCodeSubmit=null)}(null===(r=this.props)||void 0===r?void 0:r.currentPaymentState)===_e.Ky.COUPON_APPLY&&(null===(n=this.props)||void 0===n?void 0:n.paymentFetchStatus)===_e.iF.FAILED&&this.rejectCouponCodeSubmit&&(this.rejectCouponCodeSubmit({message:null===(u=this.props.couponApplyError)||void 0===u?void 0:u.errorMessage}),this.rejectCouponCodeSubmit=null),(null===(o=this.props)||void 0===o?void 0:o.currentPaymentState)===_e.Ky.ORDER_UPDATE&&(null===(a=this.props)||void 0===a?void 0:a.paymentFetchStatus)===_e.iF.SUCCESS&&this.resolveWalletCreditSubmit&&(this.resolveWalletCreditSubmit(),this.resolveWalletCreditSubmit=null),(null===(i=this.props)||void 0===i?void 0:i.currentPaymentState)===_e.Ky.ORDER_UPDATE&&(null===(s=this.props)||void 0===s?void 0:s.paymentFetchStatus)===_e.iF.FAILED&&this.rejectWalletCreditSubmit&&(this.rejectWalletCreditSubmit({message:null===(c=this.props)||void 0===c||null===(l=c.orderSummaryError)||void 0===l?void 0:l.errorMessage}),this.rejectWalletCreditSubmit=null)}},{key:"render",value:function(){var t,r,o,a,i={backToPreviousPage:this.goBack,onPayClick:this.validateAddressAndProceedPayment,raiseTicketCallbacks:null===(t=this.props)||void 0===t?void 0:t.raiseTicketCallbacks,onCouponCodeSubmit:this.submitCoupon,validateWalletAmount:this.validateWalletAmount,retryVerifyPayment:this.retryVerifyPayment,onSuccess:this.onSuccessfulPayment,postPaymentRaiseTicketCallbacks:null===(r=this.props)||void 0===r?void 0:r.raiseTicketCallbacks2,addressCallbacks:null===(o=this.props)||void 0===o?void 0:o.addressCallbacks,paymentIntegrationCallbacksWeb:(null===(a=this.props)||void 0===a?void 0:a.paymentIntegrationCallbacksWeb)||{}};return(0,n.jsx)(e,{data:this.paymentUtils.constructData(this.props,this.state),callbacks:i})}}])&&Ge(r.prototype,o),a&&Ge(r,a),s}(o.Component);return(0,B.$)("doFetchWalletSummary","doRedirectWebPayment","doRequestPayment","doPaymentInitiated","doPaymentSuccess","doPaymentFailure","doPaymentVerifyFailure","doPaymentVerifySuccess","selectAddresses","selectSharedUserId","selectSharedUserName","selectSharedUserEmail","selectSharedUserMobileNum","selectCurrentCourseId","selectCurrentBundleId","selectCurrentCourseTitle","selectCurrentBundleTitle","selectAllBundleCourseIds","selectSharedUserId","selectOrderSummaryData","selectOrderSummaryError","selectCurrentPaymentState","selectPaymentFetchStatus","selectWalletDataSummary","doApplyCoupon","selectCouponData","selectCouponApplyError","selectCurrentCoursePricing","doUpdateOrderSummary","doVerifyPayment","selectPurchaseData","selectPaymentVerifyData","selectPaymentVerifyError","selectSharedUserProfilePhoto",t)}((0,qe.Z)((function(e){return(0,n.jsx)(Xe.Ff,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){it(e,t,r[t])}))}return e}({},e))}),{navbar:!0,footer:!1})))));var ct=function(){return(0,at.vC)().isAppV4?(0,n.jsx)(ut,{}):(0,n.jsx)(st,{})}},40472:function(e,t,r){"use strict";var n=r(24246),o=(r(27378),r(55480)),a=r(14916),i=r(267),s=r(9078);t.Z=function(){var e=(0,s.$)("payment").t;return(0,n.jsx)(o.xu,{my:2,px:[4,0,0],children:(0,n.jsxs)(o.kC,{justifyContent:"space-between",flexWrap:"wrap",children:[(0,n.jsxs)(o.kC,{flexDirection:"column",children:[(i.Gj.SUPPORT_MOBILE||i.Gj.SUPPORT_EMAIL)&&(0,n.jsx)(a.xv,{variant:"overline",color:"onSurface.main",children:e("needHelp")}),(0,n.jsxs)(o.kC,{flexDirection:"row",mr:4,mb:2,children:[i.Gj.SUPPORT_MOBILE&&(0,n.jsx)(o.xu,{pr:2,mr:2,sx:i.Gj.SUPPORT_MOBILE&&i.Gj.SUPPORT_EMAIL?{borderRightWidth:1,borderRightStyle:"solid",borderRightColor:"border"}:{},children:(0,n.jsx)(a.xv,{variant:"body2",color:"onSurface.light",children:i.Gj.SUPPORT_MOBILE})}),i.Gj.SUPPORT_EMAIL&&(0,n.jsx)(a.xv,{variant:"body2",color:"secondary.dark",children:i.Gj.SUPPORT_EMAIL})]})]}),i.Gj.refund_policy?(0,n.jsx)(o.kC,{flexDirection:"column",justifyContent:"flex-end",mb:2,children:(0,n.jsx)(a.xv,{variant:"body2",children:(0,n.jsx)(o.rU,{href:i.Gj.refund_policy,color:"secondary.dark",children:e("refundPolicy")})})}):null]})})}},29418:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var n=r(35230),o=r.n(n),a=r(24246),i=r(86677),s=r(27378),u=r(38906),c=r(79471),l=r(14916),d=r(23998),p=r(53850),m=r(11959),y=r(267),f=r(95045);function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}function C(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?h(e):t}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}var I=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return C(this,r)}}function w(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(u,t);var r,n,o,s=j(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,e)).doUserVerifications=function(){if(t.props.userLoginStatus===d.zU.LOGGED_IN_MOBILE_VERIFICATION_PENDING){if("/learn/account/otp"===t.props.router.pathname)return;i.default.push(p.y4.otp,p.XC.otp())}else if(t.props.userLoginStatus===d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING&&t.props.emailVerificationType===d.QF.EMAIL_LINK){if("/learn/account/email-verification"===t.props.router.pathname)return;i.default.push(p.y4.emailVerification,p.XC.emailVerification())}else if(t.props.userLoginStatus===d.zU.LOGGED_IN_EMAIL_VERIFICATION_PENDING&&t.props.emailVerificationType===d.QF.EMAIL_OTP){if("/learn/account/otp"===t.props.router.pathname)return;i.default.push(p.y4.otp,p.XC.otp())}else t.props.navigationCurrentScreen===m.i_.SEGMENT||t.props.navigationCurrentScreen===m.i_.SIGNIN||t.props.navigationCurrentScreen===m.i_.PROFILE_BUILDER||!y.Gj.segment_enabled||t.props.userSegmentId||t.props.userLoginStatus!==d.zU.LOGGED_IN_VERIFIED&&t.props.userLoginStatus!==d.zU.NOT_LOGGED_IN?t.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&t.props.isProfileBuilderEnabled&&!t.props.isStudentFilledProfile&&t.props.navigationCurrentScreen!==m.i_.PROFILE_BUILDER&&(void 0!==t.props.inProgressPayment?i.default.push(p.y4.profileFields,p.XC.profileFields()):i.default.replace(p.y4.profileFields,p.XC.profileFields(),{shallow:!0})):t.props.userLoginStatus===d.zU.NOT_LOGGED_IN&&y.Gj.pricing_model===f._n.SUBSCRIPTION_TYPE?i.default.push(p.y4.segment,p.XC.segment()):t.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&i.default.replace(p.y4.segment,p.XC.segment(),{shallow:!0})},t.doUserVerifications=t.doUserVerifications.bind(h(t)),t}return r=u,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,r=e.navigationCurrentScreen,n=e.doSendNavChangeEvent,o=e.doSetCurrentAccessingLesson;if(this.doUserVerifications(),n(p.ZP[t.pathname],r,(new Date).getTime(),g({},t.query),!1,!0),console.log(p.ZP[t.pathname]),t.pathname===p.y4.lessonPlayer&&!t.query.courseId){var a=c.$2,i=t.query.sectionId,s=t.query.lessonId;o({courseId:a,sectionId:i,lessonId:s,autoScrollLessonTs:(new Date).getTime()},s)}}},{key:"componentDidUpdate",value:function(e){this.props.navigationCurrentScreen===m.i_.SEGMENT||this.props.navigationCurrentScreen===m.i_.SIGNIN||this.props.navigationCurrentScreen===m.i_.PROFILE_BUILDER||!y.Gj.segment_enabled||this.props.userSegmentId||this.props.userLoginStatus!==d.zU.LOGGED_IN_VERIFIED&&this.props.userLoginStatus!==d.zU.NOT_LOGGED_IN||(this.props.userLoginStatus===d.zU.NOT_LOGGED_IN&&y.Gj.pricing_model===f._n.SUBSCRIPTION_TYPE?i.default.push(p.y4.segment,p.XC.segment()):this.props.userLoginStatus===d.zU.LOGGED_IN_VERIFIED&&i.default.replace(p.y4.segment,p.XC.segment(),{shallow:!0})),void 0!==this.props.inProgressPayment&&this.doUserVerifications(),void 0!==this.props.realUserLoginStatus&&(this.props.inProgressPayment||this.props.navigationCurrentScreen===m.i_.CHECKOUT||this.props.doSetRealUserLoginStatus()),this.props.isAuthTokenExpired&&e.isAuthTokenExpired!==this.props.isAuthTokenExpired&&((0,l.FN)({message:"Your login session is expired."}),this.props.doRestartAuthentication(),i.default.push(p.y4.signin))}},{key:"render",value:function(){return this.props.sharedIsSchoolLocked&&this.props.sharedIsUserLoggedIn?(0,a.jsx)(l.R7,{doSignoutUser:this.props.doSignoutUser}):(0,a.jsx)(e,g({},this.props))}}])&&b(r.prototype,n),o&&b(r,o),u}(s.Component);return t.getInitialProps=function(){var e,t=(e=o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isServer,e.abrupt("return",{isServer:r});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,s,"next",e)}function s(e){v(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),(0,i.withRouter)((0,u.$)("doSignoutUser","doSendNavChangeEvent","doSetCurrentAccessingLesson","doRestartAuthentication","selectSharedIsUserLoggedIn","selectIsAuthTokenExpired","selectNavigationCurrentScreen","selectSharedIsSchoolLocked","selectSharedIsUserLoggedIn","selectUserLoginStatus","selectIsProfileBuilderEnabled","selectIsStudentFilledProfile","selectEmailVerificationType","selectUserSegmentId","selectInProgressPayment","selectRealUserLoginStatus","doSetRealUserLoginStatus",t))}}},function(e){e.O(0,[5639,1362,1699,9917,2533,9630,5002,7326,6441,9990,3162,3599,9774,2888,179],(function(){return t=75771,e(e.s=t);var t}));var t=e.O();_N_E=t}]);